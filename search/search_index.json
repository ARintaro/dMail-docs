{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Welcome","text":""},{"location":"#introduction","title":"Introduction","text":"<p>dMail is an open-source instant messaging system designed to provide an efficient, secure, and user-friendly self-hosted IM deployment solution.</p> <p>We aim to enable individuals or small organizations to deploy an instant messaging system at a relatively low cost, capable of serving a considerable number of users while ensuring an adequate level of security. This helps to avoid potential information leaks and external scrutiny associated with public IM services.</p> <p>The project currently utilizes the <code>Rust</code> programming language for the server-side implementation, and it integrates with open-source projects such as <code>Minio</code>, <code>Coturn</code>, and <code>Pika</code> to form a complete backend service. Additionally, a cross-platform compatible web interface has been developed using the <code>Postman Template</code> and communicates with the backend service through <code>Websockets</code>.</p> <p>This project is part of the Software Engineering course at Tsinghua University in the spring semester of 2023.</p>"},{"location":"#project-repository","title":"Project Repository","text":"<p>The project repository will be open-sourced on GitHub after the course ends.</p>"},{"location":"#maintainers","title":"Maintainers","text":"<p>@r1ntaro Responsible for the main framework of the client and server, as well as the implementation of specific features.</p> <p>@lizengyu21 Responsible for implementing functionality on the web interface.</p> <p>@francis Responsible for implementing functionality related to server connections.</p> <p>@yanjx2021 Responsible for improving the visual appearance of the web interface and CSS coding.</p> <p>@Claire Responsible for documentation and localization of the documents.</p>"},{"location":"#acknowledgments","title":"Acknowledgments","text":"<p>@LJSthu Our beloved TA of the software engineering group! He's super nice, but he won't be serving as the TA for software engineering next year, so you won't get the chance to have him. Hahaha!</p> <p>@zhangzuo21 &amp; @ZengGuanning At first, they joined forces with us to form a mighty six-person squad. But alas, software engineering only allows teams of five, so they had no choice but to split into two squads. Poor Zuo Yuan and Guan Ning's team fell victim of internal competition in PRJ2, and as a result, they had to withdraw from the course. But fear not, for they shall rise again in the grand stage of software engineering in the autumn semester of 2023! It seems they are determined to unleash a splendid revenge upon the realm of software engineering! Brace yourselves for an epic comeback!</p> <p>@francis He made a daring leap from the Department of Electronics to the Department of Computer Science without even getting demoted, and to top it off, he's also pursuing a minor in Finance. Believe it or not, he has taken more finance courses and computer courses than his peers pursuing a double degree in Computer Science and Finance. He is the true superhero of Computer Science and Finance! (And to add to his glory, he starred in our hilarious short videos.)</p> <p>@r1ntaro You're right, but how did a lousy game developer like me end up rolling in software engineering? And guess what, I even managed to score a solid \"B+\"!</p> <p>@lizengyu21 The strategic elite builder of toilets, a practitioner who excels in both leading and following the roll. In his short life, there are only two things: \"software engineering\" and \"girlfriend.\"</p> <p>@zhangzhenhe He made a friendly guest appearance in our short video, as well as in the promotional video for Pizza Hut's \"Supreme Wagyu Pizza.\"</p> <p>@yanjx2021 CSS\u9ad8\u624b\u3001jQuery\u7684\u5fe0\u5b9e\u7528\u6237\u300105\u5e74\u7eaf\u60c5\u7537\u9ad8\u7bee\u7403\u5f1f\u5f1f\u3002</p> <p>@Claire What kind of experience is it to learn English and draw diagrams in a software engineering class? Well, let me tell you, it's like trying to debug a program written in a foreign language while juggling paintbrushes! You'll be mastering the art of code and sketching like a multitasking ninja. So, get ready to decode the mysteries of programming and bring them to life on paper, all with a touch of artistic flair. It's a wild ride, but hey, who said software engineering couldn't be a colorful adventure?</p>"},{"location":"tech/design/","title":"Software Design Document","text":""},{"location":"tech/design/#project-background","title":"Project Background","text":"<p>Currently, instant messaging services like WeChat, Telegram, etc., have become essential tools for individuals or organizations to exchange information on the internet. However, for end-users, using public instant messaging services for communication and data transmission poses a significant risk of information leakage. Chat messages, files, and data in public instant messaging platforms are stored by the service providers, and users have limited control over them. Most public instant messaging services are closed-source due to their profit-oriented nature, making it difficult for users to verify the effectiveness of service providers' commitments to information security. Therefore, deploying a private instant messaging service using an open-source project is crucial to maximize user information security.</p> <p>However, the current open-source community lacks a comprehensive ecosystem for instant messaging. In this context, this project aims to provide a private instant messaging deployment solution that achieves a balance between deployment cost, reliability, and performance.</p>"},{"location":"tech/design/#project-objectives","title":"Project Objectives","text":"<p>To provide users with an easy-to-deploy, high-performance, and secure solution for private instant messaging deployment.</p>"},{"location":"tech/design/#overview-of-technology-stack","title":"Overview of Technology Stack","text":"<p>For most small and medium-sized instant messaging deployments, distributed deployment costs are unaffordable. Therefore, single-machine performance is crucial, as it needs to handle a large number of concurrent requests on a single connected server. On the other hand, the system also needs sufficient horizontal scalability to meet the demands of serving more users.</p> <p>Therefore, the overall technology stack selection focuses on sacrificing development speed and feature richness in exchange for performance.</p> <ul> <li>The server-side development language chosen is <code>Rust</code>. The primary consideration is undoubtedly performance and memory safety. In addition, Rust's robust error handling mechanism can improve code quality. As a compiled language, it also reduces user deployment costs, as there is no need for additional runtime installations or complex dependencies. Its powerful generic capabilities achieve zero runtime cost abstractions, and the main code abstractions rely on generics and conditional compilation rather than virtual tables.</li> <li>The web client utilizes the <code>React</code> framework with <code>TypeScript</code> as the programming language, and <code>Mobx</code> as the state management library. Compared to traditional web applications with a B/S architecture, an instant messaging system, as a single-page application, resembles more of a C/S program. The native approach of React makes it difficult to separate data and rendering, and accumulating a sufficient amount of functional code can significantly decrease the project's maintainability. Furthermore, due to browser limitations, only <code>WebSocket</code> can be used for maintaining long connections, so a protocol is wrapped on top of <code>WebSocket</code>.</li> <li>The backend database layer implements a complete abstraction and uses conditional compilation to switch between different databases. However, due to time constraints, only the compatibility with Redis protocol databases is implemented. Currently, <code>Pika</code>, an open-source, persistent, Redis-protocol-compatible distributed database, is used for actual deployments. While SQL provides rich functionality, its QPS is far from meeting the requirements of instant messaging, and distributed scaling requires modifying backend logic manually to implement sharding and partitioning, unlike key-value databases, which are more convenient to deploy in a distributed manner.</li> </ul>"},{"location":"tech/design/#technical-selection-analysis","title":"Technical Selection Analysis","text":""},{"location":"tech/design/#analysis-of-the-connection-server-architecture","title":"Analysis of the Connection Server Architecture","text":"<p>The framework selected for the web service is <code>Actix Web</code>, and all operations that require IO are implemented asynchronously to ensure non-blocking functionality.</p> <p>The connection server utilizes two instances of <code>Tokio</code> runtime, each running on a separate thread pool.</p> <p>The first thread pool is responsible for handling connections and simple requests. The actors provided by the <code>Actix</code> framework also run on this thread pool. The asynchronous model of the <code>Actor</code> used for user connections ensures that even if a user thread crashes, it will not affect the normal operation of the backend services. It also provides a convenient solution for distributed scaling.</p> <p>The second thread pool handles high-load tasks such as message retrieval for read diffusion. These tasks involve extensive computation, string concatenation, and significant waiting time for IO operations. It is undesirable for these tasks to impact user connections, so they are executed on a separate thread pool. However, a basic thread pool can only run synchronously. Therefore, another instance of the <code>Tokio</code> runtime is launched to handle these tasks. It is worth noting that this approach may not be optimal on machines with insufficient CPU cores.</p> <p>The connection maintenance hash table utilizes distributed locks to minimize lock conflicts. Apart from this hash table, the backend service is nearly stateless, with all information stored in a database.</p> <p>These design choices provide the connection server with strong horizontal scalability, and increasing the number of CPU cores in a single machine ensures performance improvement. The main bottleneck in terms of processing speed for individual requests lies in the database. Based on this fact, a distributed deployment of the database combined with a single-machine connection server can handle a large number of user requests.</p>"},{"location":"tech/design/#communication-protocol-design","title":"Communication Protocol Design","text":"<p>Due to the possibility of IM services being deployed without a domain name, making it impossible to sign HTTPS certificates, we have implemented our own encryption protocol similar to HTTPS. Although it lacks third-party signatures and is vulnerable to man-in-the-middle attacks, this encryption protocol is used concurrently with HTTPS in the test services deployed on Secoder and Tencent Cloud. In practice, once HTTPS is enabled, there is no need to use this custom protocol anymore. Additionally, this protocol increases the debugging cost for attackers, as they would need to implement the encryption protocol themselves in order to communicate directly with the backend.</p> <p>Specifically, during WebSocket connection establishment, the client sends its RSA public key to the server. The server generates a symmetric encryption key using AES-GCM-128 and encrypts the symmetric key using the user's RSA public key, sending it back to the client. The client decrypts the message using its RSA private key and uses the symmetric encryption key for further communication. Subsequently, all information is transmitted through the encrypted WebSocket channel, eliminating the need for HTTP connections and improving server performance.</p>"},{"location":"tech/design/#database-selection","title":"Database Selection","text":"<p>Traditional web applications often use SQL databases to store information. However, for an IM service, the QPS (Queries Per Second) of SQL databases is relatively low, and distributed scaling can be complex, requiring manual sharding and table partitioning, which leads to business logic intrusion. Moreover, whether it is write diffusion or read diffusion, maintaining a large number of timelines is necessary. In SQL databases, multiple timelines are typically stored within a single table, which means that operations related to a single timeline, such as writing or reading, are influenced by the logarithmic scale of the entire table rather than just the scale of the individual timeline. On the other hand, KV (Key-Value) databases naturally separate these timelines, resulting in better complexity for individual operations. They are also well-suited for distributed support, as different timelines can be distributed across multiple machines. However, a disadvantage is that most open-source distributed KV databases do not support transactions and have lower data integrity. Another alternative is to combine</p> <p>SQL with Redis caching for optimization, but this approach introduces complexity in terms of updating, querying, and writing to the cache, making it more cumbersome to implement.</p> <p>In practice, many KV databases are compatible with the Redis protocol, and therefore, we have chosen the Redis protocol. Currently, the test services deployed online utilize the open-source object storage service called <code>Pika</code> from 360. Another alternative is <code>Tendis</code>, an open-source project released by Tencent.</p>"},{"location":"tech/design/#data-diffusion-with-caching","title":"Data Diffusion with Caching","text":"<p>The web client employs <code>LocalForge</code> to cache almost all data, avoiding repeated fetching from the server. Only when a user actually views certain information, does the client request it from the server.</p> <p>With the implementation of caching, the client logic becomes \"do not fetch from the server if the data is already present locally.\" However, in many cases, this data is not immutable. For example, a user's avatar and nickname may change over time, and in such cases, if the client does not fetch the updated data, it cannot stay in sync with the latest data from the server. Similar to WeChat, we re-fetch the data from the server when the user opens the specific information of another user.</p> <p>Another challenging feature is the \"retraction\" of messages. Any existing chat message on the client-side can be retracted on the server-side. If the client is offline when a retraction occurs, it cannot determine the validity of the cached data, resulting in cache invalidation and the need to fetch messages from the server every time to refill the cache. We address this issue by creating a separate timeline (or write diffusion) for each user, specifically designed to handle real-time modifications to client-cached data, such as retractions.</p> <p>Additionally, since incremental fetching is implemented, each chat session does not fetch the complete message history during login but only retrieves the most recent fixed number of messages. This poses a problem for the \"mention\" feature since messages mentioning a user might not be fetched by the client, and the client remains unaware of being mentioned. To solve this problem, we send write diffusion messages in the aforementioned timeline to indicate mentions.</p> <p>This timeline itself uses a timestamp stored on the client side for incremental fetching, and the server-side synchronizes with the client's timestamp after retrieval.</p>"},{"location":"tech/design/#direct-upload-to-object-storage-service-oss","title":"Direct Upload to Object Storage Service (OSS)","text":"<p>Instant messaging services need to transmit binary objects, and transferring binary files can significantly consume server bandwidth and disk resources. To mitigate this, it is necessary to separate the transmission service from the connection server, ensuring that the transfer service does not use connection server resources. Thus, we enable users to directly upload files to the object storage service through the server while maintaining control over file permissions and conducting file checks. Below is the complete file upload process:</p> <ol> <li>The client sends a request to the connection server, including the file hash and size to be uploaded.</li> <li>The connection server checks the validity of the request (whether the hash exists and the size is valid). If the request passes the verification, the server generates a file GUID and returns a pre-signed URL for file upload to the object server, allowing the user to upload the file directly.</li> <li>The client uploads the file directly to the object server and sends a message to the connection server upon successful upload.</li> <li>Upon receiving the \"upload complete\" message, the connection server queries the file hash and size corresponding to the GUID from the object upload server. It then compares this information with the hash and size initially sent by the client in the first step to verify whether the client deceived the server during the initial request.</li> <li>If the verification is successful, the connection server returns a pre-signed download link to the user. If the verification fails, the object server deletes the file.</li> </ol> <p>In practice, we have chosen to be compatible with the Amazon S3 protocol. Currently, the test services deployed online use the open-source object storage service called <code>Minio</code>. However, compared to mature commercial closed-source projects, the available functionality is relatively limited.</p>"},{"location":"tech/design/#audio-and-video-calls","title":"Audio and Video Calls","text":"<p>WebRTC technology is used to implement video calls, which is almost the only solution for video calls in the browser with numerous restrictions. Establishing P2P connections through local network traversal often fails in complex network environments. Therefore, we have also deployed a COTURN server as a TURN server for traffic relay when traversal fails.</p>"},{"location":"tech/design/#virtual-dom","title":"Virtual DOM","text":"<p>The message list utilizes the <code>Virtuso</code> library to implement a virtual DOM, where only a limited number of nodes are actually added to the DOM tree. Nodes are switched in real-time as the user scrolls, avoiding any stuttering caused by rendering a large number of messages on the frontend.</p>"},{"location":"tech/backend/static.files/SourceSerif4-LICENSE-3bb119e13b1258b7/","title":"SourceSerif4 LICENSE 3bb119e13b1258b7","text":"<p>Copyright 2014-2021 Adobe (http://www.adobe.com/), with Reserved Font Name 'Source'. All Rights Reserved. Source is a trademark of Adobe in the United States and/or other countries. Copyright 2014 - 2023 Adobe (http://www.adobe.com/), with Reserved Font Name \u2018Source\u2019. All Rights Reserved. Source is a trademark of Adobe in the United States and/or other countries.</p> <p>This Font Software is licensed under the SIL Open Font License, Version 1.1.</p> <p>This license is copied below, and is also available with a FAQ at: http://scripts.sil.org/OFL</p>"},{"location":"tech/backend/static.files/SourceSerif4-LICENSE-3bb119e13b1258b7/#sil-open-font-license-version-11-26-february-2007","title":"SIL OPEN FONT LICENSE Version 1.1 - 26 February 2007","text":"<p>PREAMBLE The goals of the Open Font License (OFL) are to stimulate worldwide development of collaborative font projects, to support the font creation efforts of academic and linguistic communities, and to provide a free and open framework in which fonts may be shared and improved in partnership with others.</p> <p>The OFL allows the licensed fonts to be used, studied, modified and redistributed freely as long as they are not sold by themselves. The fonts, including any derivative works, can be bundled, embedded, redistributed and/or sold with any software provided that any reserved names are not used by derivative works. The fonts and derivatives, however, cannot be released under any other type of license. The requirement for fonts to remain under this license does not apply to any document created using the fonts or their derivatives.</p> <p>DEFINITIONS \"Font Software\" refers to the set of files released by the Copyright Holder(s) under this license and clearly marked as such. This may include source files, build scripts and documentation.</p> <p>\"Reserved Font Name\" refers to any names specified as such after the copyright statement(s).</p> <p>\"Original Version\" refers to the collection of Font Software components as distributed by the Copyright Holder(s).</p> <p>\"Modified Version\" refers to any derivative made by adding to, deleting, or substituting -- in part or in whole -- any of the components of the Original Version, by changing formats or by porting the Font Software to a new environment.</p> <p>\"Author\" refers to any designer, engineer, programmer, technical writer or other person who contributed to the Font Software.</p> <p>PERMISSION &amp; CONDITIONS Permission is hereby granted, free of charge, to any person obtaining a copy of the Font Software, to use, study, copy, merge, embed, modify, redistribute, and sell modified and unmodified copies of the Font Software, subject to the following conditions:</p> <p>1) Neither the Font Software nor any of its individual components, in Original or Modified Versions, may be sold by itself.</p> <p>2) Original or Modified Versions of the Font Software may be bundled, redistributed and/or sold with any software, provided that each copy contains the above copyright notice and this license. These can be included either as stand-alone text files, human-readable headers or in the appropriate machine-readable metadata fields within text or binary files as long as those fields can be easily viewed by the user.</p> <p>3) No Modified Version of the Font Software may use the Reserved Font Name(s) unless explicit written permission is granted by the corresponding Copyright Holder. This restriction only applies to the primary font name as presented to the users.</p> <p>4) The name(s) of the Copyright Holder(s) or the Author(s) of the Font Software shall not be used to promote, endorse or advertise any Modified Version, except to acknowledge the contribution(s) of the Copyright Holder(s) and the Author(s) or with their explicit written permission.</p> <p>5) The Font Software, modified or unmodified, in part or in whole, must be distributed entirely under this license, and must not be distributed under any other license. The requirement for fonts to remain under this license does not apply to any document created using the Font Software.</p> <p>TERMINATION This license becomes null and void if any of the above conditions are not met.</p> <p>DISCLAIMER THE FONT SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT OF COPYRIGHT, PATENT, TRADEMARK, OR OTHER RIGHT. IN NO EVENT SHALL THE COPYRIGHT HOLDER BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, INCLUDING ANY GENERAL, SPECIAL, INDIRECT, INCIDENTAL, OR CONSEQUENTIAL DAMAGES, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF THE USE OR INABILITY TO USE THE FONT SOFTWARE OR FROM OTHER DEALINGS IN THE FONT SOFTWARE.</p>"},{"location":"tech/database/chat/","title":"chat","text":""},{"location":"tech/database/chat/#last_id","title":"last_id","text":""},{"location":"tech/database/chat/#data-type","title":"Data Type","text":"<p>Key-Value</p>"},{"location":"tech/database/chat/#description","title":"Description","text":"<p>Maintains the last chat ID to generate new IDs for chats.</p>"},{"location":"tech/database/chat/#example","title":"Example","text":"<pre><code>redis-cli\nset chat:last_id 10\n</code></pre>"},{"location":"tech/database/chat/#chat_idlast_id","title":"{chat_id}:last_id","text":""},{"location":"tech/database/chat/#data-type_1","title":"Data Type","text":"<p>Key-Value</p>"},{"location":"tech/database/chat/#description_1","title":"Description","text":"<p>Maintains the last in_chat_id for messages in a chat to generate new IDs for chat messages.</p>"},{"location":"tech/database/chat/#example_1","title":"Example","text":"<pre><code>redis-cli\nset chat:1:last_id 10\n</code></pre>"},{"location":"tech/database/chat/#chat_idinfo","title":"{chat_id}:info","text":""},{"location":"tech/database/chat/#data-type_2","title":"Data Type","text":"<p>Key-Value</p>"},{"location":"tech/database/chat/#description_2","title":"Description","text":"<p>Stores the serialized information of the corresponding chat.</p>"},{"location":"tech/database/chat/#example_2","title":"Example","text":"<pre><code>redis-cli\nset chat:1:info info\n</code></pre>"},{"location":"tech/database/chat/#chat_idowner","title":"{chat_id}:owner","text":""},{"location":"tech/database/chat/#data-type_3","title":"Data Type","text":"<p>Key-Value</p>"},{"location":"tech/database/chat/#description_3","title":"Description","text":"<p>Only applicable to group chats. Stores the ID of the owner of the group chat, which can be used to verify if a chat is a private chat or a group chat.</p>"},{"location":"tech/database/chat/#example_3","title":"Example","text":"<pre><code>redis-cli\nset chat:1:owner 10\n</code></pre>"},{"location":"tech/database/chat/#chat_idadmins","title":"{chat_id}:admins","text":""},{"location":"tech/database/chat/#data-type_4","title":"Data Type","text":"<p>Set</p>"},{"location":"tech/database/chat/#description_4","title":"Description","text":"<p>Only applicable to group chats. Stores the IDs of all the administrators of the group chat.</p>"},{"location":"tech/database/chat/#example_4","title":"Example","text":"<pre><code>redis-cli\nsadd chat:1:admins 10\n</code></pre>"},{"location":"tech/database/chat/#chat_idnotices","title":"{chat_id}:notices","text":""},{"location":"tech/database/chat/#data-type_5","title":"Data Type","text":"<p>Sorted Set</p>"},{"location":"tech/database/chat/#description_5","title":"Description","text":"<p>Only applicable to group chats. Stores the group notices of the group chat. The sorting criterion (score) is the notice_id, and the stored content (member) is the serialized content of the group notice.</p>"},{"location":"tech/database/chat/#example_5","title":"Example","text":"<pre><code>redis-cli\nzadd chat:1:notices 2 notices\n</code></pre>"},{"location":"tech/database/chat/#chat_idlast_notice_id","title":"{chat_id}:last_notice_id","text":""},{"location":"tech/database/chat/#data-type_6","title":"Data Type","text":"<p>Key-Value</p>"},{"location":"tech/database/chat/#description_6","title":"Description","text":"<p>Only applicable to group chats. Stores the last ID of the group notice, used to generate notice_id for new group announcements.</p>"},{"location":"tech/database/chat/#example_6","title":"Example","text":"<pre><code>redis-cli\nset chat:1:last_notice_id 10\n</code></pre>"},{"location":"tech/database/chat/#chat_idusers","title":"{chat_id}:users","text":""},{"location":"tech/database/chat/#data-type_7","title":"Data Type","text":"<p>Set</p>"},{"location":"tech/database/chat/#description_7","title":"Description","text":"<p>Stores the user IDs in the chat.</p>"},{"location":"tech/database/chat/#example_7","title":"Example","text":"<pre><code>redis-cli\nsadd chat:1:users 1\n</code></pre>"},{"location":"tech/database/chat/#chat_idmsgs","title":"{chat_id}:msgs","text":""},{"location":"tech/database/chat/#data-type_8","title":"Data Type","text":"<p>Sorted Set</p>"},{"location":"tech/database/chat/#description_8","title":"Description","text":"<p>Stores the messages in the chat in sequential order. The sorting criterion (score) is the in_chat_id, and the stored content (member) is the serialized message record.</p>"},{"location":"tech/database/chat/#example_8","title":"Example","text":"<pre><code>redis-cli\nzadd chat:1:msgs 2 msg\n</code></pre>"},{"location":"tech/database/chat/#chat_id0","title":"{chat_id}:0","text":""},{"location":"tech/database/chat/#data-type_9","title":"Data Type","text":"<p>Key-Value</p>"},{"location":"tech/database/chat/#description_9","title":"Description","text":"<p>Only applicable to private chats. Stores the smaller ID of the user in the private chat.</p>"},{"location":"tech/database/chat/#example_9","title":"Example","text":"<pre><code>redis-cli\nset chat:1:0 1\n</code></pre>"},{"location":"tech/database/chat/#chat_id1","title":"{chat_id}:1","text":""},{"location":"tech/database/chat/#data-type_10","title":"Data Type","text":"<p>Key-Value</p>"},{"location":"tech/database/chat/#description_10","title":"Description","text":"<p>Only applicable to private chats. Stores the larger ID of the user in the private chat.</p>"},{"location":"tech/database/chat/#example_10","title":"Example","text":"<pre><code>redis-cli\nset chat:1:1 2\n</code></pre>"},{"location":"tech/database/chat/#invitations","title":"Invitations","text":""},{"location":"tech/database/chat/#data-type_11","title":"Data Type","text":"<p>Hash Table</p>"},{"location":"tech/database/chat/#description_11","title":"Description","text":"<p>When a user receives an invitation to join a group chat, a key in the format \"inviter:invitee:chat id\" is added to this hash table. The key is removed after the invitation is processed.</p>"},{"location":"tech/database/chat/#example_11","title":"Example","text":"<pre><code>redis-cli\nhset Invitations 2:3:3 1\n</code></pre>"},{"location":"tech/database/file/","title":"file","text":""},{"location":"tech/database/file/#lst_upd","title":"lst_upd","text":""},{"location":"tech/database/file/#data-type","title":"Data Type","text":"<p>Key-Value</p>"},{"location":"tech/database/file/#description","title":"Description","text":"<p>Maintains the last file upload request ID to generate new IDs for file upload requests.</p>"},{"location":"tech/database/file/#example","title":"Example","text":"<pre><code>redis-cli\nset file:lst_upd 10\n</code></pre>"},{"location":"tech/database/file/#upload","title":"upload","text":""},{"location":"tech/database/file/#data-type_1","title":"Data Type","text":"<p>Hash Table</p>"},{"location":"tech/database/file/#description_1","title":"Description","text":"<p>Maintains the mapping of upload request IDs to request status JSON. The fields are deleted after a successful or failed upload request.</p>"},{"location":"tech/database/file/#example_1","title":"Example","text":"<pre><code>redis-cli\nhset file:upload 1 json\n</code></pre>"},{"location":"tech/database/file/#url","title":"url","text":""},{"location":"tech/database/file/#data-type_2","title":"Data Type","text":"<p>Hash Table</p>"},{"location":"tech/database/file/#description_2","title":"Description","text":"<p>Maintains the mapping of file hashes in upload requests to the URL and expiration time.</p>"},{"location":"tech/database/file/#example_2","title":"Example","text":"<pre><code>redis-cli\nhset file:url hash url&amp;&amp;expire\n</code></pre>"},{"location":"tech/database/req/","title":"req","text":""},{"location":"tech/database/req/#last_id","title":"last_id","text":""},{"location":"tech/database/req/#data-type","title":"Data Type","text":"<p>Key-Value</p>"},{"location":"tech/database/req/#description","title":"Description","text":"<p>Maintains the last request ID to generate new IDs for requests.</p>"},{"location":"tech/database/req/#example","title":"Example","text":"<pre><code>redis-cli\nset req:last_id 10\n</code></pre>"},{"location":"tech/database/req/#req_idinfo","title":"{req_id}:info","text":""},{"location":"tech/database/req/#data-type_1","title":"Data Type","text":"<p>Key-Value</p>"},{"location":"tech/database/req/#description_1","title":"Description","text":"<p>Stores the serialized information of the request.</p>"},{"location":"tech/database/req/#example_1","title":"Example","text":"<pre><code>redis-cli\nset req:1:info info\n</code></pre>"},{"location":"tech/database/req/#req_idstate","title":"{req_id}:state","text":""},{"location":"tech/database/req/#data-type_2","title":"Data Type","text":"<p>Key-Value</p>"},{"location":"tech/database/req/#description_2","title":"Description","text":"<p>Stores the state of the request, which can have three values: null, true, and false.</p> <ul> <li>null: the request is not processed.</li> <li>true: the request.</li> <li>false: the request.</li> </ul>"},{"location":"tech/database/req/#example_2","title":"Example","text":"<pre><code>redis-cli\nset req:1:state true\n</code></pre>"},{"location":"tech/database/user/","title":"user","text":""},{"location":"tech/database/user/#email_to_id","title":"email_to_id","text":""},{"location":"tech/database/user/#data-type","title":"Data Type","text":"<p>Hash Table</p>"},{"location":"tech/database/user/#description","title":"Description","text":"<p>Maintains the mapping from email addresses to user IDs.</p>"},{"location":"tech/database/user/#example","title":"Example","text":"<pre><code>redis-cli\nhset user:email_to_id a@a.com 1\n</code></pre> Key (Email) Value (user_id) a@a.com 1 b@b.com 2"},{"location":"tech/database/user/#fri_to_ch","title":"fri_to_ch","text":""},{"location":"tech/database/user/#data-type_1","title":"Data Type","text":"<p>Hash Table</p>"},{"location":"tech/database/user/#description_1","title":"Description","text":"<p>Maintains the mapping from friend relationships to chat IDs.</p> <p>Friend Relationship: {user1_id : user2_id}, where user1_id &lt; user2_id.</p>"},{"location":"tech/database/user/#example_1","title":"Example","text":"<pre><code>redis-cli\nhset user:fri_to_ch 1:2 1\n</code></pre> Key (Friend Relationship) Value (chat_id) 1:2 1 1:3 2"},{"location":"tech/database/user/#last_id","title":"last_id","text":""},{"location":"tech/database/user/#data-type_2","title":"Data Type","text":"<p>Key</p>"},{"location":"tech/database/user/#description_2","title":"Description","text":"<p>Maintains the last user ID to allocate IDs for new user registrations.</p>"},{"location":"tech/database/user/#example_2","title":"Example","text":"<pre><code>redis-cli\nset user:last_id 10\n</code></pre>"},{"location":"tech/database/user/#user_idinfo","title":"{user_id}:info","text":""},{"location":"tech/database/user/#data-type_3","title":"Data Type","text":"<p>Key</p>"},{"location":"tech/database/user/#description_3","title":"Description","text":"<p>Stores the serialized user information.</p>"},{"location":"tech/database/user/#example_3","title":"Example","text":"<pre><code>redis-cli\nset user:1:info info\n</code></pre>"},{"location":"tech/database/user/#user_idpass","title":"{user_id}:pass","text":""},{"location":"tech/database/user/#data-type_4","title":"Data Type","text":"<p>Key</p>"},{"location":"tech/database/user/#description_4","title":"Description","text":"<p>Stores the hashed user password.</p>"},{"location":"tech/database/user/#example_4","title":"Example","text":"<pre><code>redis-cli\nset user:1:pass password\n</code></pre>"},{"location":"tech/database/user/#user_idmail","title":"{user_id}:mail","text":""},{"location":"tech/database/user/#data-type_5","title":"Data Type","text":"<p>Key</p>"},{"location":"tech/database/user/#description_5","title":"Description","text":"<p>Stores the user's email address.</p>"},{"location":"tech/database/user/#example_5","title":"Example","text":"<pre><code>redis-cli\nset user:1:mail a@a.com\n</code></pre>"},{"location":"tech/database/user/#user_idchats","title":"{user_id}:chats","text":""},{"location":"tech/database/user/#data-type_6","title":"Data Type","text":"<p>Hash Table</p>"},{"location":"tech/database/user/#description_6","title":"Description","text":"<p>Stores the last seen message ID (in_chat_id) for each chat that the user has participated in.</p>"},{"location":"tech/database/user/#example_6","title":"Example","text":"<pre><code>redis-cli\nhset user:1:chats 1 10\n</code></pre> Key (chat_id) Value (in_chat_id) 1 10 2 12"},{"location":"tech/database/user/#user_idreqs","title":"{user_id}:reqs","text":""},{"location":"tech/database/user/#data-type_7","title":"Data Type","text":"<p>Sorted Set</p>"},{"location":"tech/database/user/#description_7","title":"Description","text":"<p>Stores the requests related to the user in a sorted manner. The score is the req_id of each request, and the member is also the req_id.</p>"},{"location":"tech/database/user/#example_7","title":"Example","text":"<pre><code>redis-cli\nzadd user:1:reqs 10 10\n</code></pre> Member (req_id) Score (req_id) 8 8 10 10"},{"location":"tech/database/user/#user_idnot","title":"{user_id}:not","text":""},{"location":"tech/database/user/#data-type_8","title":"Data Type","text":"<p>Sorted Set</p>"},{"location":"tech/database/user/#description_8","title":"Description","text":"<p>Stores important notifications for the user (mentioned messages and message recalls). It is used for synchronization between the server-side database and the frontend cache database. The score is the timestamp, and the member is the serialized notification content.</p>"},{"location":"tech/database/user/#example_8","title":"Example","text":"<pre><code>redis-cli\nzadd user:1:not 10000000 1\n</code></pre> Member (notice) Score (timestamp) notice1 100000 notice2 200000"},{"location":"tech/database/user/#name_to_id","title":"name_to_id","text":""},{"location":"tech/database/user/#data-type_9","title":"Data Type","text":"<p>Hash Table</p>"},{"location":"tech/database/user/#description_9","title":"Description","text":"<p>Maintains a list of user IDs for each name. It is used to lookup user IDs based on names. The value is a string representation of a vector containing the IDs of users with the same name.</p>"},{"location":"tech/database/user/#example_9","title":"Example","text":"<pre><code>redis-cli\nhset user:name_to_id name [1,2,3]\n</code></pre> Key (name) Value (ids) name1 [8,20,37] name2 [10]"},{"location":"tech/database/user/#user_idsettings","title":"{user_id}:settings","text":""},{"location":"tech/database/user/#data-type_10","title":"Data Type","text":"<p>Key-Value</p>"},{"location":"tech/database/user/#description_10","title":"Description","text":"<p>Stores the user's settings. It stores the serialized settings string received from the frontend.</p>"},{"location":"tech/database/user/#example_10","title":"Example","text":"<pre><code>redis-cli\nset user:1:settings setting\n</code></pre>"},{"location":"tech/database/user/#user_idtoken","title":"{user_id}:token","text":""},{"location":"tech/database/user/#data-type_11","title":"Data Type","text":"<p>Key-Value</p>"},{"location":"tech/database/user/#description_11","title":"Description","text":"<p>Stores the temporary token for the user, used for automatic login.</p>"},{"location":"tech/database/user/#example_11","title":"Example","text":"<pre><code>redis-cli\nset user:1:token token\n</code></pre>"},{"location":"tech/database/user/#user_idpre_join","title":"{user_id}:pre_join","text":""},{"location":"tech/database/user/#data-type_12","title":"Data Type","text":"<p>Set</p>"},{"location":"tech/database/user/#description_12","title":"Description","text":"<p>Stores the group chat IDs for which the user has sent but unprocessed join requests.</p>"},{"location":"tech/database/user/#example_12","title":"Example","text":"<pre><code>redis-cli\nsadd user:1:pre_join 10\n</code></pre>"},{"location":"tech/database/user/#user_idexist","title":"{user_id}:exist","text":""},{"location":"tech/database/user/#data-type_13","title":"Data Type","text":"<p>Key-Value</p>"},{"location":"tech/database/user/#description_13","title":"Description","text":"<p>Indicates whether the user ID is still in use. It is set to 1 on registration and 0 on logout.</p>"},{"location":"tech/database/user/#example_13","title":"Example","text":"<pre><code>redis-cli\nset user:1:exist 1\n</code></pre>"},{"location":"tech/network/websocket/","title":"Websocket Communication Protocol","text":""},{"location":"tech/network/websocket/#introduction","title":"Introduction","text":"<ul> <li> <p>To ensure the security and privacy of communication, all protocol contents, except for those marked with special symbols (with an asterisk (*) or double asterisks (**) ), are encrypted using the <code>AES</code> symmetric key encryption. The asterisk (*) indicates that the protocol is unencrypted, while the double asterisks (**) indicate that the protocol is encrypted using <code>RSA</code> public key encryption.</p> </li> <li> <p>All protocol contents, before encryption (after decryption), have the following format:</p> </li> </ul> <p><code>json   {     \"command\": \"***\",     \"data\": [data] // JSON or string or undefined   }</code></p> <ul> <li> <p>In the [Protocol Name] section following this API documentation, the required string for the <code>command</code> field in plain text protocols is specified. In the [Parameters] section, the first row of the table indicates the type of <code>data</code>, and subsequent rows specify the fields required for the <code>data</code> section in plain text protocols (if <code>data</code> exists and is of type JSON).</p> </li> <li> <p>Since communication typically involves the client sending data to the server, and the server responding with corresponding return data to the client, most of the protocols in this API documentation are written in the C2S-S2C format. C2S (Client2Server) indicates communication from the client to the server, while S2C (Server2Client) indicates communication from the server to the client.</p> </li> <li> <p>After encryption, protocol contents are represented as strings encoded in <code>base64</code>.</p> </li> </ul>"},{"location":"tech/network/websocket/#handshake-encryption-protocol","title":"Handshake Encryption Protocol","text":""},{"location":"tech/network/websocket/#setconnectionsymkeyc2s","title":"SetConnectionSymKey(C2S)*","text":""},{"location":"tech/network/websocket/#description","title":"Description","text":"<p>Used to exchange AES key pairs with the server to achieve handshake encryption.</p>"},{"location":"tech/network/websocket/#parameters","title":"Parameters","text":"Parameter Type Description data string 1024-bit RSA public key"},{"location":"tech/network/websocket/#example","title":"Example","text":"<pre><code>{\n    \"command\": \"SetConnectionSymKey\",\n    \"data\": \"MIGJAoGBAKMxsngBaWseSIR+84kzKaG31WEgePkC3AxgeOmQN3zHPs2tBHgsH8eqP8BTOVOzX6Llqo2HwO8FBMWetNRYMytzIYzSNL728ANyBeoItoyhqd2vlZYqj9eJ5ImmYcRMgTwc8CVcDuonjFF8bR2Y+sULLprrzFLjFSgj6K2Te3wZAgMBAAE=\"\n}\n</code></pre>"},{"location":"tech/network/websocket/#setconnectionpubkeyresponses2c","title":"SetConnectionPubKeyResponse(S2C)**","text":""},{"location":"tech/network/websocket/#encryption-method","title":"Encryption Method","text":"<p>Encrypt using the RSA public key provided by the [Handshake Encryption Protocol (C2S)*].</p>"},{"location":"tech/network/websocket/#description_1","title":"Description","text":"<p>Used to set the AES symmetric key for the client.</p>"},{"location":"tech/network/websocket/#parameters_1","title":"Parameters","text":"Parameter Name Type Description data JSON None state string Response status from server pubKey string(opt) AES key if response is correct state Description NeedSetPubKey Server has no RSA public key PubKeyError RSA public key encryption failure on the server HasApproved Handshake encryption already approved Success AES key issuance successful on the server"},{"location":"tech/network/websocket/#example_1","title":"Example","text":"<pre><code>{\n    \"command\": \"SetConnectionPubKeyResponse\",\n    \"data\": {\n        \"state\": \"Success\",\n        \"pubKey\": \"hfqtj+f9vPN3CXDPgN6qQJgIlQph2dvPe99fsZJUK2vud6Iwyw\u20260FyXp/blfQaE3Lf/n5CWFl+TppHN5x6q7oCGuUHGp10EZKMQ=\" \n    }\n}\n</code></pre> <pre><code>{\n    \"command\": \"SetConnectionPubKeyResponse\",\n    \"data\": {\n        \"state\": \"HasApproved\"\n    }\n}\n</code></pre>"},{"location":"tech/network/websocket/#login-protocol","title":"Login Protocol","text":""},{"location":"tech/network/websocket/#login-c2s","title":"Login (C2S)","text":""},{"location":"tech/network/websocket/#description_2","title":"Description","text":"<p>Used for user login.</p>"},{"location":"tech/network/websocket/#parameters_2","title":"Parameters","text":"Parameter Name Type Description data JSON None email string User's email password string(opt) Salted hashed password emailCode number(opt) Email verification code token string(opt) Server-issued token"},{"location":"tech/network/websocket/#example_2","title":"Example","text":"<pre><code>{\n    \"command\": \"Login\",\n    \"data\": {\n        \"email\": \"rintaro@foxmail.com\",\n        \"password\": \"fd750cd28387c49d2f5b951005e6ac2d5af2e7e0a3a3dd821827c12ae527f52d\"\n    }\n}\n</code></pre> <pre><code>{\n    \"command\": \"Login\",\n    \"data\": {\n        \"email\": \"rintaro@foxmail.com\",\n        \"emailCode\": 2145621540\n    }\n}\n</code></pre>"},{"location":"tech/network/websocket/#loginresponse-s2c","title":"LoginResponse (S2C)","text":""},{"location":"tech/network/websocket/#description_3","title":"Description","text":"<p>Used for server response to user login request.</p>"},{"location":"tech/network/websocket/#parameters_3","title":"Parameters","text":"Parameter Name Type Description data JSON None state string User login response state userId number(opt) User's userId after successful login state Description Success Successful login EmailInvalid Invalid email format UserNotFound User does not exist in the database UserLogged User is already logged in PasswordError Incorrect password EmailCodeError Incorrect verification code TokenError Invalid token TokenExpired Token has expired"},{"location":"tech/network/websocket/#example_3","title":"Example","text":"<pre><code>{\n    \"command\": \"LoginResponse\",\n    \"data\": {\n        \"state\": \"Success\",\n        \"userId\": 1\n    }\n}\n</code></pre> <pre><code>{\n    \"command\": \"LoginResponse\",\n    \"data\": {\n        \"state\": \"UserLogged\"\n    }\n}\n</code></pre>"},{"location":"tech/network/websocket/#registration-protocol","title":"Registration Protocol","text":""},{"location":"tech/network/websocket/#register-c2s","title":"Register (C2S)","text":""},{"location":"tech/network/websocket/#description_4","title":"Description","text":"<p>Used for the client to send a registration account request to the server.</p>"},{"location":"tech/network/websocket/#parameters_4","title":"Parameters","text":"Parameter Name Type Description data JSON None userName string User's username password string Salted hashed password email string User's email emailCode number Email verification code"},{"location":"tech/network/websocket/#example_4","title":"Example","text":"<pre><code>{\n    \"command\": \"Register\",\n    \"data\": {\n        \"userName\": \"ARintaro\",\n        \"email\": \"rintaro@foxmail.com\",\n        \"password\": \"fd750cd28387c49d2f5b951005e6ac2d5af2e7e0a3a3dd821827c12ae527f52d\",\n        \"emailCode\": 1234567890\n    }\n}\n</code></pre>"},{"location":"tech/network/websocket/#registerresponse-s2c","title":"RegisterResponse (S2C)","text":""},{"location":"tech/network/websocket/#description_5","title":"Description","text":"<p>Used for the server to respond to the client's registration request.</p>"},{"location":"tech/network/websocket/#parameters_5","title":"Parameters","text":"Parameter Name Type Description data JSON None state string Response state of the registration request userId number(opt) User's userId after successful registration state Description Success Registration successful UserNameFormatError Invalid username format PasswordFormatError Invalid password format EmailRegistered Email already registered EmailCodeError Incorrect verification code EmailInvalid Invalid email format"},{"location":"tech/network/websocket/#example_5","title":"Example","text":"<pre><code>{\n    \"command\": \"RegisterResponse\",\n    \"data\": {\n        \"state\": \"Success\",\n        \"userId\": 15\n    }\n}\n</code></pre> <pre><code>{\n    \"command\": \"RegisterResponse\",\n    \"data\": {\n        \"state\": \"EmailCodeError\"\n    }\n}\n</code></pre>"},{"location":"tech/network/websocket/#initial-data-pull-protocol","title":"Initial Data Pull Protocol","text":""},{"location":"tech/network/websocket/#pull-c2s","title":"Pull (C2S)","text":""},{"location":"tech/network/websocket/#description_6","title":"Description","text":"<p>After successful login, the client automatically sends a request to the server to pull data for initializing chat information.</p>"},{"location":"tech/network/websocket/#parameters_6","title":"Parameters","text":"Parameter Name Type Description data JSON None lastRequestId number Pull requests after the latest RequestId, 0 for full data pull noticeTimestamp number Pull all notices after this timestamp"},{"location":"tech/network/websocket/#example_6","title":"Example","text":"<pre><code>{\n    \"command\": \"Pull\",\n    \"data\": {\n        \"lastRequestId\": 0,\n        \"noticeTimestamp\": 1685018341911\n    }\n}\n</code></pre>"},{"location":"tech/network/websocket/#readcursors-s2c","title":"ReadCursors (S2C)","text":""},{"location":"tech/network/websocket/#description_7","title":"Description","text":"<p>The server sends the client the latest read positions for corresponding chats.</p>"},{"location":"tech/network/websocket/#parameters_7","title":"Parameters","text":"Parameter Name Type Description data Array None data[index] Array Tuple [chatId, readCursor] for each chatId"},{"location":"tech/network/websocket/#example_7","title":"Example","text":"<pre><code>{\n    \"command\": \"ReadCursors\",\n    \"data\": [\n        [1, 69],\n        [3, 52],\n        [8, 5],\n        [2, 11]\n    ]\n}\n</code></pre>"},{"location":"tech/network/websocket/#messages-s2c","title":"Messages (S2C)","text":""},{"location":"tech/network/websocket/#description_8","title":"Description","text":"<p>The server sends the client the latest partial messages for each chat.</p>"},{"location":"tech/network/websocket/#parameters_8","title":"Parameters","text":"Parameter Name Type Description data Array None data[index] string Serialized message data"},{"location":"tech/network/websocket/#example_8","title":"Example","text":"<pre><code>{\n    \"command\": \"Messages\",\n    \"data\": [\n        \"{\"type\":\"Text\", \"inChatId\":64, \"chatId\":1, \"senderId\":7, \"serializedContent\":\"\\\"\\\\\\\"XXX\\\\\\\"\\\"\", \"timestamp\":1684332121757}\",\n        \"{\"type\":\"Text\", \"inChatId\":65, \"chatId\":1, \"senderId\":3, \"serializedContent\":\"\\\"www.hao.com www.hao.com www.hao.com\\\"\", \"timestamp\":1684332445808}\"\n    ]\n}\n</code></pre>"},{"location":"tech/network/websocket/#requests-s2c","title":"Requests (S2C)","text":""},{"location":"tech/network/websocket/#description_9","title":"Description","text":"<p>The server sends the client the latest partial requests for each chat.</p>"},{"location":"tech/network/websocket/#parameters_9","title":"Parameters","text":"Parameter Name Type Description data Array None data[index] string Serialized Request data"},{"location":"tech/network/websocket/#example_9","title":"Example","text":"<pre><code>{\n    \"command\": \"Requests\",\n    \"data\": [\n        \"{\"info\":{\"reqId\":1,\"senderId\":2,\"message\":\"123\",\"content\":{\"type\":\"JoinGroup\",\"chatId\":1}},\"state\":\"Approved\"}\",\n        \"{\"info\":{\"reqId\":2,\"senderId\":1,\"message\":\"test\",\"content\":{\"type\":\"MakeFriend\",\"receiverId\":2}},\"state\":\"Approved\"}\"\n    ]\n}\n</code></pre>"},{"location":"tech/network/websocket/#usersetting-s2c","title":"UserSetting (S2C)","text":""},{"location":"tech/network/websocket/#description_10","title":"Description","text":"<p>The server sends user configuration data to the client.</p>"},{"location":"tech/network/websocket/#parameters_10","title":"Parameters","text":"Parameter Name Type Description data string Serialized user configuration data"},{"location":"tech/network/websocket/#example_10","title":"Example","text":"<pre><code>{\n    \"command\": \"UserSetting\",\n    \"data\": \"{\"secondaryCheckChats\":[],\"userNickname\":[],\"notification\":{\"slient\":true,\"show\":true,\"muteChatIds\":[6]},\"topChatIds\":[4,3]}\"\n}\n</code></pre>"},{"location":"tech/network/websocket/#notices-s2c","title":"Notices (S2C)","text":""},{"location":"tech/network/websocket/#description_11","title":"Description","text":"<p>The server sends a list of partially fetched Notice data to the client.</p>"},{"location":"tech/network/websocket/#parameters_11","title":"Parameters","text":"Parameter Name Type Description data Array None data[index] string Serialized Notice data"},{"location":"tech/network/websocket/#example_11","title":"Example","text":"<pre><code>{\n    \"command\": \"Notices\",\n    \"data\": []\n}\n</code></pre>"},{"location":"tech/network/websocket/#pullresponse-s2c","title":"PullResponse (S2C)","text":""},{"location":"tech/network/websocket/#description_12","title":"Description","text":"<p>The server responds to the Pull request status from the client.</p>"},{"location":"tech/network/websocket/#parameters_12","title":"Parameters","text":"Parameter Name Type Description data JSON None state string Response status of Pull request state Description Success Successful response to Pull request DatabaseError Database exception"},{"location":"tech/network/websocket/#example_12","title":"Example","text":"<pre><code>{\n    \"command\": \"PullResponse\",\n    \"data\": {\n        \"state\": \"Success\"\n    }\n}\n</code></pre>"},{"location":"tech/network/websocket/#user-information-retrieval-protocol","title":"User Information Retrieval Protocol","text":""},{"location":"tech/network/websocket/#getuserinfo-c2s","title":"GetUserInfo (C2S)","text":""},{"location":"tech/network/websocket/#description_13","title":"Description","text":"<p>The client requests user information from the server.</p>"},{"location":"tech/network/websocket/#parameters_13","title":"Parameters","text":"Parameter Name Type Description data number User ID"},{"location":"tech/network/websocket/#example_13","title":"Example","text":"<pre><code>{\n    \"command\": \"GetUserInfo\",\n    \"data\": 1\n}\n</code></pre>"},{"location":"tech/network/websocket/#getuserinforesponse-s2c","title":"GetUserInfoResponse (S2C)","text":""},{"location":"tech/network/websocket/#description_14","title":"Description","text":"<p>The server sends user information data to the client.</p>"},{"location":"tech/network/websocket/#parameters_14","title":"Parameters","text":"Parameter Name Type Description data JSON None state string Response status userId number(opt) User ID (if successful) userName string(opt) User name (if successful) avatarHash string(opt) Avatar file hash (if successful) state Description Success Successful response UserNotFound User does not exist ServerError Server error"},{"location":"tech/network/websocket/#example_14","title":"Example","text":"<pre><code>{\n    \"command\": \"GetUserInfoResponse\",\n    \"data\": {\n        \"state\": \"Success\",\n        \"userId\": 8,\n        \"userName\": \"Rintaro\",\n        \"avatarHash\": \"b9c9a45da34b134a835c0ec673ea4ce4\"\n    }\n}\n</code></pre>"},{"location":"tech/network/websocket/#chat-data-retrieval-protocol","title":"Chat Data Retrieval Protocol","text":""},{"location":"tech/network/websocket/#getchatinfo-c2s","title":"GetChatInfo (C2S)","text":""},{"location":"tech/network/websocket/#description_15","title":"Description","text":"<p>The client requests chat information data from the server.</p>"},{"location":"tech/network/websocket/#parameters_15","title":"Parameters","text":"Parameter Name Type Description data number Chat ID"},{"location":"tech/network/websocket/#example_15","title":"Example","text":"<pre><code>{\n    \"command\": \"GetChatInfo\",\n    \"data\": 9\n}\n</code></pre>"},{"location":"tech/network/websocket/#chat-s2c","title":"Chat (S2C)","text":""},{"location":"tech/network/websocket/#description_16","title":"Description","text":"<p>The server sends chat information data to the client.</p>"},{"location":"tech/network/websocket/#parameters_16","title":"Parameters","text":"Parameter Name Type Description data string Serialized chat info data"},{"location":"tech/network/websocket/#example_16","title":"Example","text":"<pre><code>{\n    \"command\": \"Chat\",\n    \"data\": \"{\\\"id\\\":9,\\\"name\\\":\\\"Create Group Chat Test 2\\\",\\\"avatarHash\\\":\\\"\\\"}\"\n}\n</code></pre>"},{"location":"tech/network/websocket/#group-chat-permission-related-protocols","title":"Group Chat Permission Related Protocols","text":""},{"location":"tech/network/websocket/#getgroupusers-getgroupadmin-getgroupowner-c2s","title":"GetGroupUsers, GetGroupAdmin, GetGroupOwner (C2S)","text":""},{"location":"tech/network/websocket/#description_17","title":"Description","text":"<p>The client requests the user ID list of a group chat, the ID list of administrators, and the ID of the group owner from the server.</p>"},{"location":"tech/network/websocket/#parameters_17","title":"Parameters","text":"Parameter Name Type Description data number Chat ID"},{"location":"tech/network/websocket/#example_17","title":"Example","text":"<pre><code>{\n    \"command\": \"GetGroupUsers\",\n    \"data\": 9\n}\n</code></pre> <pre><code>{\n    \"command\": \"GetGroupAdmin\",\n    \"data\": 9\n}\n</code></pre> <pre><code>{\n    \"command\": \"GetGroupOwner\",\n    \"data\": 9\n}\n</code></pre>"},{"location":"tech/network/websocket/#getgroupusersresponse-s2c","title":"GetGroupUsersResponse (S2C)","text":""},{"location":"tech/network/websocket/#description_18","title":"Description","text":"<p>The server sends the list of group chat member IDs to the client.</p>"},{"location":"tech/network/websocket/#parameters_18","title":"Parameters","text":"Parameter Name Type Description data JSON None state string Response status chatId number (opt) Chat ID userIds Array (opt) List of user IDs userIds[index] number User ID state Description Success Successful response NotGroupChat The chat is not a group chat ServerError Server error"},{"location":"tech/network/websocket/#example_18","title":"Example","text":"<pre><code>{\n    \"command\": \"GetGroupUsersResponse\",\n    \"data\": {\n        \"state\": \"Success\",\n        \"chatId\": 8,\n        \"userIds\": [\n            1,\n            5\n        ]\n    }\n}\n</code></pre> <pre><code>{\n    \"command\": \"GetGroupUsersResponse\",\n    \"data\": {\n        \"state\": \"NotGroupChat\"\n    }\n}\n</code></pre>"},{"location":"tech/network/websocket/#getgroupownerresponse-s2c","title":"GetGroupOwnerResponse (S2C)","text":""},{"location":"tech/network/websocket/#description_19","title":"Description","text":"<p>The server sends the ID of the group owner to the client.</p>"},{"location":"tech/network/websocket/#parameters_19","title":"Parameters","text":"Parameter Name Type Description data JSON None chatId number (opt) Chat ID userId number (opt) ID of the group owner state Description Success Successful response UserNotInChat The user is not in the chat ServerError Server error"},{"location":"tech/network/websocket/#example_19","title":"Example","text":"<pre><code>{\n    \"command\": \"GetGroupOwnerResponse\",\n    \"data\": {\n        \"state\": \"Success\",\n        \"chatId\": 8,\n        \"userId\": 10\n    }\n}\n</code></pre> <pre><code>{\n    \"command\": \"GetGroupOwnerResponse\",\n    \"data\": {\n        \"state\": \"UserNotInChat\"\n    }\n}\n</code></pre>"},{"location":"tech/network/websocket/#getgroupadminresponse-s2c","title":"GetGroupAdminResponse (S2C)","text":""},{"location":"tech/network/websocket/#description_20","title":"Description","text":"<p>The server sends the list of administrator IDs to the client.</p>"},{"location":"tech/network/websocket/#parameters_20","title":"Parameters","text":"Parameter Name Type Description data JSON None chatId number (opt) Chat ID userIds Array (opt) List of administrator IDs userIds[index] number Administrator ID state Description Success Successful response UserNotInChat The user is not in the chat ServerError Server error"},{"location":"tech/network/websocket/#example_20","title":"Example","text":"<pre><code>{\n    \"command\": \"GetGroupAdminResponse\",\n    \"data\": {\n        \"state\": \"Success\",\n        \"chatId\": 8,\n        \"userIds\": [\n            10,\n            5\n        ]\n    }\n}\n</code></pre> <pre><code>{\n    \"command\": \"GetGroupAdminResponse\",\n    \"data\": {\n        \"state\": \"UserNotInChat\"\n    }\n}\n</code></pre>"},{"location":"tech/network/websocket/#groupownertransfer-c2s","title":"GroupOwnerTransfer (C2S)","text":""},{"location":"tech/network/websocket/#description_21","title":"Description","text":"<p>Transfer the ownership of a group chat.</p>"},{"location":"tech/network/websocket/#parameters_21","title":"Parameters","text":"Parameter Name Type Description data JSON None chatId number Chat ID userId number User ID to transfer ownership to"},{"location":"tech/network/websocket/#example_21","title":"Example","text":"<pre><code>{\n    \"command\": \"GroupOwnerTransfer\",\n    \"data\": {\n        \"chatId\": 5,\n        \"userId\": 2\n    }\n}\n</code></pre>"},{"location":"tech/network/websocket/#groupownertransferresponse-s2c","title":"GroupOwnerTransferResponse (S2C)","text":""},{"location":"tech/network/websocket/#description_22","title":"Description","text":"<p>The server responds to the request to transfer ownership of a group chat.</p>"},{"location":"tech/network/websocket/#parameters_22","title":"Parameters","text":"Parameter Name Type Description data JSON None state string Response status chatId number Chat ID userId number User ID State Description Success Successful response NotOwner The requesting user is not the owner UserNotInChat User is not in the chat ServerError Server error"},{"location":"tech/network/websocket/#example_22","title":"Example","text":"<pre><code>{\n    \"command\": \"GroupOwnerTransferResponse\",\n    \"data\": {\n        \"state\": \"Success\",\n        \"chatId\": 4,\n        \"userId\": 2\n    }\n}\n</code></pre>"},{"location":"tech/network/websocket/#removegroupmember-c2s","title":"RemoveGroupMember (C2S)","text":""},{"location":"tech/network/websocket/#description_23","title":"Description","text":"<p>Remove a group member from the chat.</p>"},{"location":"tech/network/websocket/#parameters_23","title":"Parameters","text":"Parameter Name Type Description chatId number Chat ID userId number User ID"},{"location":"tech/network/websocket/#example_23","title":"Example","text":"<pre><code>{\n    \"command\": \"RemoveGroupMember\",\n    \"data\": {\n        \"chatId\": 5,\n        \"userId\": 2\n    }\n}\n</code></pre>"},{"location":"tech/network/websocket/#removegroupmemberresponse-s2c","title":"RemoveGroupMemberResponse (S2C)","text":""},{"location":"tech/network/websocket/#description_24","title":"Description","text":"<p>The server responds to the request to remove a group member from the chat.</p>"},{"location":"tech/network/websocket/#parameters_24","title":"Parameters","text":"Parameter Name Type Description data JSON None state string Response status chatId number (opt) Chat ID userId number (opt) User ID of the removed member                  | state Description Success Successful response SameUser Requesting user is the same as the removed user NoPermission No permission to remove the member UserNotInChat User is not in the chat ServerError Server error"},{"location":"tech/network/websocket/#example_24","title":"Example","text":"<pre><code>{\n    \"command\": \"RemoveGroupMemberResponse\",\n    \"data\": {\n        \"state\": \"Success\",\n        \"chatId\": 5,\n        \"userId\": 15\n    }\n}\n</code></pre>"},{"location":"tech/network/websocket/#private-chat-read-status-query-protocol","title":"Private Chat Read Status Query Protocol","text":""},{"location":"tech/network/websocket/#getuserreadinprivate-c2s","title":"GetUserReadInPrivate (C2S)","text":""},{"location":"tech/network/websocket/#description_25","title":"Description","text":"<p>The client requests the latest read message ID from the other user in a private chat.</p>"},{"location":"tech/network/websocket/#parameters_25","title":"Parameters","text":"Parameter Name Type Description data number Chat ID"},{"location":"tech/network/websocket/#example_25","title":"Example","text":"<pre><code>{\n    \"command\": \"GetUserReadInPrivate\",\n    \"data\": 72\n}\n</code></pre>"},{"location":"tech/network/websocket/#getuserreadinprivateresponse-s2c","title":"GetUserReadInPrivateResponse (S2C)","text":""},{"location":"tech/network/websocket/#description_26","title":"Description","text":"<p>The server sends the latest read message ID from the other user in a private chat to the client.</p>"},{"location":"tech/network/websocket/#parameters_26","title":"Parameters","text":"Parameter Name Type Description data JSON None state string Response status chatId number (opt) Chat ID inChatId number (opt) Latest read message ID state Description Success Successful response NotPrivateChat The chat is not a private chat UserNotInChat User is not in the chat ServerError Server error"},{"location":"tech/network/websocket/#example_26","title":"Example","text":"<pre><code>{\n    \"command\": \"GetUserReadInPrivateResponse\",\n    \"data\": {\n        \"state\": \"Success\",\n        \"chatId\": 72,\n        \"inChatId\": 5\n    }\n}\n</code></pre> <pre><code>{\n    \"command\": \"GetUserReadInPrivateResponse\",\n    \"data\": {\n        \"state\": \"NotPrivateChat\"\n    }\n}\n</code></pre>"},{"location":"tech/network/websocket/#group-chat-read-status-query-protocol","title":"Group Chat Read Status Query Protocol","text":""},{"location":"tech/network/websocket/#getuserreadingroup-c2s","title":"GetUserReadInGroup (C2S)","text":""},{"location":"tech/network/websocket/#description_27","title":"Description","text":"<p>The client requests the list of member IDs who have read a specific message in a group chat.</p>"},{"location":"tech/network/websocket/#parameters_27","title":"Parameters","text":"Parameter Name Type Description data JSON None chatId number Chat ID inChatId number Message ID"},{"location":"tech/network/websocket/#example_27","title":"Example","text":"<pre><code>{\n    \"command\": \"GetUserReadInGroup\",\n    \"data\": {\n        \"chatId\": 4,\n        \"inChatId\": 49\n    }\n}\n</code></pre>"},{"location":"tech/network/websocket/#getuserreadingroupresponse-s2c","title":"GetUserReadInGroupResponse (S2C)","text":""},{"location":"tech/network/websocket/#description_28","title":"Description","text":"<p>The server sends the list of member IDs who have read the specified message in a group chat to the client.</p>"},{"location":"tech/network/websocket/#parameters_28","title":"Parameters","text":"Parameter Name Type Description data JSON None state string Response status chatId number (opt) Chat ID inChatId number (opt) Message ID userIds Array (opt) List of read member IDs userIds[index] number User ID state Description Success Successful response NotGroupChat The chat is not a group chat UserNotInChat User is not in the chat"},{"location":"tech/network/websocket/#example_28","title":"Example","text":"<pre><code>{\n    \"command\": \"GetUserReadInGroupResponse\",\n    \"data\": {\n        \"state\": \"Success\",\n        \"chatId\": 4,\n        \"inChatId\": 15,\n        \"userIds\": [\n             10,\n             2\n        ]\n    }\n}\n</code></pre> <pre><code>{\n    \"command\": \"GetUserReadInGroupResponse\",\n    \"data\": {\n        \"state\": \"UserNotInChat\"\n    }\n}\n</code></pre>"},{"location":"tech/network/websocket/#group-notice-protocol","title":"Group Notice Protocol","text":""},{"location":"tech/network/websocket/#pullgroupnotice-c2s","title":"PullGroupNotice (C2S)","text":""},{"location":"tech/network/websocket/#description_29","title":"Description","text":"<p>The client requests incremental retrieval of group notice data from the server.</p>"},{"location":"tech/network/websocket/#parameters_29","title":"Parameters","text":"Parameter Name Type Description data JSON No data chatId number Chat ID lastNoticeId number The latest notice ID the client has, or 0 for full retrieval"},{"location":"tech/network/websocket/#example_29","title":"Example","text":"<pre><code>{\n    \"command\": \"PullGroupNotice\",\n    \"data\": {\n        \"chatId\": 4,\n        \"lastNoticeId\": 0\n    }\n}\n</code></pre>"},{"location":"tech/network/websocket/#pullgroupnoticeresponse-s2c","title":"PullGroupNoticeResponse (S2C)","text":""},{"location":"tech/network/websocket/#description_30","title":"Description","text":"<p>The server sends the serialized group notice data list to the client.</p>"},{"location":"tech/network/websocket/#parameters_30","title":"Parameters","text":"Parameter Name Type Description data JSON None state string Response status chatId number Chat ID groupNotice Array (opt) List of group notice data groupNotice[index] string Serialized group notice data state Description Success Successful response UserNotInChat User is not in the chat ServerError Server error"},{"location":"tech/network/websocket/#example_30","title":"Example","text":"<pre><code>{\n    \"command\": \"PullGroupNoticeResponse\",\n    \"data\": {\n        \"state\": \"Success\",\n        \"chatId\": 4,\n        \"groupNotice\": []\n    }\n}\n</code></pre>"},{"location":"tech/network/websocket/#sendgroupnotice-c2s","title":"SendGroupNotice (C2S)","text":""},{"location":"tech/network/websocket/#description_31","title":"Description","text":"<p>Send a group notice.</p>"},{"location":"tech/network/websocket/#parameters_31","title":"Parameters","text":"Parameter Name Type Description data JSON None chatId number Chat ID clientId number Client message ID notice string Notice content"},{"location":"tech/network/websocket/#example_31","title":"Example","text":"<pre><code>{\n    \"command\": \"SendGroupNotice\",\n    \"data\": {\n        \"chatId\": 4,\n        \"clientId\": 1,\n        \"notice\": \"test\"\n    }\n}\n</code></pre>"},{"location":"tech/network/websocket/#groupnoticeresponse-s2c","title":"GroupNoticeResponse (S2C)","text":""},{"location":"tech/network/websocket/#description_32","title":"Description","text":"<p>The server responds to the client's group notice request.</p>"},{"location":"tech/network/websocket/#parameters_32","title":"Parameters","text":"Parameter Name Type Description data JSON None state string Response status chatId number Chat ID clientId number Client chat ID noticeId number Notice ID timestamp number Notice timestamp state Description Success Successful response NoPermission No permission to send notice LengthLimitExceeded Group notice length exceeded ServerError Server error"},{"location":"tech/network/websocket/#example_32","title":"Example","text":"<pre><code>{\n    \"command\": \"GroupNoticeResponse\",\n    \"data\": {\n        \"state\": \"Success\",\n        \"chatId\": 4,\n        \"clientId\": 1,\n        \"noticeId\": 1,\n        \"timestamp\": 16851863077\n    }\n}\n</code></pre>"},{"location":"tech/network/websocket/#token-issuance-protocol","title":"Token Issuance Protocol","text":""},{"location":"tech/network/websocket/#applyfortoken-c2s","title":"ApplyForToken (C2S)","text":""},{"location":"tech/network/websocket/#description_33","title":"Description","text":"<p>The client requests token issuance from the server.</p>"},{"location":"tech/network/websocket/#parameters_33","title":"Parameters","text":"Parameter Name Type Description data undefined None"},{"location":"tech/network/websocket/#example_33","title":"Example","text":"<pre><code>{\n    \"command\": \"ApplyForToken\"\n}\n</code></pre>"},{"location":"tech/network/websocket/#applyfortokenresponse-s2c","title":"ApplyForTokenResponse (S2C)","text":""},{"location":"tech/network/websocket/#description_34","title":"Description","text":"<p>The server issues a token to the client.</p>"},{"location":"tech/network/websocket/#parameters_34","title":"Parameters","text":"Parameter Name Type Description data JSON None state string Response status token string (opt) Token timestamp number (opt) Timestamp state Description Success Successful response ServerError Server error"},{"location":"tech/network/websocket/#example_34","title":"Example","text":"<pre><code>{\n    \"command\": \"ApplyForTokenResponse\",\n    \"data\": {\n        \"state\": \"ServerError\"\n    }\n}\n</code></pre> <pre><code>{\n    \"command\": \"ApplyForTokenResponse\",\n    \"data\": {\n        \"state\": \"Success\",\n        \"token\": \"b309358883384c45b321340a127cacd6\",\n        \"timestamp\": 1685192367997\n    }\n}\n</code></pre>"},{"location":"tech/network/websocket/#message-sending-and-operation-protocol","title":"Message Sending and Operation Protocol","text":""},{"location":"tech/network/websocket/#sendmessage-c2s","title":"SendMessage (C2S)","text":""},{"location":"tech/network/websocket/#description_35","title":"Description","text":"<p>Send a message.</p>"},{"location":"tech/network/websocket/#parameters_35","title":"Parameters","text":"Parameter Name Type Description data JSON None type string Message type clientId number Client message ID serializedContent string Serialized message body timestamp number Timestamp type Description Text Text message File File message Image Image message Voice Voice message Transfer Forward message Revoked Recall message MentionText Mention message ReplyText Reply message"},{"location":"tech/network/websocket/#example_35","title":"Example","text":"<pre><code>{\n    \"command\": \"SendMessage\",\n    \"data\": {\n        \"chatId\": 4,\n        \"clientId\": 1,\n        \"serializedContent\": \"\\\"Hello\\\"\",\n        \"timestamp\": 1685192622888,\n        \"type\": \"Text\"\n    }\n}\n</code></pre>"},{"location":"tech/network/websocket/#sendmessageresponse-s2c","title":"SendMessageResponse (S2C)","text":""},{"location":"tech/network/websocket/#description_36","title":"Description","text":"<p>Server response to client's message sending request.</p>"},{"location":"tech/network/websocket/#parameters_36","title":"Parameters","text":"Parameter Name Type Description data JSON None state string Response status clientId number Client message ID chatId number Chat ID inChatId number Message ID timestamp number Timestamp state Description Success Successful response LengthLimitExceeded Message too long UserNotInChat User not in chat UserNotLoggedIn User not logged in ServerError Server error"},{"location":"tech/network/websocket/#example_36","title":"Example","text":"<pre><code>{\n    \"command\": \"SendMessageResponse\",\n    \"data\": {\n        \"state\": \"Success\",\n        \"clientId\": 1,\n        \"chatId\": 4,\n        \"inChatId\": 52,\n        \"timestamp\": 1685192616\n    }\n}\n</code></pre> <pre><code>{\n    \"command\": \"SendMessageResponse\",\n    \"data\": {\n        \"state\": \"UserNotInChat\"\n    }\n}\n</code></pre>"},{"location":"tech/network/websocket/#revokemessage-c2s","title":"RevokeMessage (C2S)","text":""},{"location":"tech/network/websocket/#description_37","title":"Description","text":"<p>Recall a message.</p>"},{"location":"tech/network/websocket/#parameters_37","title":"Parameters","text":"Parameter Name Type Description data JSON None chatId number Chat ID inChatId number Message ID method string Recall method method Description Sender Sender recalls their own message GroupAdmin Group chat admin recalls message GroupOwner Group owner recalls message"},{"location":"tech/network/websocket/#example_37","title":"Example","text":"<pre><code>{\n    \"command\": \"RevokeMessage\",\n    \"data\": {\n        \"chatId\": 4,\n        \"inChatId\": 52,\n        \"method\": \"Sender\"\n    }\n}\n</code></pre>"},{"location":"tech/network/websocket/#revokemessageresponse-s2c","title":"RevokeMessageResponse (S2C)","text":""},{"location":"tech/network/websocket/#description_38","title":"Description","text":"<p>Server response to recall request.</p>"},{"location":"tech/network/websocket/#parameters_38","title":"Parameters","text":"Parameter Name Type Description data JSON None state string Response status chatId number Chat ID inChatId number Message ID state Description Success Successful response TimeLimitExceeded Unable to recall due to timeout PermissionsDenied No permission to recall this message MessageNotExisted Message does not exist"},{"location":"tech/network/websocket/#example_38","title":"Example","text":"<pre><code>{\n    \"command\": \"RevokeMessageResponse\",\n    \"data\": {\n        \"state\": \"Success\",\n        \"chatId\": 4,\n        \"inChatId\": 50\n    }\n}\n</code></pre>"},{"location":"tech/network/websocket/#request-sending-and-handling-protocol","title":"Request Sending and Handling Protocol","text":""},{"location":"tech/network/websocket/#sendrequest-c2s","title":"SendRequest (C2S)","text":""},{"location":"tech/network/websocket/#description_39","title":"Description","text":"<p>Send requests such as adding friends or applying to join a group.</p>"},{"location":"tech/network/websocket/#parameters_39","title":"Parameters","text":"Parameter Name Type Description data JSON None clientId number Client message ID content JSON Request body content.type string Request type content.receiverId number(opt) Receiver ID for the request content.chatId number(opt) Chat ID for the request message string Request verification message content.type Description MakeFriend Add friend JoinGroup Apply to join group GroupInvitation Group invitation InvitedJoinGroup Group invitation review"},{"location":"tech/network/websocket/#example_39","title":"Example","text":"<pre><code>{\n    \"command\": \"SendRequest\",\n    \"data\": {\n        \"message\": \"Add me as a friend\",\n        \"clientId\": 1,\n        \"content\": {\n            \"type\": \"MakeFriend\",\n            \"receiverId\": 15\n        }\n    }\n}\n</code></pre>"},{"location":"tech/network/websocket/#sendrequestresponse-s2c","title":"SendRequestResponse (S2C)","text":""},{"location":"tech/network/websocket/#description_40","title":"Description","text":"<p>Server response to the request sending request.</p>"},{"location":"tech/network/websocket/#parameters_40","title":"Parameters","text":"Parameter Name Type Description data JSON None state string Response status clientId number Client message ID reqId number(opt) Request ID (if successful) state Description Success Successful response ServerError Server error"},{"location":"tech/network/websocket/#example_40","title":"Example","text":"<pre><code>{\n    \"command\": \"SendRequestResponse\",\n    \"data\": {\n        \"state\": \"Success\",\n        \"clientId\": 1,\n        \"reqId\": 15\n    }\n}\n</code></pre>"},{"location":"tech/network/websocket/#solverequest-c2s","title":"SolveRequest (C2S)","text":""},{"location":"tech/network/websocket/#description_41","title":"Description","text":"<p>Handle a request.</p>"},{"location":"tech/network/websocket/#parameters_41","title":"Parameters","text":"Parameter Name Type Description data JSON None reqId number Request ID answer string Action to take answer Description Refused Refuse the request Approved Approve the request"},{"location":"tech/network/websocket/#example_41","title":"Example","text":"<pre><code>{\n    \"command\": \"SolveRequest\",\n    \"data\": {\n        \"reqId\": 15,\n        \"answer\": \"Refused\"\n    }\n}\n</code></pre>"},{"location":"tech/network/websocket/#solverequestresponse-s2c","title":"SolveRequestResponse (S2C)","text":""},{"location":"tech/network/websocket/#description_42","title":"Description","text":"<p>Server response to user's request handling.</p>"},{"location":"tech/network/websocket/#parameters_42","title":"Parameters","text":"Parameter Name Type Description data JSON None state string Response status reqId number Request ID state Description Success Successful response Nohandler User has no permission to handle the request"},{"location":"tech/network/websocket/#example_42","title":"Example","text":"<pre><code>{\n    \"command\": \"SolveRequestResponse\",\n    \"data\": {\n        \"state\": \"Success\",\n        \"reqId\": 10\n    }\n}\n</code></pre>"},{"location":"tech/network/websocket/#requeststateupdate-s2c","title":"RequestStateUpdate (S2C)","text":""},{"location":"tech/network/websocket/#description_43","title":"Description","text":"<p>Server sends an instruction to the client to update the request state.</p>"},{"location":"tech/network/websocket/#parameters_43","title":"Parameters","text":"Parameter Name Type Description data JSON N/A state string Updated state reqId number Request ID"},{"location":"tech/network/websocket/#example_43","title":"Example","text":"<pre><code>{\n    \"command\": \"RequestStateUpdate\",\n    \"data\": {\n        \"state\": \"Solved\",\n        \"reqId\": 10\n    }\n}\n</code></pre>"},{"location":"tech/network/websocket/#unfriend-protocol","title":"Unfriend Protocol","text":""},{"location":"tech/network/websocket/#unfriend-c2s","title":"Unfriend (C2S)","text":""},{"location":"tech/network/websocket/#description_44","title":"Description","text":"<p>Unfriend a user.</p>"},{"location":"tech/network/websocket/#parameters_44","title":"Parameters","text":"Parameter Name Type Description data number ID of the friend to be removed"},{"location":"tech/network/websocket/#example_44","title":"Example","text":"<pre><code>{\n    \"command\": \"Unfriend\",\n    \"data\": 15\n}\n</code></pre>"},{"location":"tech/network/websocket/#unfriendresponse-s2c","title":"UnfriendResponse (S2C)","text":""},{"location":"tech/network/websocket/#description_45","title":"Description","text":"<p>Server response to the client's unfriend request.</p>"},{"location":"tech/network/websocket/#parameters_45","title":"Parameters","text":"Parameter Name Type Description state string Response status chatId number(opt) Chat ID (if successful) state Description Success Successful response NotFriend They are not friends"},{"location":"tech/network/websocket/#example_45","title":"Example","text":"<pre><code>{\n    \"command\": \"UnfriendResponse\",\n    \"data\": {\n        \"state\": \"Success\",\n        \"chatId\": 5\n    }\n}\n</code></pre>"},{"location":"user/deploy/server/","title":"Deploy","text":"<p>TODO</p>"},{"location":"user/help/web/","title":"User Manual","text":"<p>Thank you for using DMail!</p> <p>Platform URL: DMail | Instant Messaging System</p>"},{"location":"user/help/web/#tab-bar","title":"Tab Bar","text":""},{"location":"user/help/web/#account-management","title":"Account Management","text":"<ol> <li>When registering, please bind an email for registration, and you can use that email to retrieve your password.</li> <li>Change password: Personal homepage &gt;&gt; Change password, receive a verification code via email to change the password.</li> <li>Account cancellation: Personal homepage &gt;&gt; Account cancellation, receive a verification code via email to cancel the account.</li> <li>Log out: Personal homepage &gt;&gt; Log out, to log out of the current account.</li> </ol>"},{"location":"user/help/web/#personal-information-management","title":"Personal Information Management","text":"<p>Click on the profile photo to enter the personal homepage and modify or complete the avatar and nickname information.</p>"},{"location":"user/help/web/#friend-management","title":"Friend Management","text":""},{"location":"user/help/web/#add-friends","title":"Add Friends","text":"<p>Address book &gt;&gt; Add friends (or Request list &gt;&gt; Add friends), search for friends by user ID and send a verification message.</p>"},{"location":"user/help/web/#delete-friends","title":"Delete Friends","text":"<p>Click on the friend's profile photo to enter the personal page, and click on [Delete Friend].</p> <p></p>"},{"location":"user/help/web/#find-friends","title":"Find Friends","text":"<p>Contacts &gt;&gt; Find users, search for users in the friend list by username.</p>"},{"location":"user/help/web/#friend-information","title":"Friend Information","text":"<p>Click on the friend's profile photo to view the friend's user ID.</p>"},{"location":"user/help/web/#add-remark","title":"Add Remark","text":"<p>In the [Contacts], double-click on the friend's name to add or change the remark.</p>"},{"location":"user/help/web/#group-chat","title":"Group Chat","text":""},{"location":"user/help/web/#create-group-chat","title":"Create Group Chat","text":"<p>You can create a group chat in two ways:</p> <ol> <li>Contacts &gt;&gt; Create group chat, set the group chat name to generate a new group chat.</li> <li>In the private chat interface, click on [New Members] to expand the private chat into a group chat.</li> </ol>"},{"location":"user/help/web/#join-group-chat","title":"Join Group Chat","text":"<p>Contacts &gt;&gt; Add group chat, search for the group chat by group chat ID and send a verification message.</p>"},{"location":"user/help/web/#group-chat-information","title":"Group Chat Information","text":"<p>Click on the group chat avatar to view the group chat information, including the group chat ID, group member composition, and historical group notice. You can also choose to exit the group chat.</p> <p></p>"},{"location":"user/help/web/#group-chat-management","title":"Group Chat Management","text":""},{"location":"user/help/web/#invite-to-group","title":"Invite to Group","text":"<p>Click on [New Members] to invite friends from the list to join the group chat. They can join the group chat only after being approved by the group owner or administrator.</p>"},{"location":"user/help/web/#group-notice","title":"Group Notice","text":"<p>Group owners and administrators can publish group notice.</p>"},{"location":"user/help/web/#group-message-management","title":"Group Message Management","text":"<p>Group owners and administrators can ignore time restrictions to recall messages sent by group members.</p>"},{"location":"user/help/web/#message-settings-and-chat-settings","title":"Message Settings and Chat Settings","text":"<ol> <li> <p>You can set desktop message reminders and message notification sounds in [Personal homepage].</p> </li> <li> <p>In the [Chats], click on the top right corner of the conversation to set up two-factor authentication, enable/disable message notifications, and pin/unpin the chat.</p> </li> </ol> <p></p>"},{"location":"user/help/web/#theme-settings","title":"Theme Settings","text":"<p>You can set the theme color in [Personal homepage], with 5 theme colors that can be freely combined with dark/light mode.</p>"},{"location":"user/help/web/#external-services","title":"External Services","text":"<p>In [Settings], you can set up external extension services, including foreign language translation and voice recognition functions.</p> <p></p>"},{"location":"zh/#_1","title":"\u7b80\u4ecb","text":"<p>dMail \u662f\u4e00\u4e2a\u5f00\u6e90\u7684\u5373\u65f6\u901a\u8baf\u7cfb\u7edf\uff0c\u65e8\u5728\u63d0\u4f9b\u4e00\u4e2a\u9ad8\u6548\u3001\u5b89\u5168\u3001\u6613\u4e8e\u4f7f\u7528\u7684\u79c1\u6709\u5316IM\u90e8\u7f72\u65b9\u6848\u3002</p> <p>\u6211\u4eec\u5e0c\u671b\u672c\u9879\u76ee\u80fd\u591f\u8ba9\u4e2a\u4eba\u6216\u8005\u4e2d\u5c0f\u7ec4\u7ec7\u80fd\u591f\u4ee5\u8f83\u4f4e\u6210\u672c\u90e8\u7f72\u4e00\u4e2a\u80fd\u591f\u670d\u52a1\u76f8\u5bf9\u591a\u7528\u6237\u7684\u5373\u65f6\u901a\u8baf\u7cfb\u7edf\uff0c\u5e76\u4e14\u63d0\u4f9b\u8db3\u591f\u7684\u5b89\u5168\u6027\uff0c\u4ee5\u6b64\u907f\u514d\u516c\u6709IM\u670d\u52a1\u53ef\u80fd\u7684\u4fe1\u606f\u6cc4\u9732\u4e0e\u5916\u90e8\u5ba1\u67e5\u3002</p> <p>\u76ee\u524d\u4f7f\u7528<code>Rust</code>\u8bed\u8a00\u7f16\u5199\u4e86\u8fde\u63a5\u670d\u52a1\u7aef\uff0c\u4e0e<code>Minio</code>\u3001<code>Coturn</code>\u3001<code>Pika</code>\u7b49\u5f00\u6e90\u9879\u76ee\u5171\u540c\u6784\u6210\u4e86\u5b8c\u6574\u7684\u540e\u7aef\u670d\u52a1\u3002 \u5e76\u57fa\u4e8e<code>Postman Template</code>\u5b9e\u73b0\u4e86\u591a\u5e73\u53f0\u517c\u5bb9\u7684Web\u9875\u9762\uff0c\u4f7f\u7528<code>Websocket</code>\u4e0e\u540e\u7aef\u670d\u52a1\u901a\u4fe1\u3002</p> <p>\u6e05\u534e\u5927\u5b662023\u5e74\u6625\u5b63\u5b66\u671f\u8f6f\u4ef6\u5de5\u7a0b\u9879\u76ee\u3002</p>"},{"location":"zh/#_2","title":"\u9879\u76ee\u4ed3\u5e93","text":"<p>\u8bfe\u7a0b\u7ed3\u675f\u540e\u5728Github\u4e0a\u5f00\u6e90\u8fde\u63a5\u670d\u52a1\u7aef\u3002</p>"},{"location":"zh/#_3","title":"\u7ef4\u62a4\u4eba\u5458","text":"<p>@r1ntaro \u5ba2\u6237\u7aef\u3001\u670d\u52a1\u7aef\u4e3b\u8981\u6846\u67b6\uff0c\u7279\u6b8a\u529f\u80fd\u70b9\u5b9e\u65bd</p> <p>@lizengyu21 Web\u7aef\u529f\u80fd\u70b9\u5b9e\u73b0 </p> <p>@francis \u8fde\u63a5\u670d\u52a1\u7aef\u529f\u80fd\u70b9\u5b9e\u73b0</p> <p>@yanjx2021 Web\u7aef\u754c\u9762\u7f8e\u5316\u3001CSS\u7f16\u5199</p> <p>@Claire \u6587\u6863\u4e0e\u6587\u6863\u672c\u5730\u5316</p>"},{"location":"zh/#_4","title":"\u9e23\u8c22","text":"<p>@LJSthu \u6211\u4eec\u8f6f\u5de5\u7ec4\u7684\u52a9\u6559\uff01\u4eba\u975e\u5e38nice\uff0c\u4f46\u662f\u4ed6\u660e\u5e74\u4e0d\u5f53\u8f6f\u5de5\u52a9\u6559\u529b\uff0c\u4f60\u4eec\u9009\u4e0d\u5230\u4e86\uff0c\u54c8\u54c8\u54c8\u3002</p> <p>@zhangzuo21 &amp; @ZengGuanning \u4e0e\u6211\u4eec\u7ec4\u4e86\u516d\u4eba\u8f6f\u5de5\u961f\u540eSplit\u6210507A\u4e8c\u961f\uff0c\u5728PRJ2\u4e0d\u5e78\u88ab\u5377\u9000\u8bfe\uff0c23\u79cb\u8f6f\u5de5\u5377\u571f\u91cd\u6765\uff01</p> <p>@francis \u5e73\u8f6c\u4e00\u5b66\u671f\u4fee30+\u5b66\u5206\uff0c\u771f\u6b63\u7684\u5bc4\u7ecf\u8d85\u4eba\u3002</p> <p>@r1ntaro \u4f60\u8bf4\u7684\u5bf9\uff0c\u4f46\u662f\u6211\u4e00\u4e2a\u81ed\u5199\u6e38\u620f\u7684\u600e\u4e48\u6765\u5377\u8f6f\u5de5\uff0c\u5377\u5b8c\u8fd8\u80fd\u62ff\u300cB+\u300d\u5462\uff1f</p> <p>@lizengyu21 \u6218\u7565\u7ea7\u7cbe\u82f1\u5395\u6240\u4fee\u5efa\u8005\u3001\u5148\u5377\u5e26\u52a8\u540e\u5377\u7684\u5b9e\u8df5\u8005\u3001\u77ed\u6682\u7684\u4e00\u751f\u4e2d\u53ea\u6709\u300c\u8f6f\u4ef6\u5de5\u7a0b\u300d\u300c\u5973\u670b\u53cb\u300d\u4e24\u4ef6\u4e8b\u3002</p> <p>@zhangzhenhe \u53cb\u60c5\u51fa\u6f14\u4e86\u6211\u4eec\u7684\u77ed\u89c6\u9891\uff0c\u548c\u5fc5\u80dc\u5ba2\u300c\u548c\u725b\u81f3\u5c0a\u62ab\u8428\u300d\u7684\u63a8\u5e7f\u89c6\u9891\u3002</p> <p>@yanjx2021 CSS\u9ad8\u624b\u3001jQuery\u7684\u5fe0\u5b9e\u7528\u6237\u300105\u5e74\u7eaf\u60c5\u7537\u9ad8\u7bee\u7403\u5f1f\u5f1f\u3002</p> <p>@Claire \u5728\u8f6f\u4ef6\u5de5\u7a0b\u8bfe\u4e0a\u5b66\u4e60\u82f1\u8bed\u548c\u753b\u56fe\u662f\u4e00\u79cd\u4ec0\u4e48\u6837\u7684\u4f53\u9a8c\uff1f</p>"},{"location":"zh/tech/design/","title":"\u8f6f\u4ef6\u8bbe\u8ba1\u6587\u6863","text":""},{"location":"zh/tech/design/#_2","title":"\u9879\u76ee\u80cc\u666f","text":"<p>\u5f53\u4e0b\uff0c\u5fae\u4fe1\u3001Telegram\u7b49\u5373\u65f6\u901a\u8baf\u670d\u52a1\u5df2\u7ecf\u6210\u4e3a\u4e86\u4e2a\u4eba\u6216\u8005\u7ec4\u7ec7\u5728\u4e92\u8054\u7f51\u4e0a\u8fdb\u884c\u4fe1\u606f\u4ea4\u6362\u7684\u91cd\u8981\u5de5\u5177\u3002\u7136\u800c\uff0c\u5bf9\u7ec8\u7aef\u7528\u6237\u800c\u8a00\uff0c\u4f7f\u7528\u516c\u6709IM\u8fdb\u884c\u4fe1\u606f\u4ea4\u6d41\u548c\u6570\u636e\u4f20\u8f93\u65f6\u9762\u4e34\u7740\u6781\u9ad8\u7684\u4fe1\u606f\u5916\u6cc4\u98ce\u9669\uff0c\u516c\u6709IM\u4e2d\u7684\u804a\u5929\u4fe1\u606f\u3001\u6587\u4ef6\u3001\u6570\u636e\u5747\u4fdd\u5b58\u5728\u8fd0\u8425\u5546\u624b\u4e2d\uff0c\u7528\u6237\u65e0\u6cd5\u8fdb\u884c\u6709\u6548\u7ba1\u63a7\u3002\u5176\u4e2d\u7edd\u5927\u591a\u6570\u7684\u516c\u6709IM\u56e0\u5176\u76c8\u5229\u6027\u8d28\uff0c\u5ba2\u6237\u7aef\u4e0e\u670d\u52a1\u7aef\u5747\u4e3a\u95ed\u6e90\uff0c\u7528\u6237\u4e5f\u65e0\u4ece\u5f97\u77e5\u8fd0\u8425\u5546\u5173\u4e8e\u4fe1\u606f\u5b89\u5168\u7684\u627f\u8bfa\u662f\u5426\u6709\u6548\u3002\u6240\u4ee5\uff0c\u4f7f\u7528\u5f00\u6e90\u9879\u76ee\u90e8\u7f72\u79c1\u6709\u5316\u7684IM\u670d\u52a1\uff0c\u624d\u80fd\u6700\u5927\u7a0b\u5ea6\u7684\u4fdd\u62a4\u7528\u6237\u7684\u4fe1\u606f\u5b89\u5168\u3002</p> <p>\u4f46\u662f\u76ee\u524d\u5f00\u6e90\u793e\u533a\u4e2d\u5373\u65f6\u901a\u8baf\u76f8\u5173\u7684\u751f\u6001\u5e76\u4e0d\u5b8c\u5584\uff0c\u9879\u76ee\u6570\u91cf\u8f83\u5c11\u3002\u672c\u9879\u76ee\u5728\u8fd9\u79cd\u80cc\u666f\u4e0b\uff0c\u8bd5\u56fe\u7ed9\u51fa\u4e00\u4e2a\u5728\u90e8\u7f72\u6210\u672c\u3001\u53ef\u9760\u6027\u3001\u6027\u80fd\u8fd9\u4e09\u8005\u4e2d\u53d6\u5f97\u5e73\u8861\u7684\u4e00\u4e2a\u79c1\u6709IM\u90e8\u7f72\u65b9\u6848\u3002</p>"},{"location":"zh/tech/design/#_3","title":"\u9879\u76ee\u76ee\u6807","text":"<p>\u4e3a\u7528\u6237\u63d0\u4f9b\u4e00\u4e2a\u6613\u4e8e\u90e8\u7f72\u3001\u9ad8\u6027\u80fd\u3001\u5b89\u5168\u7684\u79c1\u6709IM\u90e8\u7f72\u65b9\u6848\u3002</p>"},{"location":"zh/tech/design/#_4","title":"\u6280\u672f\u9009\u578b\u6982\u89c8","text":"<p>\u5bf9\u4e8e\u591a\u6570\u4e2d\u5c0fIM\u90e8\u7f72\u8005\u800c\u8a00\uff0c\u65e0\u6cd5\u627f\u62c5\u5206\u5e03\u5f0f\u90e8\u7f72\u7684\u6210\u672c\uff0c\u56e0\u6b64\u5355\u673a\u6027\u80fd\u5c31\u5341\u5206\u91cd\u8981\uff0c\u9700\u8981\u80fd\u5728\u4e00\u4e2a\u8fde\u63a5\u670d\u52a1\u5668\u5904\u7406\u5927\u91cf\u7684\u5e76\u53d1\u8bf7\u6c42\u3002\u53e6\u4e00\u65b9\u9762\uff0c\u7cfb\u7edf\u4e5f\u9700\u8981\u6709\u8db3\u591f\u7684\u6a2a\u5411\u6269\u5c55\u80fd\u529b\uff0c\u6ee1\u8db3\u670d\u52a1\u66f4\u591a\u7528\u6237\u7684\u9700\u6c42\u3002</p> <p>\u56e0\u6b64\uff0c\u603b\u4f53\u7684\u6280\u672f\u6808\u9009\u578b\u601d\u8def\u662f\u727a\u7272\u5f00\u53d1\u901f\u5ea6\u4e0e\u529f\u80fd\u4e0a\u7684\u4e30\u5bcc\u6027\uff0c\u6362\u53d6\u6027\u80fd\u3002</p> <p>\u8fde\u63a5\u670d\u52a1\u7aef\u7684\u5f00\u53d1\u8bed\u8a00\u9009\u7528<code>Rust</code>\u3002\u6700\u4f18\u5148\u7684\u8003\u8651\u80af\u5b9a\u662f\u6027\u80fd\u4e0e\u5185\u5b58\u5b89\u5168\uff0c\u4f46\u9664\u6b64\u4e4b\u5916\uff0c<code>Rust</code>\u5b8c\u5584\u7684\u9519\u8bef\u5904\u7406\u673a\u5236\u4e5f\u80fd\u63d0\u9ad8\u4ee3\u7801\u8d28\u91cf\uff1b\u4f5c\u4e3a\u7f16\u8bd1\u578b\u8bed\u8a00\uff0c\u4e5f\u964d\u4f4e\u4e86\u7528\u6237\u90e8\u7f72\u6210\u672c\uff0c\u65e0\u9700\u989d\u5916\u5b89\u88c5\u8fd0\u884c\u65f6\u6216\u8005\u590d\u6742\u7684\u4f9d\u8d56\u3002\u5f3a\u5927\u7684\u6cdb\u578b\u80fd\u529b\u505a\u5230\u4e86\u96f6\u8fd0\u884c\u65f6\u6210\u672c\u62bd\u8c61\uff0c\u4e3b\u8981\u4ee3\u7801\u7684\u62bd\u8c61\u4f9d\u8d56\u4e8e\u6cdb\u578b\u4e0e\u6761\u4ef6\u7f16\u8bd1\uff0c\u800c\u975e\u865a\u8868\u3002</p> <p>Web\u7aef\u9009\u7528<code>React</code>\u6846\u67b6\uff0c\u4f7f\u7528<code>Typescript</code>\u4f5c\u4e3a\u5f00\u53d1\u8bed\u8a00\uff0c<code>Mobx</code>\u4e3a\u72b6\u6001\u7ba1\u7406\u5e93\u3002\u76f8\u5bf9\u4e8e\u4f20\u7edfWeb\u5e94\u7528\u7684B/S\u67b6\u6784\uff0c\u5373\u65f6\u901a\u8baf\u7cfb\u7edf\u4f5c\u4e3a\u4e00\u4e2a\u5355\u9875\u5e94\u7528\u7a0b\u5e8f\u5176\u5b9e\u66f4\u50cf\u4e00\u4e2aC/S\u7a0b\u5e8f\uff0c<code>React</code>\u539f\u751f\u7684\u5199\u6cd5\u96be\u4ee5\u505a\u5230\u6570\u636e\u4e0e\u6e32\u67d3\u7684\u5206\u79bb\uff0c\u7d2f\u8ba1\u8db3\u591f\u591a\u7684\u529f\u80fd\u4ee3\u7801\u540e\u4f1a\u5bfc\u81f4\u9879\u76ee\u4ee3\u7801\u53ef\u7ef4\u62a4\u6027\u5927\u5927\u4e0b\u964d\u3002\u53e6\u5916\uff0c\u7531\u4e8e\u6e38\u89c8\u5668\u7684\u9650\u5236\uff0c\u53ea\u80fd\u4f7f\u7528<code>WebSocket</code>\u4fdd\u6301\u957f\u8fde\u63a5\uff0c\u6240\u4ee5\u5728<code>WebSocket</code>\u4e0a\u4e8c\u6b21\u5c01\u88c5\u4e86\u534f\u8bae\u3002</p> <p>\u540e\u7aef\u6570\u636e\u5e93\u5c42\u5b9e\u73b0\u4e86\u5b8c\u6574\u7684\u62bd\u8c61\uff0c\u4f7f\u7528\u6761\u4ef6\u7f16\u8bd1\u5207\u6362\u4e0d\u540c\u7684\u6570\u636e\u5e93\u3002\u4f46\u7531\u4e8e\u8bfe\u7a0b\u65f6\u95f4\u9650\u5236\uff0c\u4ec5\u517c\u5bb9\u4e86<code>Redis</code>\u534f\u8bae\u6570\u636e\u5e93\u3002\u76ee\u524d\u5b9e\u9645\u7528\u4e8e\u90e8\u7f72\u7684<code>Pika</code>\uff0c\u5f00\u6e90\u7684\u53ef\u6301\u4e45\u5316\u517c\u5bb9<code>Redis</code>\u534f\u8bae\u7684\u5206\u5e03\u5f0f\u6570\u636e\u5e93\u3002SQL\u867d\u7136\u63d0\u4f9b\u4e86\u4e30\u5bcc\u7684\u529f\u80fd\uff0c\u4f46\u662fQPS\u8fdc\u8fdc\u65e0\u6cd5\u6ee1\u8db3\u5373\u65f6\u901a\u8baf\u7684\u9700\u6c42\uff0c\u5206\u5e03\u5f0f\u6269\u5c55\u4e5f\u9700\u8981\u66f4\u6539\u540e\u7aef\u903b\u8f91\uff0c\u624b\u52a8\u53bb\u505a\u5206\u5e93\u5206\u8868\u7b49\u903b\u8f91\uff0c\u65e0\u6cd5\u50cfKV\u6570\u636e\u5e93\u4e00\u6837\u65b9\u4fbf\u5730\u90e8\u7f72\u5206\u5e03\u5f0f\u3002</p>"},{"location":"zh/tech/design/#_5","title":"\u6280\u672f\u9009\u578b\u5206\u6790","text":""},{"location":"zh/tech/design/#_6","title":"\u8fde\u63a5\u670d\u52a1\u7aef\u67b6\u6784\u5206\u6790","text":"<p>\u9009\u7528<code>Actix Web</code>\u4f5c\u4e3aWeb\u670d\u52a1\u7684\u6846\u67b6\uff0c\u540c\u65f6\u6240\u6709\u9700\u8981\u7b49\u5f85IO\u7684\u64cd\u4f5c\u5168\u90e8\u4e3a\u5f02\u6b65\u5b9e\u73b0\uff0c\u65e0\u963b\u585e\u3002</p> <p>\u8fde\u63a5\u670d\u52a1\u7aef\u540c\u65f6\u5b58\u5728\u4e24\u4e2a<code>Tokio</code>\u8fd0\u884c\u65f6\uff0c\u5206\u522b\u8fd0\u884c\u5728\u4e24\u4e2a\u7ebf\u7a0b\u6c60\u4e0a\u3002</p> <p>\u7b2c\u4e00\u4e2a\u7ebf\u7a0b\u6c60\u8d1f\u8d23\u5904\u7406\u8fde\u63a5\u548c\u7b80\u5355\u8bf7\u6c42\uff0c<code>Actix</code>\u6846\u67b6\u63d0\u4f9b\u7684Actor\u4e5f\u8fd0\u884c\u5728\u8fd9\u4e2a\u7ebf\u7a0b\u6c60\u4e0a\u3002\u7528\u6237\u8fde\u63a5\u6240\u4f7f\u7528\u7684<code>Actor</code>\u5f02\u6b65\u6a21\u578b\u53ef\u4ee5\u4fdd\u8bc1\u7528\u6237\u7ebf\u7a0b\u5373\u4fbf\u53d1\u751f\u5d29\u6e83\u4e5f\u4e0d\u4f1a\u5f71\u54cd\u540e\u7aef\u7684\u6b63\u5e38\u670d\u52a1\uff0c\u540c\u65f6\u63d0\u4f9b\u4e86\u65b9\u4fbf\u7684\u5206\u5e03\u5f0f\u62d3\u5c55\u65b9\u6848\u3002</p> <p>\u7b2c\u4e8c\u4e2a\u7ebf\u7a0b\u6c60\u8d1f\u8d23\u9ad8\u8d1f\u8f7d\u4efb\u52a1\uff0c\u4f8b\u5982\u8bfb\u6269\u6563\u7684\u6d88\u606f\u62c9\u53d6\u548c\u3002\u8fd9\u79cd\u8d1f\u8f7d\u4efb\u52a1\u7684\u7279\u70b9\u5728\u4e8e\u9664\u4e86\u5927\u91cf\u8ba1\u7b97\u548c\u5b57\u7b26\u4e32\u62fc\u63a5\u4e4b\u5916\uff0c\u8fd8\u9700\u8981\u5927\u91cf\u7684\u65f6\u95f4\u7b49\u5f85IO\u3002\u6211\u4eec\u4e0d\u5e0c\u671b\u8fd9\u79cd\u4efb\u52a1\u4f1a\u5f71\u54cd\u7528\u6237\u8fde\u63a5\uff0c\u9700\u8981\u653e\u5728\u5355\u72ec\u7684\u7ebf\u7a0b\u6c60\u4e0a\u8fd0\u884c\uff0c\u4f46\u662f\u6734\u7d20\u7684\u7ebf\u7a0b\u6c60\u53ea\u80fd\u540c\u6b65\u8fd0\u884c\u3002\u56e0\u6b64\u6700\u7ec8\u9009\u62e9\u4e86\u518d\u542f\u52a8\u4e00\u4e2a<code>Tokio</code>\u8fd0\u884c\u65f6\u53bb\u8fd0\u884c\u8fd9\u4e9b\u4efb\u52a1\u3002\u5f53\u7136\u5728\u6838\u5fc3\u6570\u4e0d\u591f\u7684\u673a\u5668\u4e0a\u8fd9\u5f88\u6709\u53ef\u80fd\u662f\u4e00\u4e2a\u8d1f\u4f18\u5316\u3002</p> <p>\u8d1f\u8d23\u7ef4\u62a4\u8fde\u63a5\u7684\u54c8\u5e0c\u8868\u4f7f\u7528\u4e86\u5206\u5e03\u5f0f\u9501\uff0c\u5c3d\u53ef\u80fd\u5730\u51cf\u5c11\u4e86\u9501\u51b2\u7a81\u3002\u5176\u5b9e\u9664\u8fd9\u4e2a\u54c8\u5e0c\u8868\u5916\uff0c\u540e\u7aef\u670d\u52a1\u51e0\u4e4e\u662f\u65e0\u72b6\u6001\u7684\uff0c\u4fe1\u606f\u5168\u90e8\u5b58\u50a8\u5728\u6570\u636e\u5e93\u4e0a\u3002</p> <p>\u8fd9\u4e9b\u8bbe\u8ba1\u7ed9\u8fde\u63a5\u670d\u52a1\u7aef\u63d0\u4f9b\u4e86\u8db3\u591f\u5f3a\u7684\u6a2a\u5411\u6269\u5c55\u80fd\u529b\uff0c\u5355\u673a\u6838\u5fc3\u6570\u7684\u63d0\u9ad8\u53ef\u4ee5\u4fdd\u8bc1\u6027\u80fd\u7684\u63d0\u5347\u3002\u5355\u6b21\u8bf7\u6c42\u5904\u7406\u901f\u5ea6\u7684\u4e3b\u8981\u74f6\u9888\u5176\u5b9e\u662f\u5728\u6570\u636e\u5e93\u7aef\uff0c\u57fa\u4e8e\u8fd9\u4e2a\u4e8b\u5b9e\uff0c\u5206\u5e03\u5f0f\u90e8\u7f72\u7684\u6570\u636e\u5e93\u7ed3\u5408\u5355\u673a\u7684\u8fde\u63a5\u670d\u52a1\u7aef\u5373\u53ef\u5904\u7406\u5927\u91cf\u7684\u7528\u6237\u8bf7\u6c42\u3002</p>"},{"location":"zh/tech/design/#_7","title":"\u901a\u4fe1\u534f\u8bae\u8bbe\u8ba1","text":"<p>\u7531\u4e8e\u79c1\u6709\u90e8\u7f72\u7684IM\u670d\u52a1\u53ef\u80fd\u7531\u4e8e\u5404\u79cd\u539f\u56e0\u6ca1\u6709\u57df\u540d\u4ece\u800c\u65e0\u6cd5\u8fdb\u884cHTTPS\u8bc1\u4e66\u7b7e\u540d\uff0c\u6211\u4eec\u81ea\u5df1\u5b9e\u73b0\u4e86\u4e00\u5957\u7c7b\u4f3cHTTPS\u7684\u52a0\u5bc6\u534f\u8bae\uff0c\u5c3d\u7ba1\u6ca1\u6709\u7b2c\u4e09\u65b9\u7b7e\u540d\uff0c\u5b83\u65e0\u6cd5\u907f\u514d\u4e2d\u95f4\u4eba\u653b\u51fb\u3002\u76ee\u524d\u5728Secoder\u4e0e\u817e\u8baf\u4e91\u4e0a\u90e8\u7f72\u7684\u6d4b\u8bd5\u670d\u52a1\u540c\u65f6\u542f\u7528\u4e86\u8fd9\u5957\u52a0\u5bc6\u534f\u8bae\u4e0eHTTPS\uff0c\u867d\u7136\u5728\u542f\u7528HTTPS\u540e\u5176\u5b9e\u5c31\u6ca1\u6709\u5fc5\u8981\u542f\u7528\u8fd9\u5957\u534f\u8bae\u4e86\u3002\uff08\u53e6\u5916\uff0c\u8fd9\u5957\u534f\u8bae\u589e\u5927\u4e86\u653b\u51fb\u8005\u7684\u8c03\u8bd5\u6210\u672c\uff0c\u60f3\u8981\u76f4\u63a5\u4e0e\u540e\u7aef\u901a\u4fe1\u9700\u8981\u81ea\u884c\u5b9e\u73b0\u8fd9\u5957\u52a0\u5bc6\u534f\u8bae\uff09</p> <p>\u5177\u4f53\u5730\uff0c\u5efa\u7acbWebSocket\u8fde\u63a5\u65f6\u5ba2\u6237\u7aef\u5411\u670d\u52a1\u7aef\u53d1\u9001RSA\u516c\u94a5\uff0c\u670d\u52a1\u7aef\u4f7f\u7528AES-GCM-128\u751f\u6210\u5bf9\u79f0\u52a0\u5bc6\u5bc6\u94a5\uff0c\u5e76\u4f7f\u7528\u7528\u6237\u7684RSA\u516c\u94a5\u52a0\u5bc6\u5bf9\u79f0\u79d8\u94a5\u53d1\u9001\u7ed9\u7528\u6237\uff0c\u5ba2\u6237\u7aef\u4f7f\u7528RSA\u79c1\u94a5\u89e3\u5bc6\u540e\uff0c\u4f7f\u7528\u5bf9\u79f0\u52a0\u5bc6\u5bc6\u94a5\u4ea4\u6362\u4fe1\u606f\u3002\u6b64\u540e\u6240\u6709\u4fe1\u606f\u5747\u4f1a\u901a\u8fc7\u52a0\u5bc6\u540e\u7684WebSocket\u4fe1\u9053\u53d1\u9001\uff0c\u4e0d\u4f1a\u518d\u8fdb\u884cHTTP\u8fde\u63a5\uff0c\u8fd9\u540c\u65f6\u4e5f\u63d0\u9ad8\u4e86\u670d\u52a1\u7aef\u6027\u80fd\u3002</p>"},{"location":"zh/tech/design/#_8","title":"\u6570\u636e\u5e93\u9009\u578b","text":"<p>\u4f20\u7edf\u7684Web\u5e94\u7528\u4e00\u822c\u4f1a\u4f7f\u7528SQL\u6570\u636e\u5e93\u5b58\u50a8\u4fe1\u606f\uff0c\u4f46\u5bf9\u4e8e\u4e00\u4e2aIM\u670d\u52a1\u6765\u8bb2\uff0cSQL\u7684QPS\u592a\u4f4e\uff0c\u5206\u5e03\u5f0f\u62d3\u5c55\u5f88\u9ebb\u70e6\uff0c\u9700\u8981\u624b\u52a8\u5206\u5e93\u5206\u8868\uff0c\u903b\u8f91\u4f1a\u4fb5\u5165\u4e1a\u52a1\u3002\u540c\u65f6\uff0c\u65e0\u8bba\u662f\u5199\u6269\u6563\u8fd8\u662f\u8bfb\u6269\u6563\uff0c\u90fd\u9700\u8981\u7ef4\u62a4\u5927\u91cf\u7684Timeline\uff0c\u5728SQL\u4e2d\u53ea\u80fd\u5728\u4e00\u4e2a\u8868\u683c\u5185\u5b58\u50a8\u591a\u4e2aTimeline\uff0c\u8fd9\u6837\u5bf9\u4e8e\u5355\u4e2aTimeline\u7684\u5199\u5165/\u8bfb\u53d6\u64cd\u4f5c\u90fd\u4f1a\u4e0e\u6574\u4e2a\u8868\u683c\u7684\u5bf9\u6570\u89c4\u6a21\u76f8\u5173\uff0c\u800c\u975e\u4ec5\u4e0e\u5355\u4e2aTimeline\u7684\u89c4\u6a21\u6709\u5173\u3002\u800cKV\u6570\u636e\u5e93\u53ef\u4ee5\u81ea\u7136\u5730\u628a\u8fd9\u4e9bTimeline\u5206\u5f00\uff0c\u5355\u6b21\u64cd\u4f5c\u7684\u590d\u6742\u5ea6\u66f4\u4f18\u3002\u4e5f\u6613\u4e8e\u652f\u6301\u5206\u5e03\u5f0f\uff0c\u53ef\u4ee5\u628a\u4e0d\u540c\u7684Timeline\u5206\u5e03\u5230\u4e0d\u540c\u7684\u673a\u5668\u4e0a\u3002\u7f3a\u70b9\u5728\u4e8e\u793e\u533a\u63d0\u4f9b\u7684\u5f00\u6e90\u5206\u5e03\u5f0fKV\u6570\u636e\u5e93\u666e\u904d\u4e0d\u652f\u6301\u4e8b\u52a1\uff0c\u5bf9\u6570\u636e\u7684\u4e25\u8083\u6027\u4e0d\u9ad8\u3002\u53e6\u5916\u4e00\u4e2a\u65b9\u6848\u662fSQL\u52a0\u4e0a<code>Redis</code>\u7f13\u5b58\u4f18\u5316\uff0c\u8fd9\u79cd\u65b9\u6848\u7684\u9ebb\u70e6\u4e4b\u5904\u5728\u4e8e\u5bf9\u7f13\u5b58\u7684\u66f4\u65b0\u3001\u67e5\u8be2\u3001\u5199\u5165\u4f1a\u5165\u4fb5\u4e1a\u52a1\u4ee3\u7801\uff0c\u5199\u8d77\u6765\u66f4\u9ebb\u70e6\u3002</p> <p>\u5b9e\u8df5\u4e2d\uff0c\u4f17\u591aKV\u6570\u636e\u5e93\u90fd\u517c\u5bb9<code>Redis</code>\u534f\u8bae\uff0c\u6211\u4eec\u4e5f\u56e0\u6b64\u9009\u62e9\u4e86<code>Redis</code>\u534f\u8bae\u3002\u76ee\u524d\u7ebf\u4e0a\u90e8\u7f72\u7684\u6d4b\u8bd5\u670d\u52a1\u4f7f\u7528\u7684\u662f360\u5f00\u6e90\u7684<code>Pika</code>\uff0c\u53e6\u5916\u4e00\u4e2a\u5907\u9009\u65b9\u6848\u662f\u817e\u8baf\u5f00\u6e90\u51fa\u6765\u7684<code>Tendis</code>\u3002</p>"},{"location":"zh/tech/design/#_9","title":"\u7f13\u5b58\u6761\u4ef6\u4e0b\u7684\u6570\u636e\u6269\u6563","text":"<p>Web\u7aef\u4f7f\u7528\u4e86<code>LocalForge</code>\u5bf9\u51e0\u4e4e\u5168\u90e8\u6570\u636e\u8fdb\u884c\u4e86\u7f13\u5b58\uff0c\u907f\u514d\u4e86\u53cd\u590d\u4ece\u670d\u52a1\u5668\u62c9\u53d6\uff0c\u540c\u65f6\u53ea\u6709\u7528\u6237\u771f\u6b63\u770b\u5230\u67d0\u4e9b\u4fe1\u606f\u65f6\u624d\u4f1a\u4ece\u670d\u52a1\u5668\u62c9\u53d6\u3002</p> <p>\u5b9e\u73b0\u7f13\u5b58\u540e\uff0c\u5ba2\u6237\u7aef\u7684\u903b\u8f91\u53d8\u6210\u300c\u5982\u679c\u672c\u5730\u6709\u8fd9\u6761\u6570\u636e\uff0c\u4fbf\u4e0d\u4ece\u670d\u52a1\u7aef\u62c9\u53d6\u300d\uff0c\u4f46\u5728\u5f88\u591a\u60c5\u51b5\u4e0b\uff0c\u8fd9\u6761\u6570\u636e\u5f80\u5f80\u4e0d\u662f\u300c\u4e0d\u53ef\u53d8\u7684\u300d\u3002\u6bd4\u5982\u8bf4\u4e00\u4e2a\u7528\u6237\u7684\u5934\u50cf\u548c\u6635\u79f0\uff0c\u8fd9\u79cd\u60c5\u51b5\u4e0b\u5ba2\u6237\u7aef\u5982\u679c\u4e0d\u518d\u62c9\u53d6\u5c31\u65e0\u6cd5\u4e0e\u8fdc\u7aef\u7684\u6700\u65b0\u6570\u636e\u4fdd\u6301\u540c\u6b65\u3002\u5bf9\u4e8e\u8fd9\u79cd\u53ef\u53d8\u6570\u636e\uff0c\u6211\u4eec\u4e0e\u5fae\u4fe1\u4e00\u81f4\uff0c\u7528\u6237\u70b9\u5f00\u5176\u4ed6\u7528\u6237\u7684\u5177\u4f53\u4fe1\u606f\u65f6\u518d\u91cd\u65b0\u4ece\u8fdc\u7aef\u62c9\u53d6\u6570\u636e\u3002</p> <p>\u53e6\u4e00\u4e2a\u9ebb\u70e6\u7684\u529f\u80fd\u70b9\u5728\u4e8e\u300c\u64a4\u56de\u300d\uff0c\u672c\u5730\u4efb\u4f55\u4e00\u6761\u5df2\u6709\u7684\u804a\u5929\u4fe1\u606f\uff0c\u90fd\u6709\u53ef\u80fd\u5728\u8fdc\u7aef\u5b9e\u9645\u4e0a\u4e5f\u88ab\u64a4\u56de\u3002\u5982\u679c\u64a4\u56de\u65f6\u5ba2\u6237\u7aef\u79bb\u7ebf\uff0c\u5ba2\u6237\u7aef\u5c31\u65e0\u6cd5\u5224\u65ad\u672c\u5730\u7684\u7f13\u5b58\u662f\u5426\u6709\u6548\uff0c\u5bfc\u81f4\u7f13\u5b58\u5931\u6548\u6bcf\u6b21\u90fd\u9700\u8981\u4ece\u670d\u52a1\u7aef\u62c9\u53d6\u6d88\u606f\u88c5\u586b\u3002\u6211\u4eec\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u7684\u529e\u6cd5\u662f\u5bf9\u6bcf\u4e2a\u7528\u6237\u5355\u72ec\u5f00\u8bbe\u4e00\u4e2aTimeline\uff08\u4e5f\u53ef\u4ee5\u7406\u89e3\u4e3a\u5199\u6269\u6563\uff09\uff0c\u7528\u4e8e\u5b58\u50a8\u300c\u64a4\u56de\u300d\u8fd9\u79cd\u5fc5\u987b\u5b9e\u65f6\u63a5\u6536\u7684\u5bf9\u5ba2\u6237\u7aef\u7f13\u5b58\u6570\u636e\u7684\u4fee\u6539\u3002</p> <p>\u53e6\u5916\uff0c\u7531\u4e8e\u5b9e\u73b0\u4e86\u589e\u91cf\u62c9\u53d6\uff0c\u6bcf\u4e2a\u804a\u5929\u5728\u767b\u5f55\u65f6\u4e0d\u4f1a\u5168\u91cf\u62c9\u53d6\u4fe1\u606f\uff0c\u800c\u662f\u4ec5\u4f1a\u62c9\u53d6\u6700\u540e\u7684\u56fa\u5b9a\u6761\u6570\u3002\u8fd9\u5bf9\u4e8e\u300c\u63d0\u53ca\u300d\u529f\u80fd\u70b9\u6765\u8bf4\u4e5f\u662f\u4e00\u4e2a\u95ee\u9898\uff0c\u56e0\u4e3a\u5b9e\u9645@\u7528\u6237\u7684\u6d88\u606f\u5f88\u53ef\u80fd\u4e0d\u4f1a\u88ab\u5ba2\u6237\u7aef\u62c9\u53d6\u5230\uff0c\u5ba2\u6237\u7aef\u4e5f\u65e0\u4ece\u5f97\u77e5\u81ea\u5df1\u88ab\u63d0\u53ca\u4e86\u3002\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u8fd8\u662f\u5728\u4e0a\u9762\u63d0\u53ca\u7684Timeline\u4e2d\u53d1\u9001\u5199\u6269\u6563\u4fe1\u606f\u3002</p> <p>\u800c\u8fd9\u4e2aTimeline\u672c\u8eab\u4f7f\u7528\u4e00\u4e2a\u5ba2\u6237\u7aef\u5b58\u50a8\u7684\u65f6\u95f4\u6233\u8fdb\u884c\u589e\u91cf\u62c9\u53d6\uff0c\u62c9\u53d6\u540e\u540c\u6b65\u670d\u52a1\u7aef\u65f6\u95f4\u6233\u3002</p>"},{"location":"zh/tech/design/#oss","title":"OSS\u76f4\u4f20","text":"<p>\u5373\u65f6\u901a\u8baf\u670d\u52a1\u9700\u8981\u80fd\u591f\u4f20\u8f93\u4e8c\u8fdb\u5236\u5bf9\u8c61\uff0c\u800c\u4f20\u8f93\u4e8c\u8fdb\u5236\u6587\u4ef6\u4f1a\u4e25\u91cd\u5360\u7528\u670d\u52a1\u5668\u5e26\u5bbd\u548c\u78c1\u76d8\u8d44\u6e90\uff0c\u6240\u4ee5\u9700\u8981\u4e0e\u8fde\u63a5\u670d\u52a1\u7aef\u5206\u79bb\uff0c\u4f7f\u5f97\u4f20\u8f93\u670d\u52a1\u4e0d\u5360\u7528\u8fde\u63a5\u670d\u52a1\u8d44\u6e90\u3002\u56e0\u6b64\u6211\u4eec\u5e0c\u671b\u7528\u6237\u80fd\u591f\u76f4\u63a5\u5411\u5bf9\u8c61\u4e0a\u4f20\u670d\u52a1\u7aef\u4e0a\u4f20\u6587\u4ef6\uff0c\u540c\u65f6\u5b8c\u6210\u6587\u4ef6\u6743\u9650\u7684\u63a7\u5236\u548c\u6587\u4ef6\u7684\u68c0\u67e5\u3002\u4e0b\u9762\u63cf\u8ff0\u5b8c\u6574\u7684\u6587\u4ef6\u4e0a\u4f20\u8fc7\u7a0b\uff1a</p> <ol> <li>\u5ba2\u6237\u7aef\u5411\u8fde\u63a5\u670d\u52a1\u7aef\u53d1\u9001\u8bf7\u6c42\uff0c\u9644\u5e26\u5373\u5c06\u4e0a\u4f20\u7684\u6587\u4ef6\u54c8\u5e0c\u4e0e\u6587\u4ef6\u5927\u5c0f</li> <li>\u8fde\u63a5\u670d\u52a1\u7aef\u68c0\u67e5\u8bf7\u6c42\u662f\u5426\u5408\u6cd5\uff08\u54c8\u5e0c\u662f\u5426\u5b58\u5728\uff0c\u5927\u5c0f\u662f\u5426\u5408\u6cd5\uff09\uff0c\u901a\u8fc7\u68c0\u9a8c\u540e\u751f\u6210\u6587\u4ef6GUID\uff0c\u5e76\u8fd4\u56de\u9884\u7b7e\u540d\u7684\u6587\u4ef6\u4e0a\u4f20URL\uff0c\u7528\u4e8e\u7528\u6237\u76f4\u63a5\u5411\u5bf9\u8c61\u670d\u52a1\u7aef\u4e0a\u4f20\u6587\u4ef6\u3002</li> <li>\u5ba2\u6237\u7aef\u5411\u5bf9\u8c61\u670d\u52a1\u7aef\u76f4\u63a5\u4e0a\u4f20\u6587\u4ef6\uff0c\u4e0a\u4f20\u6210\u529f\u540e\u53d1\u9001\u6d88\u606f\u7ed9\u8fde\u63a5\u670d\u52a1\u7aef\u3002</li> <li>\u8fde\u63a5\u670d\u52a1\u7aef\u63a5\u6536\u5230\u300c\u4e0a\u4f20\u5b8c\u6bd5\u300d\u6d88\u606f\u540e\uff0c\u5411\u5bf9\u8c61\u4e0a\u4f20\u670d\u52a1\u7aef\u67e5\u8be2GUID\u5bf9\u5e94\u7684\u6587\u4ef6\u54c8\u5e0c\u4e0e\u5927\u5c0f\uff0c\u4e0e\u6700\u521d\u5ba2\u6237\u7aef\u53d1\u9001\u7684\u6587\u4ef6\u54c8\u5e0c\u3001\u5927\u5c0f\u6bd4\u5bf9\uff0c\u4ee5\u786e\u8ba4\u5ba2\u6237\u7aef\u5728\u7b2c\u4e00\u6b65\u8bf7\u6c42\u65f6\u662f\u5426\u6b3a\u9a97\u670d\u52a1\u7aef\u3002</li> <li>\u5982\u679c\u68c0\u9a8c\u6b63\u786e\u5411\u7528\u6237\u8fd4\u56de\u9884\u7b7e\u540d\u7684\u4e0b\u8f7d\u94fe\u63a5\uff0c\u68c0\u9a8c\u5931\u8d25\u5bf9\u8c61\u670d\u52a1\u7aef\u5220\u9664\u6587\u4ef6\u3002</li> </ol> <p>\u5b9e\u8df5\u4e0a\u9009\u62e9\u4e86\u517c\u5bb9Amazon S3\u534f\u8bae\uff0c\u76ee\u524d\u7ebf\u4e0a\u90e8\u7f72\u7684\u6d4b\u8bd5\u670d\u52a1\u9009\u7528\u7684\u5f00\u6e90\u5bf9\u8c61\u5b58\u50a8\u670d\u52a1<code>Minio</code>\uff0c\u5176\u5b9e\u529f\u80fd\u4e0a\u76f8\u5bf9\u6210\u719f\u7684\u5546\u4e1a\u95ed\u6e90\u9879\u76ee\u8f83\u5f31\u3002</p>"},{"location":"zh/tech/design/#_10","title":"\u97f3\u89c6\u9891\u901a\u8bdd","text":"<p>\u4f7f\u7528\u4e86WebRTC\u6280\u672f\u5b9e\u73b0\u89c6\u9891\u901a\u8bdd\uff0c\u8fd9\u4e5f\u662f\u5728\u6e38\u89c8\u5668\u91cd\u91cd\u9650\u5236\u4e0b\u505a\u89c6\u9891\u901a\u8bdd\u51e0\u4e4e\u552f\u4e00\u7684\u65b9\u6848\u3002\u5728\u590d\u6742\u7f51\u7edc\u73af\u5883\u65f6\u5185\u7f51\u7a7f\u900f\u5efa\u7acbP2P\u8fde\u63a5\u65f6\u5e38\u5931\u8d25\uff0c\u56e0\u6b64\u6211\u4eec\u4e5f\u90e8\u7f72\u4e86COTURN\u670d\u52a1\u5668\u4f5c\u4e3aTURN\u670d\u52a1\u7528\u4e8e\u7a7f\u900f\u5931\u8d25\u65f6\u7684\u6d41\u91cf\u4e2d\u8f6c\u3002</p>"},{"location":"zh/tech/design/#dom","title":"\u865a\u62dfDOM","text":"<p>\u6d88\u606f\u5217\u8868\u4f7f\u7528\u4e86<code>Virtuso</code>\u5e93\u5b9e\u73b0\u4e86\u865a\u62dfDOM\uff0c\u4ec5\u4f1a\u5c06\u6709\u9650\u7684\u8282\u70b9\u5b9e\u9645\u52a0\u5165DOM\u6811\uff0c\u5e76\u5728\u7528\u6237\u6eda\u52a8\u65f6\u5b9e\u65f6\u5207\u6362\u3002\u907f\u514d\u4e86\u524d\u7aef\u6e32\u67d3\u5927\u91cf\u6d88\u606f\u65f6\u7684\u5361\u987f\u3002</p>"},{"location":"zh/tech/network/websocket/","title":"Websocket \u901a\u4fe1\u534f\u8bae","text":""},{"location":"zh/tech/network/websocket/#_1","title":"\u5199\u5728\u524d\u9762","text":"<ul> <li> <p>\u4e3a\u4fdd\u8bc1\u901a\u4fe1\u7684\u5b89\u5168\u4e0e\u9690\u79c1\uff0c\u9664\u7279\u6b8a\u6807\u8bb0\uff08\u5e26<code>*</code>\u53f7\u6216<code>**</code>\u53f7\uff09\u7684\u901a\u4fe1\u534f\u8bae\u5916\uff0c\u6240\u6709\u534f\u8bae\u5185\u5bb9\u5747\u7ecf\u8fc7<code>AES</code>\u5bf9\u79f0\u5bc6\u94a5\u52a0\u5bc6\u3002\u5176\u4e2d<code>*</code>\u6807\u8bb0\u8868\u793a\u8be5\u534f\u8bae\u65e0\u52a0\u5bc6\uff0c<code>**</code>\u6807\u8bb0\u8868\u793a\u8be5\u534f\u8bae\u901a\u8fc7<code>RSA</code>\u516c\u94a5\u52a0\u5bc6\u3002</p> </li> <li> <p>\u6240\u6709\u7684\u534f\u8bae\u5185\u5bb9\uff0c\u5728\u52a0\u5bc6\u524d\uff08\u89e3\u5bc6\u540e\uff09\u683c\u5f0f\u5747\u4e3a\uff1a</p> <p><code>json {     \"command\": \"***\",     \"data\": [data] // JSON\u6216string\u6216undefined }</code></p> </li> <li> <p>\u672cAPI\u6587\u6863\u4e4b\u540e\u7684[\u534f\u8bae\u540d\u79f0]\u90e8\u5206\uff0c\u5747\u6307\u660e\u6587\u534f\u8bae\u4e2dcommand\u5b57\u6bb5\u9700\u8981\u7684\u5b57\u7b26\u4e32\uff0c[\u53c2\u6570]\u90e8\u5206\uff0c\u8868\u683c\u7684\u7b2c\u4e00\u884c\u5747\u6307data\u7684\u7c7b\u578b\uff0c\u5176\u540e\u5404\u884c\u6307\u660e\u6587\u534f\u8bae\u4e2ddata\u90e8\u5206\u9700\u8981\u7684\u5b57\u6bb5\uff08\u5982\u679cdata\u5b58\u5728\u4e14\u7c7b\u578b\u4e3aJSON\uff09\u3002</p> </li> <li> <p>\u7531\u4e8e\u901a\u4fe1\u901a\u5e38\u662f\u5ba2\u6237\u7aef\u5411\u670d\u52a1\u5668\u7aef\u53d1\u9001\u6570\u636e\uff0c\u670d\u52a1\u5668\u7aef\u5728\u63a5\u53d7\u5230\u76f8\u5e94\u7684\u6570\u636e\u540e\u5411\u5ba2\u6237\u7aef\u53d1\u9001\u5bf9\u5e94\u7684\u8fd4\u56de\u6570\u636e\uff0c\u6545\u672cAPI\u6587\u6863\u5927\u90e8\u5206\u534f\u8bae\u91c7\u53d6C2S-S2C\u7684\u5f62\u5f0f\u7f16\u5199\u3002\u5176\u4e2dC2S(Client2Server)\u8868\u793a\u5ba2\u6237\u7aef\u5411\u670d\u52a1\u5668\u7aef\u53d1\u9001\uff0cS2C\u7c7b\u4f3c\u3002</p> </li> <li> <p>\u534f\u8bae\u5185\u5bb9\u5728\u52a0\u5bc6\u540e\uff0c\u5747\u4e3a<code>base64</code>\u7f16\u7801\u7684\u5b57\u7b26\u4e32\u3002</p> </li> </ul>"},{"location":"zh/tech/network/websocket/#_2","title":"\u63e1\u624b\u52a0\u5bc6\u534f\u8bae","text":""},{"location":"zh/tech/network/websocket/#_3","title":"\u63cf\u8ff0","text":"<p>\u7528\u4e8e\u548c\u670d\u52a1\u5668\u4ea4\u6362AES\u5bc6\u94a5\u5bf9\uff0c\u5b9e\u73b0\u63e1\u624b\u52a0\u5bc6\u3002</p>"},{"location":"zh/tech/network/websocket/#_4","title":"\u53c2\u6570","text":"\u53c2\u6570\u540d\u79f0 \u7c7b\u578b \u8bf4\u660e data string 1024\u4f4d\u7684RSA\u516c\u94a5"},{"location":"zh/tech/network/websocket/#_5","title":"\u793a\u4f8b","text":"<pre><code>{\n    \"command\": \"SetConnectionSymKey\",\n    \"data\": \"MIGJAoGBAKMxsngBaWseSIR+84kzKaG31WEgePkC3AxgeOmQN3zHPs2tBHgsH8eqP8BTOVOzX6Llqo2HwO8FBMWetNRYMytzIYzSNL728ANyBeoItoyhqd2vlZYqj9eJ5ImmYcRMgTwc8CVcDuonjFF8bR2Y+sULLprrzFLjFSgj6K2Te3wZAgMBAAE=\"\n}\n</code></pre>"},{"location":"zh/tech/network/websocket/#_6","title":"\u52a0\u5bc6\u65b9\u6cd5","text":"<p>\u4f7f\u7528[\u63e1\u624b\u52a0\u5bc6\u534f\u8bae(C2S)*]\u63d0\u4f9b\u7684RSA\u516c\u94a5\u8fdb\u884c\u52a0\u5bc6</p>"},{"location":"zh/tech/network/websocket/#_7","title":"\u63cf\u8ff0","text":"<p>\u7528\u4e8e\u8bbe\u7f6e\u5ba2\u6237\u7aef\u7684AES\u5bf9\u79f0\u5bc6\u94a5</p>"},{"location":"zh/tech/network/websocket/#_8","title":"\u53c2\u6570","text":"\u53c2\u6570\u540d\u79f0 \u7c7b\u578b \u8bf4\u660e data JSON \u65e0 state string \u670d\u52a1\u5668\u7aef\u7684\u54cd\u5e94\u72b6\u6001 pubKey string(\u53ef\u9009) \u5982\u679c\u6b63\u786e\u54cd\u5e94\uff0c\u5219\u4e3aAES\u5bc6\u94a5 state\u72b6\u6001 \u8bf4\u660e NeedSetPubKey \u670d\u52a1\u5668\u7aef\u5c1a\u672a\u83b7\u5f97RSA\u516c\u94a5 PubKeyError \u670d\u52a1\u5668\u7aefRSA\u516c\u94a5\u52a0\u5bc6\u5931\u8d25 HasApproved \u5df2\u7ecf\u901a\u8fc7\u63e1\u624b\u52a0\u5bc6 Success \u670d\u52a1\u5668\u7aef\u7b7e\u53d1AES\u5bc6\u94a5\u6210\u529f"},{"location":"zh/tech/network/websocket/#_9","title":"\u793a\u4f8b","text":"<pre><code>{\n    \"command\": \"SetConnectionPubKeyResponse\",\n    \"data\": {\n        \"state\": \"Success\",\n        \"pubKey\": \"hfqtj+f9vPN3CXDPgN6qQJgIlQph2dvPe99fsZJUK2vud6Iwyw\u20260FyXp/blfQaE3Lf/n5CWFl+TppHN5x6q7oCGuUHGp10EZKMQ=\" \n    }\n}\n</code></pre> <pre><code>{\n    \"command\": \"SetConnectionPubKeyResponse\",\n    \"data\": {\n        \"state\": \"HasApproved\"\n    }\n}\n</code></pre>"},{"location":"zh/tech/network/websocket/#_10","title":"\u767b\u5f55\u534f\u8bae","text":""},{"location":"zh/tech/network/websocket/#loginc2s","title":"Login(C2S)","text":""},{"location":"zh/tech/network/websocket/#_11","title":"\u63cf\u8ff0","text":"<p>\u7528\u4e8e\u7528\u6237\u767b\u5f55</p>"},{"location":"zh/tech/network/websocket/#_12","title":"\u53c2\u6570","text":"\u53c2\u6570\u540d\u79f0 \u7c7b\u578b \u8bf4\u660e data JSON \u65e0 email string \u7528\u6237\u90ae\u7bb1 password string(\u53ef\u9009) \u52a0\u76d0hash\u540e\u7684\u5bc6\u7801 emailCode number(\u53ef\u9009) \u90ae\u7bb1\u9a8c\u8bc1\u7801 token string(\u53ef\u9009) \u670d\u52a1\u5668\u7aef\u7b7e\u53d1\u7684token"},{"location":"zh/tech/network/websocket/#_13","title":"\u793a\u4f8b","text":"<pre><code>{\n    \"command\": \"Login\",\n    \"data\": {\n        \"email\": \"rintaro@foxmail.com\",\n        \"password\": \"fd750cd28387c49d2f5b951005e6ac2d5af2e7e0a3a3dd821827c12ae527f52d\"\n    }\n}\n</code></pre> <pre><code>{\n    \"command\": \"Login\",\n    \"data\": {\n        \"email\": \"rintaro@foxmail.com\",\n        \"emailCode\": 2145621540\n    }\n}\n</code></pre>"},{"location":"zh/tech/network/websocket/#loginresponses2c","title":"LoginResponse(S2C)","text":""},{"location":"zh/tech/network/websocket/#_14","title":"\u63cf\u8ff0","text":"<p>\u7528\u4e8e\u670d\u52a1\u5668\u7aef\u54cd\u5e94\u7528\u6237\u767b\u5f55\u8bf7\u6c42</p>"},{"location":"zh/tech/network/websocket/#_15","title":"\u53c2\u6570","text":"\u53c2\u6570\u540d\u79f0 \u7c7b\u578b \u8bf4\u660e data JSON \u65e0 state string \u7528\u6237\u767b\u5f55\u8bf7\u6c42\u54cd\u5e94\u72b6\u6001 userId number(\u53ef\u9009) \u6210\u529f\u767b\u5f55\u540e\uff0c\u4e3a\u7528\u6237\u7684\u7528\u6237Id state\u72b6\u6001 \u8bf4\u660e Success \u6210\u529f\u767b\u5f55 EmailInvalid \u90ae\u7bb1\u683c\u5f0f\u9519\u8bef UserNotFound \u6570\u636e\u5e93\u4e0d\u5b58\u5728\u8be5\u7528\u6237 UserLogged \u8be5\u7528\u6237\u5df2\u767b\u5f55 PasswordError \u5bc6\u7801\u9519\u8bef EmailCodeError \u9a8c\u8bc1\u7801\u9519\u8bef TokenError token\u9519\u8bef TokenExpired token\u8fc7\u671f"},{"location":"zh/tech/network/websocket/#_16","title":"\u793a\u4f8b","text":"<pre><code>{\n    \"command\": \"LoginResponse\",\n    \"data\": {\n        \"state\": \"Success\",\n        \"userId\": 1\n    }\n}\n</code></pre> <pre><code>{\n    \"command\": \"LoginResponse\",\n    \"data\": {\n        \"state\": \"UserLogged\"\n    }\n}\n</code></pre>"},{"location":"zh/tech/network/websocket/#_17","title":"\u6ce8\u518c\u534f\u8bae","text":""},{"location":"zh/tech/network/websocket/#registerc2s","title":"Register(C2S)","text":""},{"location":"zh/tech/network/websocket/#_18","title":"\u63cf\u8ff0","text":"<p>\u7528\u4e8e\u5ba2\u6237\u7aef\u5411\u670d\u52a1\u5668\u7aef\u53d1\u9001\u6ce8\u518c\u8d26\u6237\u8bf7\u6c42</p>"},{"location":"zh/tech/network/websocket/#_19","title":"\u53c2\u6570","text":"\u53c2\u6570\u540d\u79f0 \u7c7b\u578b \u8bf4\u660e data JSON \u65e0 userName string \u7528\u6237\u540d password string \u52a0\u76d0hash\u540e\u7684\u5bc6\u7801 email string \u7528\u6237\u90ae\u7bb1 emailCode number \u90ae\u7bb1\u9a8c\u8bc1\u7801"},{"location":"zh/tech/network/websocket/#_20","title":"\u793a\u4f8b","text":"<pre><code>{\n    \"command\": \"Register\",\n    \"data\": {\n        \"userName\": \"ARintaro\",\n        \"email\": \"rintaro@foxmail.com\",\n        \"password\": \"fd750cd28387c49d2f5b951005e6ac2d5af2e7e0a3a3dd821827c12ae527f52d\",\n        \"emailCode\": 1234567890\n    }\n}\n</code></pre>"},{"location":"zh/tech/network/websocket/#registerresponses2c","title":"RegisterResponse(S2C)","text":""},{"location":"zh/tech/network/websocket/#_21","title":"\u63cf\u8ff0","text":"<p>\u7528\u4e8e\u670d\u52a1\u5668\u7aef\u5411\u5ba2\u6237\u7aef\u54cd\u5e94\u6ce8\u518c\u8bf7\u6c42</p>"},{"location":"zh/tech/network/websocket/#_22","title":"\u53c2\u6570","text":"\u53c2\u6570\u540d\u79f0 \u7c7b\u578b \u8bf4\u660e data JSON \u65e0 state string \u6ce8\u518c\u8bf7\u6c42\u7684\u54cd\u5e94\u72b6\u6001 userId number(\u53ef\u9009) \u6ce8\u518c\u6210\u529f\u540e\uff0c\u4e3a\u6ce8\u518c\u7528\u6237\u7684\u7528\u6237ID state\u72b6\u6001 \u8bf4\u660e Success \u6ce8\u518c\u6210\u529f UserNameFormatError \u7528\u6237\u540d\u683c\u5f0f\u9519\u8bef PasswordFormatError \u5bc6\u7801\u683c\u5f0f\u9519\u8bef EmailRegistered \u8be5\u90ae\u7bb1\u5df2\u88ab\u6ce8\u518c EmailCodeError \u9a8c\u8bc1\u7801\u9519\u8bef EmailInvalid \u9a8c\u8bc1\u7801\u683c\u5f0f\u9519\u8bef"},{"location":"zh/tech/network/websocket/#_23","title":"\u793a\u4f8b","text":"<pre><code>{\n    \"command\": \"RegisterResponse\",\n    \"data\": {\n        \"state\": \"Success\",\n        \"userId\": 15\n    }\n}\n</code></pre> <pre><code>{\n    \"command\": \"RegisterResponse\",\n    \"data\": {\n        \"state\": \"EmailCodeError\"\n    }\n}\n</code></pre>"},{"location":"zh/tech/network/websocket/#_24","title":"\u521d\u59cb\u6570\u636e\u62c9\u53d6\u534f\u8bae","text":""},{"location":"zh/tech/network/websocket/#pullc2s","title":"Pull(C2S)","text":""},{"location":"zh/tech/network/websocket/#_25","title":"\u63cf\u8ff0","text":"<p>\u5728\u767b\u9646\u6210\u529f\u540e\uff0c\u5ba2\u6237\u7aef\u81ea\u52a8\u5411\u670d\u52a1\u5668\u7aef\u53d1\u9001\uff0c\u8bf7\u6c42\u62c9\u53d6\u7528\u4e8e\u521d\u59cb\u5316\u804a\u5929\u4fe1\u606f\u7684\u6570\u636e</p>"},{"location":"zh/tech/network/websocket/#_26","title":"\u53c2\u6570","text":"\u53c2\u6570\u540d\u79f0 \u7c7b\u578b \u8bf4\u660e data JSON \u65e0 lastRequestId number \u589e\u91cf\u62c9\u53d6\u6700\u65b0\u7684RequestId\u540e\u7684Request\uff0c\u4e3a0\u65f6\u8fdb\u884c\u5168\u91cf\u62c9\u53d6 noticeTimestamp number \u589e\u91cf\u62c9\u53d6\u8be5\u65f6\u95f4\u6233\u540e\u7684\u5168\u90e8notice"},{"location":"zh/tech/network/websocket/#_27","title":"\u793a\u4f8b","text":"<pre><code>{\n    \"command\": \"Pull\",\n    \"data\": {\n        \"lastRequestId\": 0,\n        \"noticeTimestamp\": 1685018341911\n    }\n}\n</code></pre>"},{"location":"zh/tech/network/websocket/#readcursorss2c","title":"ReadCursors(S2C)","text":""},{"location":"zh/tech/network/websocket/#_28","title":"\u63cf\u8ff0","text":"<p>\u670d\u52a1\u5668\u7aef\u5411\u5ba2\u6237\u7aef\u53d1\u9001\u5bf9\u5e94\u804a\u5929\u6700\u65b0\u5df2\u8bfb\u6d88\u606f\u7684\u4f4d\u7f6e</p>"},{"location":"zh/tech/network/websocket/#_29","title":"\u53c2\u6570","text":"\u53c2\u6570\u540d\u79f0 \u7c7b\u578b \u8bf4\u660e data Array \u65e0 data[index] Array \u4ee5\u5143\u7ec4\u7684\u5f62\u5f0f\u5b58\u50a8\u7684[chatId, readCursor]\u5bf9"},{"location":"zh/tech/network/websocket/#_30","title":"\u793a\u4f8b","text":"<pre><code>{\n    \"command\": \"ReadCursors\",\n    \"data\": [\n        [1, 69],\n        [3, 52],\n        [8, 5],\n        [2, 11]\n    ]\n}\n</code></pre>"},{"location":"zh/tech/network/websocket/#messagess2c","title":"Messages(S2C)","text":""},{"location":"zh/tech/network/websocket/#_31","title":"\u63cf\u8ff0","text":"<p>\u670d\u52a1\u5668\u7aef\u5411\u5ba2\u6237\u7aef\u4e3a\u6bcf\u4e2a\u804a\u5929\u53d1\u9001\u6700\u65b0\u7684\u90e8\u5206\u6d88\u606f</p>"},{"location":"zh/tech/network/websocket/#_32","title":"\u53c2\u6570","text":"\u53c2\u6570\u540d\u79f0 \u7c7b\u578b \u8bf4\u660e data Array \u65e0 data[index] string \u5e8f\u5217\u5316\u540e\u7684\u6d88\u606f\u6570\u636e"},{"location":"zh/tech/network/websocket/#_33","title":"\u793a\u4f8b","text":"<pre><code>{\n    \"command\": \"Messages\",\n    \"data\": [\n        \"{\"type\":\"Text\", \"inChatId\":64, \"chatId\":1, \"senderId\":7, \"serializedContent\":\"\\\"\\\\\\\"XXX\\\\\\\"\\\"\", \"timestamp\":1684332121757}\",\n        \"{\"type\":\"Text\", \"inChatId\":65, \"chatId\":1, \"senderId\":3, \"serializedContent\":\"\\\"www.hao.com www.hao.com www.hao.com\\\"\", \"timestamp\":1684332445808}\"\n    ]\n}\n</code></pre>"},{"location":"zh/tech/network/websocket/#requestss2c","title":"Requests(S2C)","text":""},{"location":"zh/tech/network/websocket/#_34","title":"\u63cf\u8ff0","text":"<p>\u670d\u52a1\u5668\u7aef\u5411\u5ba2\u6237\u7aef\u4e3a\u6bcf\u4e2a\u804a\u5929\u53d1\u9001\u6700\u65b0\u7684\u90e8\u5206\u6d88\u606f</p>"},{"location":"zh/tech/network/websocket/#_35","title":"\u53c2\u6570","text":"\u53c2\u6570\u540d\u79f0 \u7c7b\u578b \u8bf4\u660e data Array \u65e0 data[index] string \u5e8f\u5217\u5316\u540e\u7684Request\u6570\u636e"},{"location":"zh/tech/network/websocket/#_36","title":"\u793a\u4f8b","text":"<pre><code>{\n    \"command\": \"Requests\",\n    \"data\": [\n        \"{\"info\":{\"reqId\":1,\"senderId\":2,\"message\":\"123\",\"content\":{\"type\":\"JoinGroup\",\"chatId\":1}},\"state\":\"Approved\"}\",\n        \"{\"info\":{\"reqId\":2,\"senderId\":1,\"message\":\"test\",\"content\":{\"type\":\"MakeFriend\",\"receiverId\":2}},\"state\":\"Approved\"}\"\n    ]\n}\n</code></pre>"},{"location":"zh/tech/network/websocket/#usersettings2c","title":"UserSetting(S2C)","text":""},{"location":"zh/tech/network/websocket/#_37","title":"\u63cf\u8ff0","text":"<p>\u670d\u52a1\u5668\u7aef\u5411\u5ba2\u6237\u7aef\u53d1\u9001\u7528\u6237\u914d\u7f6e\u6570\u636e</p>"},{"location":"zh/tech/network/websocket/#_38","title":"\u53c2\u6570","text":"\u53c2\u6570\u540d\u79f0 \u7c7b\u578b \u8bf4\u660e data string \u5e8f\u5217\u5316\u540e\u7684\u7528\u6237\u914d\u7f6e\u6570\u636e"},{"location":"zh/tech/network/websocket/#_39","title":"\u793a\u4f8b","text":"<pre><code>{\n    \"command\": \"UserSetting\",\n    \"data\": \"{\"secondaryCheckChats\":[],\"userNickname\":[],\"notification\":{\"slient\":true,\"show\":true,\"muteChatIds\":[6]},\"topChatIds\":[4,3]}\"\n}\n</code></pre>"},{"location":"zh/tech/network/websocket/#noticess2c","title":"Notices(S2C)","text":""},{"location":"zh/tech/network/websocket/#_40","title":"\u63cf\u8ff0","text":"<p>\u670d\u52a1\u5668\u7aef\u5411\u5ba2\u6237\u7aef\u53d1\u9001\u5ba2\u6237\u7aef\u62c9\u53d6\u7684\u90e8\u5206Notice\u6570\u636e\u5217\u8868</p>"},{"location":"zh/tech/network/websocket/#_41","title":"\u53c2\u6570","text":"\u53c2\u6570\u540d\u79f0 \u7c7b\u578b \u8bf4\u660e data Array \u65e0 data[index] string \u5e8f\u5217\u5316\u540e\u7684Notice\u6570\u636e"},{"location":"zh/tech/network/websocket/#_42","title":"\u793a\u4f8b","text":"<pre><code>{\n    \"command\": \"Notices\",\n    \"data\": []\n}\n</code></pre>"},{"location":"zh/tech/network/websocket/#pullresponses2c","title":"PullResponse(S2C)","text":""},{"location":"zh/tech/network/websocket/#_43","title":"\u63cf\u8ff0","text":"<p>\u670d\u52a1\u5668\u7aef\u5411\u5ba2\u6237\u7aef\u54cd\u5e94Pull\u8bf7\u6c42\u72b6\u6001</p>"},{"location":"zh/tech/network/websocket/#_44","title":"\u53c2\u6570","text":"\u53c2\u6570\u540d\u79f0 \u7c7b\u578b \u8bf4\u660e data JSON \u65e0 state string Pull\u8bf7\u6c42\u7684\u54cd\u5e94\u72b6\u6001 state\u72b6\u6001 \u8bf4\u660e Success \u6210\u529f\u54cd\u5e94Pull\u8bf7\u6c42 DatabaseError \u6570\u636e\u5e93\u5f02\u5e38"},{"location":"zh/tech/network/websocket/#_45","title":"\u793a\u4f8b","text":"<pre><code>{\n    \"command\": \"PullResponse\",\n    \"data\": {\n        \"state\": \"Success\"\n    }\n}\n</code></pre>"},{"location":"zh/tech/network/websocket/#_46","title":"\u7528\u6237\u4fe1\u606f\u62c9\u53d6\u534f\u8bae","text":""},{"location":"zh/tech/network/websocket/#getuserinfoc2s","title":"GetUserInfo(C2S)","text":""},{"location":"zh/tech/network/websocket/#_47","title":"\u63cf\u8ff0","text":"<p>\u5ba2\u6237\u7aef\u5411\u670d\u52a1\u5668\u7aef\u62c9\u53d6\u7528\u6237\u4fe1\u606f</p>"},{"location":"zh/tech/network/websocket/#_48","title":"\u53c2\u6570","text":"\u53c2\u6570\u540d\u79f0 \u7c7b\u578b \u8bf4\u660e data number \u7528\u6237ID"},{"location":"zh/tech/network/websocket/#_49","title":"\u793a\u4f8b","text":"<pre><code>{\n    \"command\": \"GetUserInfo\",\n    \"data\": 1\n}\n</code></pre>"},{"location":"zh/tech/network/websocket/#getuserinforesponses2c","title":"GetUserInfoResponse(S2C)","text":""},{"location":"zh/tech/network/websocket/#_50","title":"\u63cf\u8ff0","text":"<p>\u670d\u52a1\u5668\u7aef\u5411\u5ba2\u6237\u7aef\u53d1\u9001\u7528\u6237\u4fe1\u606f\u6570\u636e</p>"},{"location":"zh/tech/network/websocket/#_51","title":"\u53c2\u6570","text":"\u53c2\u6570\u540d\u79f0 \u7c7b\u578b \u8bf4\u660e data JSON \u65e0 state string \u54cd\u5e94\u72b6\u6001 userId number(\u53ef\u9009) \u6210\u529f\u54cd\u5e94\u540e\uff0c\u4e3a\u7528\u6237Id userName string(\u53ef\u9009) \u6210\u529f\u54cd\u5e94\u540e\uff0c\u4e3a\u7528\u6237\u540d avaterHash string(\u53ef\u9009) \u6210\u529f\u54cd\u5e94\u540e\uff0c\u4e3a\u5934\u50cf\u6587\u4ef6hash\u503c state\u72b6\u6001 \u8bf4\u660e Success \u6b63\u786e\u54cd\u5e94\u8bf7\u6c42 UserNotFound \u8be5\u7528\u6237\u4e0d\u5b58\u5728 ServerError \u670d\u52a1\u5668\u9519\u8bef"},{"location":"zh/tech/network/websocket/#_52","title":"\u793a\u4f8b","text":"<pre><code>{\n    \"command\": \"GetUserInfoResponse\",\n    \"data\": {\n        \"state\": \"Success\",\n        \"userId\": 8,\n        \"userName\": \"Rintaro\",\n        \"avaterHash\": \"b9c9a45da34b134a835c0ec673ea4ce4\"\n    }\n}\n</code></pre>"},{"location":"zh/tech/network/websocket/#_53","title":"\u804a\u5929\u6570\u636e\u62c9\u53d6\u534f\u8bae","text":""},{"location":"zh/tech/network/websocket/#getchatinfoc2s","title":"GetChatInfo(C2S)","text":""},{"location":"zh/tech/network/websocket/#_54","title":"\u63cf\u8ff0","text":"<p>\u5ba2\u6237\u7aef\u5411\u670d\u52a1\u5668\u7aef\u7533\u8bf7\u804a\u5929\u4fe1\u606f\u6570\u636e</p>"},{"location":"zh/tech/network/websocket/#_55","title":"\u53c2\u6570","text":"\u53c2\u6570\u540d\u79f0 \u7c7b\u578b \u8bf4\u660e data number \u804a\u5929ID"},{"location":"zh/tech/network/websocket/#_56","title":"\u793a\u4f8b","text":"<pre><code>{\n    \"command\": \"GetChatInfo\",\n    \"data\": 9\n}\n</code></pre>"},{"location":"zh/tech/network/websocket/#chats2c","title":"Chat(S2C)","text":""},{"location":"zh/tech/network/websocket/#_57","title":"\u63cf\u8ff0","text":"<p>\u670d\u52a1\u5668\u7aef\u5411\u5ba2\u6237\u7aef\u53d1\u9001\u804a\u5929\u4fe1\u606f\u6570\u636e</p>"},{"location":"zh/tech/network/websocket/#_58","title":"\u53c2\u6570","text":"\u53c2\u6570\u540d\u79f0 \u7c7b\u578b \u8bf4\u660e data string \u5e8f\u5217\u5316\u540e\u7684\u804a\u5929\u4fe1\u606f\u6570\u636e"},{"location":"zh/tech/network/websocket/#_59","title":"\u793a\u4f8b","text":"<pre><code>{\n    \"command\": \"Chat\",\n    \"data\": \"{\\\"id\\\":9,\\\"name\\\":\\\"\u521b\u5efa\u7fa4\u804a\u6d4b\u8bd52\\\",\\\"avaterHash\\\":\\\"\\\"}\"\n}\n</code></pre>"},{"location":"zh/tech/network/websocket/#_60","title":"\u7fa4\u804a\u6743\u9650\u76f8\u5173\u534f\u8bae","text":""},{"location":"zh/tech/network/websocket/#getgroupusersgetgroupadmingetgroupownerc2s","title":"GetGroupUsers\u3001GetGroupAdmin\u3001GetGroupOwner(C2S)","text":""},{"location":"zh/tech/network/websocket/#_61","title":"\u63cf\u8ff0","text":"<p>\u5ba2\u6237\u7aef\u5411\u670d\u52a1\u5668\u7aef\u8bf7\u6c42\u7fa4\u804a\u7528\u6237ID\u5217\u8868\u3001\u8bf7\u6c42\u7ba1\u7406\u5458ID\u5217\u8868\u3001\u8bf7\u6c42\u7fa4\u4e3bID</p>"},{"location":"zh/tech/network/websocket/#_62","title":"\u53c2\u6570","text":"\u53c2\u6570\u540d\u79f0 \u7c7b\u578b \u8bf4\u660e data number \u804a\u5929ID"},{"location":"zh/tech/network/websocket/#_63","title":"\u793a\u4f8b","text":"<pre><code>{\n    \"command\": \"GetGroupUsers\",\n    \"data\": 9\n}\n</code></pre> <pre><code>{\n    \"command\": \"GetGroupAdmin\",\n    \"data\": 9\n}\n</code></pre> <pre><code>{\n    \"command\": \"GetGroupOwner\",\n    \"data\": 9\n}\n</code></pre>"},{"location":"zh/tech/network/websocket/#getgroupusersresponses2c","title":"GetGroupUsersResponse(S2C)","text":""},{"location":"zh/tech/network/websocket/#_64","title":"\u63cf\u8ff0","text":"<p>\u670d\u52a1\u5668\u7aef\u5411\u5ba2\u6237\u7aef\u53d1\u9001\u7fa4\u804a\u6210\u5458ID\u5217\u8868</p>"},{"location":"zh/tech/network/websocket/#_65","title":"\u53c2\u6570","text":"\u53c2\u6570\u540d\u79f0 \u7c7b\u578b \u8bf4\u660e data JSON \u65e0 state string \u54cd\u5e94\u72b6\u6001 chatId number(\u53ef\u9009) \u804a\u5929ID userIds Array(\u53ef\u9009) \u7fa4\u804a\u7528\u6237ID\u5217\u8868 userIds[index] number \u7528\u6237ID state\u72b6\u6001 \u8bf4\u660e Success \u6210\u529f\u54cd\u5e94 NotGroupChat \u8be5\u804a\u5929\u4e0d\u662f\u7fa4\u804a ServerError \u670d\u52a1\u5668\u5f02\u5e38"},{"location":"zh/tech/network/websocket/#_66","title":"\u793a\u4f8b","text":"<pre><code>{\n    \"command\": \"GetGroupUsersResponse\",\n    \"data\": {\n        \"state\": \"Success\",\n        \"chatId\": 8,\n        \"userIds\": [\n            1,\n            5\n        ]\n    }\n}\n</code></pre> <pre><code>{\n    \"command\": \"GetGroupUsersResponse\",\n    \"data\": {\n        \"state\": \"NotGroupChat\"\n    }\n}\n</code></pre>"},{"location":"zh/tech/network/websocket/#getgroupownerresponses2c","title":"GetGroupOwnerResponse(S2C)","text":""},{"location":"zh/tech/network/websocket/#_67","title":"\u63cf\u8ff0","text":"<p>\u670d\u52a1\u5668\u7aef\u5411\u5ba2\u6237\u7aef\u53d1\u9001\u7fa4\u4e3bID</p>"},{"location":"zh/tech/network/websocket/#_68","title":"\u53c2\u6570","text":"\u53c2\u6570\u540d\u79f0 \u7c7b\u578b \u8bf4\u660e data JSON \u65e0 chatId number(\u53ef\u9009) \u6210\u529f\u54cd\u5e94\u540e\uff0c\u4e3a\u804a\u5929ID userId number(\u53ef\u9009) \u6210\u529f\u54cd\u5e94\u540e\uff0c\u4e3a\u7fa4\u4e3bID state\u72b6\u6001 \u8bf4\u660e Success \u6210\u529f\u54cd\u5e94 UserNotInChat \u53d1\u51fa\u8bf7\u6c42\u7684\u7528\u6237\u4e0d\u5728\u804a\u5929\u4e2d ServerError \u670d\u52a1\u5668\u9519\u8bef"},{"location":"zh/tech/network/websocket/#_69","title":"\u793a\u4f8b","text":"<pre><code>{\n    \"command\": \"GetGroupOwnerResponse\",\n    \"data\": {\n        \"state\": \"Success\",\n        \"chatId\": 8,\n        \"userId\": 10\n    }\n}\n</code></pre> <pre><code>{\n    \"command\": \"GetGroupOwnerResponse\",\n    \"data\": {\n        \"state\": \"UserNotInChat\"\n    }\n}\n</code></pre>"},{"location":"zh/tech/network/websocket/#getgroupadminresponses2c","title":"GetGroupAdminResponse(S2C)","text":""},{"location":"zh/tech/network/websocket/#_70","title":"\u63cf\u8ff0","text":"<p>\u670d\u52a1\u5668\u7aef\u5411\u5ba2\u6237\u7aef\u53d1\u9001\u7ba1\u7406\u5458ID\u5217\u8868</p>"},{"location":"zh/tech/network/websocket/#_71","title":"\u53c2\u6570","text":"\u53c2\u6570\u540d\u79f0 \u7c7b\u578b \u8bf4\u660e data JSON \u65e0 chatId number(\u53ef\u9009) \u6210\u529f\u54cd\u5e94\u540e\uff0c\u4e3a\u804a\u5929ID userIds Array(\u53ef\u9009) \u6210\u529f\u54cd\u5e94\u540e\uff0c\u4e3a\u7ba1\u7406\u5458ID\u5217\u8868 userIds[index] number \u7ba1\u7406\u5458ID state\u72b6\u6001 \u8bf4\u660e Success \u6210\u529f\u54cd\u5e94 UserNotInChat \u53d1\u51fa\u8bf7\u6c42\u7684\u7528\u6237\u4e0d\u5728\u804a\u5929\u4e2d ServerError \u670d\u52a1\u5668\u9519\u8bef"},{"location":"zh/tech/network/websocket/#_72","title":"\u793a\u4f8b","text":"<pre><code>{\n    \"command\": \"GetGroupAdminResponse\",\n    \"data\": {\n        \"state\": \"Success\",\n        \"chatId\": 8,\n        \"userIds\": [\n            10,\n            5\n        ]\n    }\n}\n</code></pre> <pre><code>{\n    \"command\": \"GetGroupAdminResponse\",\n    \"data\": {\n        \"state\": \"UserNotInChat\"\n    }\n}\n</code></pre>"},{"location":"zh/tech/network/websocket/#groupownertransferc2s","title":"GroupOwnerTransfer(C2S)","text":""},{"location":"zh/tech/network/websocket/#_73","title":"\u63cf\u8ff0","text":"<p>\u8f6c\u79fb\u7fa4\u4e3b\u8eab\u4efd</p>"},{"location":"zh/tech/network/websocket/#_74","title":"\u53c2\u6570","text":"\u53c2\u6570\u540d\u79f0 \u7c7b\u578b \u8bf4\u660e data JSON \u65e0 chatId number \u804a\u5929ID userId number \u8981\u79fb\u4ea4\u7684\u7528\u6237ID"},{"location":"zh/tech/network/websocket/#_75","title":"\u793a\u4f8b","text":"<pre><code>{\n    \"command\": \"GroupOwnerTransfer\",\n    \"data\": {\n        \"chatId\": 5,\n        \"userId\": 2\n    }\n}\n</code></pre>"},{"location":"zh/tech/network/websocket/#groupownertransferresponses2c","title":"GroupOwnerTransferResponse(S2C)","text":""},{"location":"zh/tech/network/websocket/#_76","title":"\u63cf\u8ff0","text":"<p>\u670d\u52a1\u5668\u7aef\u5411\u5ba2\u6237\u7aef\u54cd\u5e94\u79fb\u4ea4\u7fa4\u4e3b\u8bf7\u6c42</p>"},{"location":"zh/tech/network/websocket/#_77","title":"\u53c2\u6570","text":"\u53c2\u6570\u540d\u79f0 \u7c7b\u578b \u8bf4\u660e data JSON \u65e0 state string \u54cd\u5e94\u72b6\u6001 chatId number \u804a\u5929ID userId number \u7528\u6237ID state\u72b6\u6001 \u8bf4\u660e Success \u6210\u529f\u54cd\u5e94 NotOwner \u53d1\u51fa\u8bf7\u6c42\u7684\u7528\u6237ID UserNotInChat \u7528\u6237\u4e0d\u5728\u7fa4\u804a\u4e2d ServerError \u670d\u52a1\u5668\u9519\u8bef"},{"location":"zh/tech/network/websocket/#_78","title":"\u793a\u4f8b","text":"<pre><code>{\n    \"command\": \"GroupOwnerTransferResponse\",\n    \"data\": {\n        \"state\": \"Success\",\n        \"chatId\": 4,\n        \"userId\": 2\n    }\n}\n</code></pre>"},{"location":"zh/tech/network/websocket/#removegroupmemberc2s","title":"RemoveGroupMember(C2S)","text":""},{"location":"zh/tech/network/websocket/#_79","title":"\u63cf\u8ff0","text":"<p>\u8e22\u51fa\u7fa4\u6210\u5458</p>"},{"location":"zh/tech/network/websocket/#_80","title":"\u53c2\u6570","text":"\u53c2\u6570\u540d\u79f0 \u7c7b\u578b \u8bf4\u660e chatId number \u804a\u5929ID userId number \u7528\u6237ID"},{"location":"zh/tech/network/websocket/#_81","title":"\u793a\u4f8b","text":"<pre><code>{\n    \"command\": \"RemoveGroupMember\",\n    \"data\": {\n        \"chatId\": 5,\n        \"userId\": 2\n    }\n}\n</code></pre>"},{"location":"zh/tech/network/websocket/#removegroupmemberresponses2c","title":"RemoveGroupMemberResponse(S2C)","text":""},{"location":"zh/tech/network/websocket/#_82","title":"\u63cf\u8ff0","text":"<p>\u670d\u52a1\u5668\u7aef\u5411\u5ba2\u6237\u7aef\u54cd\u5e94\u8e22\u51fa\u7fa4\u6210\u5458\u8bf7\u6c42</p>"},{"location":"zh/tech/network/websocket/#_83","title":"\u53c2\u6570","text":"\u53c2\u6570\u540d\u79f0 \u7c7b\u578b \u8bf4\u660e data JSON \u65e0 state string \u54cd\u5e94\u72b6\u6001 chatId number(\u53ef\u9009) \u6210\u529f\u54cd\u5e94\u540e\uff0c\u4e3a\u804a\u5929ID userId number(\u53ef\u9009) \u6210\u529f\u54cd\u5e94\u540e\uff0c\u4e3a\u88ab\u8e22\u51fa\u7684\u7528\u6237ID state\u72b6\u6001 \u8bf4\u660e Success \u6210\u529f\u54cd\u5e94 SameUser \u53d1\u51fa\u8bf7\u6c42\u7528\u6237\u4e0e\u8e22\u51fa\u7528\u6237\u76f8\u540c NoPermission \u65e0\u6743\u9650\u8e22\u51fa\u8be5\u6210\u5458 UserNotInChat \u7528\u6237\u4e0d\u5728\u7fa4\u804a\u4e2d ServerError \u670d\u52a1\u5668\u9519\u8bef"},{"location":"zh/tech/network/websocket/#_84","title":"\u793a\u4f8b","text":"<pre><code>{\n    \"command\": \"RemoveGroupMemberResponse\",\n    \"data\": {\n        \"state\": \"Success\",\n        \"chatId\": 5,\n        \"userId\": 15\n    }\n}\n</code></pre>"},{"location":"zh/tech/network/websocket/#_85","title":"\u79c1\u804a\u5df2\u8bfb\u67e5\u8be2\u534f\u8bae","text":""},{"location":"zh/tech/network/websocket/#getuserreadinprivatec2s","title":"GetUserReadInPrivate(C2S)","text":""},{"location":"zh/tech/network/websocket/#_86","title":"\u63cf\u8ff0","text":"<p>\u5ba2\u6237\u7aef\u5411\u670d\u52a1\u5668\u7aef\u8bf7\u6c42\u79c1\u804a\u5bf9\u65b9\u5df2\u8bfb\u5230\u7684\u6700\u65b0\u6d88\u606fID</p>"},{"location":"zh/tech/network/websocket/#_87","title":"\u53c2\u6570","text":"\u53c2\u6570\u540d\u79f0 \u7c7b\u578b \u8bf4\u660e data number \u804a\u5929ID"},{"location":"zh/tech/network/websocket/#ilike","title":"\u793a\u4f8biLike","text":"<pre><code>{\n    \"command\": \"GetUserReadInPrivate\",\n    \"data\": 72\n}\n</code></pre>"},{"location":"zh/tech/network/websocket/#getuserreadinprivateresponses2c","title":"GetUserReadInPrivateResponse(S2C)","text":""},{"location":"zh/tech/network/websocket/#_88","title":"\u63cf\u8ff0","text":"<p>\u670d\u52a1\u5668\u7aef\u5411\u5ba2\u6237\u7aef\u53d1\u9001\u79c1\u804a\u5bf9\u65b9\u6700\u65b0\u7684\u5df2\u8bfb\u6d88\u606fID</p>"},{"location":"zh/tech/network/websocket/#_89","title":"\u53c2\u6570","text":"\u53c2\u6570\u540d\u79f0 \u7c7b\u578b \u8bf4\u660e data JSON \u65e0 state string \u54cd\u5e94\u72b6\u6001 chatId number(\u53ef\u9009) \u6210\u529f\u54cd\u5e94\u540e\uff0c\u804a\u5929ID inChatId number(\u53ef\u9009) \u6210\u529f\u54cd\u5e94\u540e\uff0c\u6d88\u606fID state\u72b6\u6001 \u8bf4\u660e Success \u6210\u529f\u54cd\u5e94 NotPrivateChat \u8be5\u804a\u5929\u4e0d\u662f\u79c1\u804a UserNotInChat \u53d1\u51fa\u8bf7\u6c42\u7684\u7528\u6237\u4e0d\u5728\u8be5\u7fa4\u804a\u4e2d ServerError \u670d\u52a1\u5668\u9519\u8bef"},{"location":"zh/tech/network/websocket/#_90","title":"\u793a\u4f8b","text":"<pre><code>{\n    \"command\": \"GetUserReadInPrivateResponse\",\n    \"data\": {\n        \"state\": \"Success\",\n        \"chatId\": 72,\n        \"inChatId\": 5\n    }\n}\n</code></pre> <pre><code>{\n    \"command\": \"GetUserReadInPrivateResponse\",\n    \"data\": {\n        \"state\": \"NotPrivateChat\"\n    }\n}\n</code></pre>"},{"location":"zh/tech/network/websocket/#_91","title":"\u7fa4\u804a\u5df2\u8bfb\u67e5\u8be2\u534f\u8bae","text":""},{"location":"zh/tech/network/websocket/#getuserreadingroupc2s","title":"GetUserReadInGroup(C2S)","text":""},{"location":"zh/tech/network/websocket/#_92","title":"\u63cf\u8ff0","text":"<p>\u5ba2\u6237\u7aef\u5411\u670d\u52a1\u5668\u7aef\u8bf7\u6c42\u5df2\u8bfb\u8be5\u6d88\u606f\u7684\u7fa4\u6210\u5458ID\u5217\u8868</p>"},{"location":"zh/tech/network/websocket/#_93","title":"\u53c2\u6570","text":"\u53c2\u6570\u540d\u79f0 \u7c7b\u578b \u8bf4\u660e data JSON \u65e0 chatId number \u7fa4\u804aID inChatId number \u6d88\u606fID"},{"location":"zh/tech/network/websocket/#_94","title":"\u793a\u4f8b","text":"<pre><code>{\n    \"command\": \"GetUserReadInGroup\",\n    \"data\": {\n        \"chatId\": 4,\n        \"inChatId\": 49\n    }\n}\n</code></pre>"},{"location":"zh/tech/network/websocket/#getuserreadingroupresponses2c","title":"GetUserReadInGroupResponse(S2C)","text":""},{"location":"zh/tech/network/websocket/#_95","title":"\u63cf\u8ff0","text":"<p>\u670d\u52a1\u5668\u7aef\u5411\u5ba2\u6237\u7aef\u53d1\u9001\u5bf9\u5e94\u6d88\u606f\u7684\u5df2\u8bfb\u6210\u5458ID\u5217\u8868</p>"},{"location":"zh/tech/network/websocket/#_96","title":"\u53c2\u6570","text":"\u53c2\u6570\u540d\u79f0 \u7c7b\u578b \u8bf4\u660e data JSON \u65e0 state string \u54cd\u5e94\u72b6\u6001 chatId number(\u53ef\u9009) \u6210\u529f\u54cd\u5e94\u540e\uff0c\u804a\u5929ID inChatId number(\u53ef\u9009) \u6210\u529f\u54cd\u5e94\u540e\uff0c\u6d88\u606fID userIds Array(\u53ef\u9009) \u6210\u529f\u54cd\u5e94\u540e\uff0c\u5df2\u8bfb\u6210\u5458ID\u5217\u8868 userIds[index] number \u7528\u6237ID state\u72b6\u6001 \u8bf4\u660e Success \u6210\u529f\u54cd\u5e94 NotGroupChat \u8be5\u7fa4\u804a\u4e0d\u662f\u7fa4\u804a UserNotInChat \u53d1\u51fa\u8bf7\u6c42\u7684\u7528\u6237\u4e0d\u5728\u7fa4\u804a\u4e2d"},{"location":"zh/tech/network/websocket/#_97","title":"\u793a\u4f8b","text":"<pre><code>{\n    \"command\": \"GetUserReadInGroupResponse\",\n    \"data\": {\n        \"state\": \"Success\",\n        \"chatId\": 4,\n        \"inChatId\": 15,\n        \"userIds\": [\n            10,\n            2\n        ]\n    }\n}\n</code></pre> <pre><code>{\n    \"command\": \"GetUserReadInGroupResponse\",\n    \"data\": {\n        \"state\": \"UserNotInChat\"\n    }\n}\n</code></pre>"},{"location":"zh/tech/network/websocket/#_98","title":"\u7fa4\u804a\u516c\u544a\u534f\u8bae","text":""},{"location":"zh/tech/network/websocket/#pullgroupnoticec2s","title":"PullGroupNotice(C2S)","text":""},{"location":"zh/tech/network/websocket/#_99","title":"\u63cf\u8ff0","text":"<p>\u5ba2\u6237\u7aef\u5411\u670d\u52a1\u5668\u7aef\u589e\u91cf\u62c9\u53d6\u7fa4\u804a\u516c\u544a\u6570\u636e</p>"},{"location":"zh/tech/network/websocket/#_100","title":"\u53c2\u6570","text":"\u53c2\u6570\u540d\u79f0 \u7c7b\u578b \u8bf4\u660e data JSON \u65e0 chatId number \u804a\u5929ID lastNoticeId number \u5ba2\u6237\u7aef\u5df2\u6709\u7684\u6700\u65b0\u516c\u544aID\uff0c\u82e5\u4e3a0\u5219\u5168\u91cf\u62c9\u53d6"},{"location":"zh/tech/network/websocket/#_101","title":"\u793a\u4f8b","text":"<pre><code>{\n    \"command\": \"PullGroupNotice\",\n    \"data\": {\n        \"chatId\": 4,\n        \"lastNoticeId\": 0\n    }\n}\n</code></pre>"},{"location":"zh/tech/network/websocket/#pullgroupnoticeresponses2c","title":"PullGroupNoticeResponse(S2C)","text":""},{"location":"zh/tech/network/websocket/#_102","title":"\u63cf\u8ff0","text":"<p>\u670d\u52a1\u5668\u7aef\u5411\u5ba2\u6237\u7aef\u53d1\u9001\u5e8f\u5217\u5316\u540e\u7684\u7fa4\u516c\u544a\u6570\u636e\u5217\u8868</p>"},{"location":"zh/tech/network/websocket/#_103","title":"\u53c2\u6570","text":"\u53c2\u6570\u540d\u79f0 \u7c7b\u578b \u8bf4\u660e data JSON \u65e0 state string \u54cd\u5e94\u72b6\u6001 chatId number \u804a\u5929ID groupNotice Array(\u53ef\u9009) \u6210\u529f\u54cd\u5e94\u540e\uff0c\u4e3a\u7fa4\u516c\u544a\u6570\u636e\u5217\u8868 groupNotice[index] string \u5e8f\u5217\u5316\u540e\u7684\u7fa4\u516c\u544a\u6570\u636e state\u72b6\u6001 \u8bf4\u660e Success \u6210\u529f\u54cd\u5e94 UserNotInChat \u53d1\u51fa\u8bf7\u6c42\u7684\u7528\u6237\u4e0d\u5728\u8be5\u7fa4\u804a\u4e2d ServerError \u670d\u52a1\u5668\u9519\u8bef"},{"location":"zh/tech/network/websocket/#_104","title":"\u793a\u4f8b","text":"<pre><code>{\n    \"command\": \"PullGroupNoticeResponse\",\n    \"data\": {\n        \"state\": \"Success\",\n        \"chatId\": 4,\n        \"groupNotice\": []\n    }\n}\n</code></pre>"},{"location":"zh/tech/network/websocket/#sendgroupnoticec2s","title":"SendGroupNotice(C2S)","text":""},{"location":"zh/tech/network/websocket/#_105","title":"\u63cf\u8ff0","text":"<p>\u53d1\u9001\u7fa4\u516c\u544a</p>"},{"location":"zh/tech/network/websocket/#_106","title":"\u53c2\u6570","text":"\u53c2\u6570\u540d\u79f0 \u7c7b\u578b \u8bf4\u660e data JSON \u65e0 chatId number \u804a\u5929ID clientId number \u5ba2\u6237\u7aef\u6d88\u606fID notice string \u516c\u544a\u5185\u5bb9"},{"location":"zh/tech/network/websocket/#_107","title":"\u793a\u4f8b","text":"<pre><code>{\n    \"command\": \"SendGroupNotice\",\n    \"data\": {\n        \"chatId\": 4,\n        \"clientId\": 1,\n        \"notice\": \"test\"\n    }\n}\n</code></pre>"},{"location":"zh/tech/network/websocket/#groupnoticeresponses2c","title":"GroupNoticeResponse(S2C)","text":""},{"location":"zh/tech/network/websocket/#_108","title":"\u63cf\u8ff0","text":"<p>\u670d\u52a1\u5668\u7aef\u54cd\u5e94\u5ba2\u6237\u7aef\u7684\u53d1\u9001\u7fa4\u516c\u544a\u8bf7\u6c42</p>"},{"location":"zh/tech/network/websocket/#_109","title":"\u53c2\u6570","text":"\u53c2\u6570\u540d\u79f0 \u7c7b\u578b \u8bf4\u660e data JSON \u65e0 state string \u54cd\u5e94\u72b6\u6001 chatId number \u804a\u5929ID clientId number \u5ba2\u6237\u7aef\u804a\u5929ID noticeId number \u516c\u544aID timestamp number \u516c\u544a\u65f6\u95f4\u6233 state\u72b6\u6001 \u8bf4\u660e Success \u6210\u529f\u54cd\u5e94 NoPermission \u65e0\u6743\u53d1\u9001\u7fa4\u516c\u544a LenthLimitExceeded \u7fa4\u516c\u544a\u957f\u5ea6\u8fc7\u957f ServerError \u670d\u52a1\u5668\u9519\u8bef"},{"location":"zh/tech/network/websocket/#_110","title":"\u793a\u4f8b","text":"<pre><code>{\n    \"command\": \"GroupNoticeResponse\",\n    \"data\": {\n        \"state\": \"Success\",\n        \"chatId\": 4,\n        \"clientId\": 1,\n        \"noticeId\": 1,\n        \"timestamp\": 16851863077\n    }\n}\n</code></pre>"},{"location":"zh/tech/network/websocket/#token","title":"token\u7b7e\u53d1\u534f\u8bae","text":""},{"location":"zh/tech/network/websocket/#applyfortokenc2s","title":"ApplyForToken(C2S)","text":""},{"location":"zh/tech/network/websocket/#_111","title":"\u63cf\u8ff0","text":"<p>\u5ba2\u6237\u7aef\u5411\u670d\u52a1\u5668\u7aef\u8bf7\u6c42\u7b7e\u53d1token</p>"},{"location":"zh/tech/network/websocket/#_112","title":"\u53c2\u6570","text":"\u53c2\u6570\u5217\u8868 \u7c7b\u578b \u8bf4\u660e data undefinend \u65e0"},{"location":"zh/tech/network/websocket/#_113","title":"\u793a\u4f8b","text":"<pre><code>{\n    \"command\": \"ApplyForToken\"\n}\n</code></pre>"},{"location":"zh/tech/network/websocket/#applyfortokenresponses2c","title":"ApplyForTokenResponse(S2C)","text":""},{"location":"zh/tech/network/websocket/#_114","title":"\u63cf\u8ff0","text":"<p>\u670d\u52a1\u5668\u7aef\u5411\u5ba2\u6237\u7aef\u7b7e\u53d1token</p>"},{"location":"zh/tech/network/websocket/#_115","title":"\u53c2\u6570","text":"\u53c2\u6570\u540d\u79f0 \u7c7b\u578b \u8bf4\u660e data JSON \u65e0 state string \u54cd\u5e94\u72b6\u6001 token string(\u53ef\u9009) token timestamp number(\u53ef\u9009) \u65f6\u95f4\u6233 state\u72b6\u6001 \u8bf4\u660e Success \u6210\u529f\u54cd\u5e94 ServerError \u670d\u52a1\u5668\u9519\u8bef"},{"location":"zh/tech/network/websocket/#_116","title":"\u793a\u4f8b","text":"<pre><code>{\n    \"command\": \"ApplyForTokenResponse\",\n    \"data\": {\n        \"state\": \"ServerError\"\n    }\n}\n</code></pre> <pre><code>{\n    \"command\": \"ApplyForTokenResponse\",\n    \"data\": {\n        \"state\": \"Success\",\n        \"token\": \"b309358883384c45b321340a127cacd6\",\n        \"timestamp\": 1685192367997\n    }\n}\n</code></pre>"},{"location":"zh/tech/network/websocket/#_117","title":"\u6d88\u606f\u53d1\u9001\u53ca\u64cd\u4f5c\u534f\u8bae","text":""},{"location":"zh/tech/network/websocket/#sendmessagec2s","title":"SendMessage(C2S)","text":""},{"location":"zh/tech/network/websocket/#_118","title":"\u63cf\u8ff0","text":"<p>\u53d1\u9001\u6d88\u606f</p>"},{"location":"zh/tech/network/websocket/#_119","title":"\u53c2\u6570","text":"\u53c2\u6570\u540d\u79f0 \u7c7b\u578b \u8bf4\u660e data JSON \u65e0 type string \u6d88\u606f\u7c7b\u578b clientId number \u5ba2\u6237\u7aef\u6d88\u606fID serializedContent string \u5e8f\u5217\u5316\u540e\u7684\u6d88\u606f\u4e3b\u4f53 timestamp number \u65f6\u95f4\u6233 type\u7c7b\u578b \u8bf4\u660e Text \u6587\u672c\u6d88\u606f File \u6587\u4ef6\u6d88\u606f Image \u56fe\u7247\u6d88\u606f Voice \u8bed\u97f3\u6d88\u606f Transfer \u8f6c\u53d1\u6d88\u606f Revoked \u64a4\u56de\u6d88\u606f MentionText \u63d0\u53ca\u6d88\u606f ReplyText \u56de\u590d\u6d88\u606f"},{"location":"zh/tech/network/websocket/#_120","title":"\u793a\u4f8b","text":"<pre><code>{\n    \"command\": \"SendMessage\",\n    \"data\": {\n        \"chatId\": 4,\n        \"clientId\": 1,\n        \"serializedContent\": \"\\\"\u4f60\u597d\\\"\",\n        \"timestamp\": 1685192622888,\n        \"type\": \"Text\"\n    }\n}\n</code></pre>"},{"location":"zh/tech/network/websocket/#sendmessageresponses2c","title":"SendMessageResponse(S2C)","text":""},{"location":"zh/tech/network/websocket/#_121","title":"\u63cf\u8ff0","text":"<p>\u670d\u52a1\u5668\u7aef\u54cd\u5e94\u5ba2\u6237\u7aef\u53d1\u9001\u6d88\u606f\u8bf7\u6c42</p>"},{"location":"zh/tech/network/websocket/#_122","title":"\u53c2\u6570","text":"\u53c2\u6570\u540d\u79f0 \u7c7b\u578b \u8bf4\u660e data JSON \u65e0 state string \u54cd\u5e94\u72b6\u6001 clientId number \u5ba2\u6237\u7aef\u6d88\u606fID chatId number \u804a\u5929ID inChatId number \u6d88\u606fID timestamp number \u65f6\u95f4\u6233 state\u72b6\u6001 \u8bf4\u660e Success \u6210\u529f\u54cd\u5e94 LenthLimitExceeded \u53d1\u9001\u6d88\u606f\u8fc7\u957f UserNotInChat \u7528\u6237\u4e0d\u5728\u804a\u5929\u4e2d UserNotLoggedIn \u7528\u6237\u5c1a\u672a\u767b\u5f55 ServerError \u670d\u52a1\u5668\u9519\u8bef"},{"location":"zh/tech/network/websocket/#_123","title":"\u793a\u4f8b","text":"<pre><code>{\n    \"command\": \"SendMessageResponse\",\n    \"data\": {\n        \"state\": \"Success\",\n        \"clientId\": 1,\n        \"chatId\": 4,\n        \"inChatId\": 52,\n        \"timestamp\": 1685192616\n    }\n}\n</code></pre> <pre><code>{\n    \"command\": \"SendMessageResponse\",\n    \"data\": {\n        \"state\": \"UserNotInChat\"\n    }\n}\n</code></pre>"},{"location":"zh/tech/network/websocket/#revokemessagec2s","title":"RevokeMessage(C2S)","text":""},{"location":"zh/tech/network/websocket/#_124","title":"\u63cf\u8ff0","text":"<p>\u64a4\u56de\u6d88\u606f</p>"},{"location":"zh/tech/network/websocket/#_125","title":"\u53c2\u6570","text":"\u53c2\u6570\u540d\u79f0 \u7c7b\u578b \u8bf4\u660e data JSON \u65e0 chatId number \u804a\u5929ID inChatId number \u6d88\u606fID method string \u64a4\u56de\u6743\u9650 method\u7c7b\u578b \u8bf4\u660e Sender \u53d1\u9001\u8005\u64a4\u56de\u81ea\u5df1\u53d1\u9001\u7684\u6d88\u606f GroupAdmin \u7fa4\u804a\u7ba1\u7406\u5458\u64a4\u56de\u6d88\u606f GroupOwner \u7fa4\u4e3b\u64a4\u56de\u6d88\u606f"},{"location":"zh/tech/network/websocket/#_126","title":"\u793a\u4f8b","text":"<pre><code>{\n    \"command\": \"RevokeMessage\",\n    \"data\": {\n        \"chatId\": 4,\n        \"inChatId\": 52,\n        \"method\": \"Sender\"\n    }\n}\n</code></pre>"},{"location":"zh/tech/network/websocket/#revokemessageresponses2c","title":"RevokeMessageResponse(S2C)","text":""},{"location":"zh/tech/network/websocket/#_127","title":"\u63cf\u8ff0","text":"<p>\u670d\u52a1\u5668\u7aef\u54cd\u5e94\u64a4\u56de\u8bf7\u6c42</p>"},{"location":"zh/tech/network/websocket/#_128","title":"\u53c2\u6570","text":"\u53c2\u6570\u540d\u79f0 \u7c7b\u578b \u8bf4\u660e data JSON \u65e0 state string \u54cd\u5e94\u72b6\u6001 chatId number \u804a\u5929ID inChatId number \u6d88\u606fID state\u72b6\u6001 \u8bf4\u660e Success \u6210\u529f\u54cd\u5e94 TimeLimitExceeded \u8d85\u65f6\u65e0\u6cd5\u64a4\u56de PermissionsDenied \u65e0\u6743\u64a4\u56de\u8be5\u6d88\u606f MessageNotExisted \u6d88\u606f\u4e0d\u5b58\u5728"},{"location":"zh/tech/network/websocket/#_129","title":"\u793a\u4f8b","text":"<pre><code>{\n    \"command\": \"RevokeMessageResponse\",\n    \"data\": {\n        \"state\": \"Success\",\n        \"chatId\": 4,\n        \"inChatId\": 50\n    }\n}\n</code></pre>"},{"location":"zh/tech/network/websocket/#_130","title":"\u8bf7\u6c42\u53d1\u9001\u53ca\u5904\u7406\u534f\u8bae","text":""},{"location":"zh/tech/network/websocket/#sendrequestc2s","title":"SendRequest(C2S)","text":""},{"location":"zh/tech/network/websocket/#_131","title":"\u63cf\u8ff0","text":"<p>\u53d1\u9001\u8bf8\u5982\u6dfb\u52a0\u597d\u53cb\uff0c\u7533\u8bf7\u5165\u7fa4\u7684\u8bf7\u6c42</p>"},{"location":"zh/tech/network/websocket/#_132","title":"\u53c2\u6570","text":"\u53c2\u6570\u540d\u79f0 \u7c7b\u578b \u8bf4\u660e data JSON \u65e0 clientId number \u5ba2\u6237\u7aef\u6d88\u606fID content JSON \u8bf7\u6c42\u4f53 content.type string \u8bf7\u6c42\u7c7b\u578b content.receiverId number(\u53ef\u9009) \u8bf7\u6c42\u63a5\u6536\u8005ID content.chatId number(\u53ef\u9009) \u63a5\u6536\u8bf7\u6c42\u7684\u7fa4\u804aID message string \u8bf7\u6c42\u9a8c\u8bc1\u6d88\u606f content.type\u7c7b\u578b \u8bf4\u660e MakeFriend \u6dfb\u52a0\u597d\u53cb JoinGroup \u7533\u8bf7\u5165\u7fa4 GroupInvitation \u9080\u8bf7\u5165\u7fa4 InvitedJoinGroup \u9080\u8bf7\u5165\u7fa4\u5ba1\u6838"},{"location":"zh/tech/network/websocket/#_133","title":"\u793a\u4f8b","text":"<pre><code>{\n    \"command\": \"SendRequest\",\n    \"data\": {\n        \"messgae\": \"\u52a0\u4e2a\u597d\u53cb\",\n        \"clientId\": 1,\n        \"content\": {\n            \"type\": \"MakeFriend\",\n            \"receiverId\": 15\n        }\n    }\n}\n</code></pre>"},{"location":"zh/tech/network/websocket/#sendrequestresponses2c","title":"SendRequestResponse(S2C)","text":""},{"location":"zh/tech/network/websocket/#_134","title":"\u63cf\u8ff0","text":"<p>\u670d\u52a1\u5668\u7aef\u54cd\u5e94\u53d1\u9001\u8bf7\u6c42\u7684\u8bf7\u6c42</p>"},{"location":"zh/tech/network/websocket/#_135","title":"\u53c2\u6570","text":"\u53c2\u6570\u540d\u79f0 \u7c7b\u578b \u8bf4\u660e data JSON \u65e0 state string \u54cd\u5e94\u72b6\u6001 clientId number \u5ba2\u6237\u7aef\u6d88\u606fID reqId number(\u53ef\u9009) \u6210\u529f\u54cd\u5e94\u540e\uff0c\u4e3a\u8bf7\u6c42ID state\u72b6\u6001 \u8bf4\u660e Success \u6210\u529f\u54cd\u5e94 ServerError \u670d\u52a1\u5668\u9519\u8bef"},{"location":"zh/tech/network/websocket/#_136","title":"\u793a\u4f8b","text":"<pre><code>{\n    \"command\": \"SendRequestResponse\",\n    \"data\": {\n        \"state\": \"Success\",\n        \"clientId\": 1,\n        \"reqId\": 15\n    }\n}\n</code></pre>"},{"location":"zh/tech/network/websocket/#solverequestc2s","title":"SolveRequest(C2S)","text":""},{"location":"zh/tech/network/websocket/#_137","title":"\u63cf\u8ff0","text":"<p>\u5904\u7406\u8bf7\u6c42</p>"},{"location":"zh/tech/network/websocket/#_138","title":"\u53c2\u6570","text":"\u53c2\u6570\u540d\u79f0 \u7c7b\u578b \u8bf4\u660e data JSON \u65e0 reqId number \u8bf7\u6c42ID answer string \u5904\u7406\u64cd\u4f5c answer\u7c7b\u578b \u8bf4\u660e Refused \u62d2\u7edd\u8bf7\u6c42 Approved \u540c\u6837\u8bf7\u6c42"},{"location":"zh/tech/network/websocket/#_139","title":"\u793a\u4f8b","text":"<pre><code>{\n    \"command\": \"SolveRequest\",\n    \"data\": {\n        \"reqId\": 15,\n        \"answer\": \"Refused\"\n    }\n}\n</code></pre>"},{"location":"zh/tech/network/websocket/#solverequestresponses2c","title":"SolveRequestResponse(S2C)","text":""},{"location":"zh/tech/network/websocket/#_140","title":"\u63cf\u8ff0","text":"<p>\u670d\u52a1\u5668\u7aef\u54cd\u5e94\u7528\u6237\u5904\u7406\u8bf7\u6c42</p>"},{"location":"zh/tech/network/websocket/#_141","title":"\u53c2\u6570","text":"\u53c2\u6570\u540d\u79f0 \u7c7b\u578b \u8bf4\u660e data JSON \u65e0 state string \u54cd\u5e94\u72b6\u6001 reqId number \u8bf7\u6c42ID state\u72b6\u6001 \u8bf4\u660e Success \u6210\u529f\u54cd\u5e94 Nohandler \u8be5\u7528\u6237\u65e0\u5904\u7406\u6743\u9650"},{"location":"zh/tech/network/websocket/#_142","title":"\u793a\u4f8b","text":"<pre><code>{\n    \"command\": \"SolveRequestResponse\",\n    \"data\": {\n        \"state\": \"Success\",\n        \"reqId\": 10\n    }\n}\n</code></pre>"},{"location":"zh/tech/network/websocket/#requeststateupdates2c","title":"RequestStateUpdate(S2C)","text":""},{"location":"zh/tech/network/websocket/#_143","title":"\u63cf\u8ff0","text":"<p>\u670d\u52a1\u5668\u7aef\u5411\u5ba2\u6237\u7aef\u53d1\u9001\u8bf7\u6c42\u72b6\u6001\u66f4\u6539\u6307\u4ee4</p>"},{"location":"zh/tech/network/websocket/#_144","title":"\u53c2\u6570","text":"\u53c2\u6570\u540d\u79f0 \u7c7b\u578b \u8bf4\u660e data JSON \u65e0 state string \u5c06\u66f4\u65b0\u7684\u72b6\u6001 reqId number \u8bf7\u6c42ID"},{"location":"zh/tech/network/websocket/#_145","title":"\u793a\u4f8b","text":"<pre><code>{\n    \"command\": \"RequestStateUpdate\",\n    \"data\": {\n        \"state\": \"Solved\",\n        \"reqId\": 10\n    }\n}\n</code></pre>"},{"location":"zh/tech/network/websocket/#_146","title":"\u5220\u9664\u597d\u53cb\u534f\u8bae","text":""},{"location":"zh/tech/network/websocket/#unfriendc2s","title":"Unfriend(C2S)","text":""},{"location":"zh/tech/network/websocket/#_147","title":"\u63cf\u8ff0","text":"<p>\u5220\u9664\u597d\u53cb</p>"},{"location":"zh/tech/network/websocket/#_148","title":"\u53c2\u6570","text":"\u53c2\u6570\u540d\u79f0 \u7c7b\u578b \u8bf4\u660e data number \u5220\u9664\u7684\u597d\u53cbID"},{"location":"zh/tech/network/websocket/#_149","title":"\u793a\u4f8b","text":"<pre><code>{\n    \"command\": \"Unfriend\",\n    \"data\": 15\n}\n</code></pre>"},{"location":"zh/tech/network/websocket/#unfriendresponses2c","title":"UnfriendResponse(S2C)","text":""},{"location":"zh/tech/network/websocket/#_150","title":"\u63cf\u8ff0","text":"<p>\u670d\u52a1\u5668\u7aef\u54cd\u5e94\u5ba2\u6237\u7aef\u5220\u9664\u597d\u53cb\u8bf7\u6c42</p>"},{"location":"zh/tech/network/websocket/#_151","title":"\u53c2\u6570","text":"\u53c2\u6570\u540d\u79f0 \u7c7b\u578b \u8bf4\u660e state string \u54cd\u5e94\u72b6\u6001 chatId number(\u53ef\u9009) \u6210\u529f\u54cd\u5e94\u540e\uff0c\u4e3a\u804a\u5929ID state\u72b6\u6001 \u8bf4\u660e Success \u6210\u529f\u54cd\u5e94 NotFriend \u4e8c\u8005\u76ee\u524d\u4e0d\u662f\u597d\u53cb"},{"location":"zh/tech/network/websocket/#_152","title":"\u793a\u4f8b","text":"<pre><code>{\n    \"command\": \"UnfriendResponse\",\n    \"data\": {\n        \"state\": \"Success\",\n        \"chatId\": 5\n    }\n}\n</code></pre>"},{"location":"zh/user/deploy/server/","title":"\u90e8\u7f72\u6307\u5357","text":"<p>TODO</p>"},{"location":"zh/user/help/web/","title":"\u7528\u6237\u624b\u518c","text":"<p>\u611f\u8c22\u60a8\u4f7f\u7528DMail\uff01</p> <p>\u672c\u5e73\u53f0\u5730\u5740\uff1aDMail \uff5cInstant Messaging System </p>"},{"location":"zh/user/help/web/#_2","title":"\u6807\u7b7e\u680f","text":""},{"location":"zh/user/help/web/#_3","title":"\u8d26\u53f7\u7ba1\u7406","text":"<ol> <li>\u6ce8\u518c\u65f6\u8bf7\u7ed1\u5b9a\u90ae\u7bb1\u8fdb\u884c\u6ce8\u518c\uff0c\u5e76\u4e14\u53ef\u4f7f\u7528\u8be5\u90ae\u7bb1\u627e\u56de\u5bc6\u7801\u3002</li> <li>\u4fee\u6539\u5bc6\u7801\uff1a\u4e2a\u4eba\u4e3b\u9875&gt;&gt;\u4fee\u6539\u5bc6\u7801\uff0c\u901a\u8fc7\u90ae\u7bb1\u63a5\u6536\u9a8c\u8bc1\u7801\u66f4\u6539\u5bc6\u7801\u3002</li> <li>\u6ce8\u9500\u8d26\u53f7\uff1a\u4e2a\u4eba\u4e3b\u9875&gt;&gt;\u6ce8\u9500\u8d26\u53f7\uff0c\u901a\u8fc7\u90ae\u7bb1\u63a5\u6536\u9a8c\u8bc1\u7801\u8fdb\u884c\u8d26\u53f7\u6ce8\u9500\u3002</li> <li>\u9000\u51fa\u767b\u5f55\uff1a\u4e2a\u4eba\u4e3b\u9875&gt;&gt;\u767b\u51fa\uff0c\u5373\u53ef\u9000\u51fa\u5f53\u524d\u8d26\u53f7\u3002</li> </ol>"},{"location":"zh/user/help/web/#_4","title":"\u4e2a\u4eba\u4fe1\u606f\u7ba1\u7406","text":"<p>\u70b9\u51fb\u4e2a\u4eba\u5934\u50cf\u8fdb\u5165\u4e2a\u4eba\u4e3b\u9875\uff0c\u4fee\u6539\u6216\u5b8c\u5584\u5934\u50cf\u3001\u6635\u79f0\u4fe1\u606f\u3002</p>"},{"location":"zh/user/help/web/#_5","title":"\u597d\u53cb\u7ba1\u7406","text":""},{"location":"zh/user/help/web/#_6","title":"\u6dfb\u52a0\u597d\u53cb","text":"<p>\u901a\u8baf\u5f55&gt;&gt;\u6dfb\u52a0\u597d\u53cb\uff08\u6216\u8bf7\u6c42\u5217\u8868&gt;&gt;\u6dfb\u52a0\u597d\u53cb\uff09\uff0c\u901a\u8fc7\u7528\u6237ID\u641c\u7d22\u597d\u53cb\u5e76\u53d1\u9001\u9a8c\u8bc1\u6d88\u606f\u3002</p>"},{"location":"zh/user/help/web/#_7","title":"\u5220\u9664\u597d\u53cb","text":"<p>\u70b9\u51fb\u597d\u53cb\u5934\u50cf\u8fdb\u5165\u4e2a\u4eba\u9875\u9762\uff0c\u70b9\u51fb\u3010\u5220\u9664\u597d\u53cb\u3011\u3002</p> <p></p>"},{"location":"zh/user/help/web/#_8","title":"\u67e5\u627e\u597d\u53cb","text":"<p>\u901a\u8baf\u5f55&gt;&gt;\u67e5\u627e\u7528\u6237\uff0c\u901a\u8fc7\u7528\u6237\u540d\u67e5\u627e\u597d\u53cb\u5217\u8868\u4e2d\u7684\u7528\u6237\u3002</p>"},{"location":"zh/user/help/web/#_9","title":"\u597d\u53cb\u4fe1\u606f","text":"<p>\u70b9\u51fb\u597d\u53cb\u5934\u50cf\u5373\u53ef\u67e5\u770b\u597d\u53cb\u7684\u7528\u6237ID\u3002</p>"},{"location":"zh/user/help/web/#_10","title":"\u6dfb\u52a0\u5907\u6ce8","text":"<p>\u5728\u3010\u901a\u8baf\u5f55\u3011\u4e2d\uff0c\u53cc\u51fb\u597d\u53cb\u540d\u79f0\u53ef\u6dfb\u52a0\u6216\u66f4\u6539\u597d\u53cb\u5907\u6ce8\u3002</p>"},{"location":"zh/user/help/web/#_11","title":"\u7fa4\u804a","text":""},{"location":"zh/user/help/web/#_12","title":"\u521b\u5efa\u7fa4\u804a","text":"<p>\u53ef\u901a\u8fc7\u4ee5\u4e0b\u4e24\u79cd\u65b9\u5f0f\u521b\u5efa\u7fa4\u804a\uff1a</p> <ol> <li>\u901a\u8baf\u5f55&gt;&gt;\u521b\u5efa\u7fa4\u804a\uff0c\u8bbe\u7f6e\u7fa4\u804a\u540d\u79f0\u751f\u6210\u65b0\u7684\u7fa4\u804a\u3002</li> <li>\u5728\u79c1\u804a\u754c\u9762\u4e2d\uff0c\u70b9\u51fb\u3010\u65b0\u6210\u5458\u3011\u6269\u5c55\u79c1\u804a\u4e3a\u7fa4\u804a\u3002</li> </ol>"},{"location":"zh/user/help/web/#_13","title":"\u52a0\u5165\u7fa4\u804a","text":"<p>\u901a\u8baf\u5f55&gt;&gt;\u6dfb\u52a0\u7fa4\u804a\uff0c\u901a\u8fc7\u7fa4\u804aID\u641c\u7d22\u8be5\u7fa4\u5e76\u53d1\u9001\u9a8c\u8bc1\u6d88\u606f\u3002</p>"},{"location":"zh/user/help/web/#_14","title":"\u7fa4\u804a\u4fe1\u606f","text":"<p>\u70b9\u51fb\u7fa4\u804a\u5934\u50cf\u53ef\u67e5\u770b\u7fa4\u804a\u4fe1\u606f\uff0c\u5305\u62ec\u7fa4\u804aID\u3001\u7fa4\u6210\u5458\u7ec4\u6210\u548c\u5386\u53f2\u7fa4\u516c\u544a\uff0c\u5e76\u53ef\u9009\u62e9\u9000\u51fa\u7fa4\u804a\u3002</p> <p></p>"},{"location":"zh/user/help/web/#_15","title":"\u7fa4\u804a\u7ba1\u7406","text":""},{"location":"zh/user/help/web/#_16","title":"\u9080\u8bf7\u5165\u7fa4","text":"<p>\u70b9\u51fb\u3010\u65b0\u6210\u5458\u3011\u53ef\u9080\u8bf7\u5217\u8868\u597d\u53cb\u5165\u7fa4\uff0c\u901a\u8fc7\u7fa4\u4e3b\u6216\u7ba1\u7406\u5458\u540c\u610f\u540e\u65b9\u53ef\u5165\u7fa4\u3002</p>"},{"location":"zh/user/help/web/#_17","title":"\u7fa4\u516c\u544a","text":"<p>\u7fa4\u4e3b\u548c\u7fa4\u7ba1\u7406\u5458\u53ef\u53d1\u5e03\u7fa4\u516c\u544a\u3002</p>"},{"location":"zh/user/help/web/#_18","title":"\u7fa4\u6d88\u606f\u7ba1\u7406","text":"<p>\u7fa4\u4e3b\u548c\u7fa4\u7ba1\u7406\u5458\u53ef\u5ffd\u89c6\u65f6\u95f4\u9650\u5236\u64a4\u56de\u7fa4\u6210\u5458\u53d1\u9001\u7684\u6d88\u606f\u3002</p>"},{"location":"zh/user/help/web/#_19","title":"\u6d88\u606f\u8bbe\u7f6e\u4e0e\u804a\u5929\u8bbe\u7f6e","text":"<ol> <li> <p>\u53ef\u5728\u3010\u4e2a\u4eba\u4e3b\u9875\u3011\u4e2d\u8bbe\u7f6e\u684c\u9762\u6d88\u606f\u63d0\u9192\u548c\u6d88\u606f\u63d0\u793a\u97f3\u529f\u80fd\u3002</p> </li> <li> <p>\u5728\u3010\u804a\u5929\u754c\u9762\u3011\u4e2d\uff0c\u70b9\u51fb\u4f1a\u8bdd\u53f3\u4e0a\u89d2\u53ef\u8bbe\u7f6e\u4e8c\u7ea7\u9a8c\u8bc1\u3001\u6d88\u606f\u514d\u6253\u6270\u4e0e\u7f6e\u9876\u804a\u5929\u3002</p> </li> </ol> <p></p>"},{"location":"zh/user/help/web/#_20","title":"\u4e3b\u9898\u8bbe\u7f6e","text":"<p>\u53ef\u5728\u3010\u4e2a\u4eba\u4e3b\u9875\u3011\u4e2d\u8bbe\u7f6e\u4e3b\u9898\u989c\u8272\uff0c5\u79cd\u4e3b\u9898\u989c\u8272\u53ef\u4e0e\u6df1/\u6d45\u8272\u6a21\u5f0f\u81ea\u7531\u7ec4\u5408\u3002</p>"},{"location":"zh/user/help/web/#_21","title":"\u5916\u90e8\u670d\u52a1","text":"<p>\u5728\u3010\u8bbe\u7f6e\u3011\u4e2d\u8bbe\u7f6e\u5916\u90e8\u62d3\u5c55\u670d\u52a1\uff0c\u5305\u62ec\u5916\u8bed\u7ffb\u8bd1\u548c\u8bed\u97f3\u8bc6\u522b\u529f\u80fd\u3002</p> <p></p>"}]}